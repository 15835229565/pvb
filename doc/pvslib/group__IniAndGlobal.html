<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ProcessViewBrowser-ServerProgramming: Initialisation and global routines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Initialisation and global routines</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga3d29ab442a67496386705bcf66180160">glencode_set_param</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga1b0519bc72b1168bec8dd173e6ce1e47">pvlock</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga4ed35d24f18f4a747092558ead32dda8">pvunlock</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gac61f8fa497b44e693020c265b21206bc">pvsystem</a> (const char *command)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gaa94a429d64753c7c016bf9f2202def63">pvXYAllocate</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, int n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga7f8f3c35707fbddf62a27ee70b8296eb">getIntegers</a> (const char *text, <a class="el" href="structIntegerArray.html">IntegerArray</a> *ia)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga81dfdec8425cf4e7c411c06a942d9957">getFloats</a> (const char *text, <a class="el" href="structFloatArray.html">FloatArray</a> *fa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga46f7db6fdbd0266ec27ed209ec78aa80">getTextFromText</a> (const char *text)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gaf657e6c10b2559303f960304444a6a2f">pvSetXY</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, int i, float x, float y)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga171d44435443470cbec90401a059d2f5">pvInitInternal</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gac1f0ac6427b1dea0f068a18ff35023fa">pvInit</a> (int ac, char **av, <a class="el" href="struct__PARAM__.html">PARAM</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gab79b2a51875d52f08fb65809b27102e4">pvAccept</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga5e7efa8b8a551f982e3e95be3ca6a7a1">pvCreateThread</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, int s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gaf96d6b8a0698a9dc33b689e6f6af61ce">pvGetInitialMask</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga156b9eba01c7aa7ceef9326ecc8ea8e6">pvMain</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga995fefba9cbdfeeaf660df83a355401c">pvSetCleanup</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, int(*cleanup)(void *), void *app_data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gac8f7cc8be890e835afc57b204c646b26">pvGetEvent</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga5aef66d0169c0d1161d367b5fbf86cbd">pvPollEvent</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, char *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gae97cd460f11f1542c11ed9349b8c2b80">pvWait</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, const char *pattern)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gaf21c047322907535c21f600cf1b9fba5">pvGlUpdate</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, int id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga4c03529a0cea2c57c644908fa38ddad2">pvSleep</a> (int milliseconds)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga91de12f5b44ae6b136c1eee8e6e014fd">pvWarning</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, const char *text)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga865869acdc8177c3f837f9b76afcfefb">pvMainFatal</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, const char *text)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#gaf805ad598042f8da6896135e27cd387b">pvThreadFatal</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, const char *text)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga52a4f82d807e04869b86a08119109a24">pvScreenHint</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, int w, int h)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga3e6f444c72839e3549dacff16472ca08">pvSetMouseShape</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, int shape)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga4cf6c6a3745f02a74c7b4648d8511a12">pvSetWhatsThis</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, int id, const char *text)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga76b06d17d8bb20a1913bb0aa71339e06">pvWhatsThisPrintf</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, int id, const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__IniAndGlobal.html#ga42e02e6a01a7c010d2759ea2ca91f9f0">pvClientCommand</a> (<a class="el" href="struct__PARAM__.html">PARAM</a> *p, const char *command, const char *filename)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>These routines are used for initialisation. And also some global usable routines are available. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga81dfdec8425cf4e7c411c06a942d9957"></a><!-- doxytag: member="processviewserver.h::getFloats" ref="ga81dfdec8425cf4e7c411c06a942d9957" args="(const char *text, FloatArray *fa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getFloats </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFloatArray.html">FloatArray</a> *&nbsp;</td>
          <td class="paramname"> <em>fa</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Get integer array from string for script language
</pre> 
</div>
</div>
<a class="anchor" id="ga7f8f3c35707fbddf62a27ee70b8296eb"></a><!-- doxytag: member="processviewserver.h::getIntegers" ref="ga7f8f3c35707fbddf62a27ee70b8296eb" args="(const char *text, IntegerArray *ia)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getIntegers </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structIntegerArray.html">IntegerArray</a> *&nbsp;</td>
          <td class="paramname"> <em>ia</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Get integer array from string for script language
</pre> 
</div>
</div>
<a class="anchor" id="ga46f7db6fdbd0266ec27ed209ec78aa80"></a><!-- doxytag: member="processviewserver.h::getTextFromText" ref="ga46f7db6fdbd0266ec27ed209ec78aa80" args="(const char *text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* getTextFromText </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Get text in parentesis from text for script language
</pre> 
</div>
</div>
<a class="anchor" id="ga3d29ab442a67496386705bcf66180160"></a><!-- doxytag: member="processviewserver.h::glencode_set_param" ref="ga3d29ab442a67496386705bcf66180160" args="(PARAM *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int glencode_set_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gab79b2a51875d52f08fb65809b27102e4"></a><!-- doxytag: member="processviewserver.h::pvAccept" ref="gab79b2a51875d52f08fb65809b27102e4" args="(PARAM *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvAccept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
see pvInit
</pre> 
</div>
</div>
<a class="anchor" id="ga42e02e6a01a7c010d2759ea2ca91f9f0"></a><!-- doxytag: member="processviewserver.h::pvClientCommand" ref="ga42e02e6a01a7c010d2759ea2ca91f9f0" args="(PARAM *p, const char *command, const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvClientCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Run command on client.
Commands understood by client:
           pdf-viewer
           image-viewer
           svg-viewer
           txt-viewer
           csv-viewer
           html-viewer
command := pdf | img | svg | txt | csv | html 
</pre> 
</div>
</div>
<a class="anchor" id="ga5e7efa8b8a551f982e3e95be3ca6a7a1"></a><!-- doxytag: member="processviewserver.h::pvCreateThread" ref="ga5e7efa8b8a551f982e3e95be3ca6a7a1" args="(PARAM *p, int s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvCreateThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
see pvInit
</pre> 
</div>
</div>
<a class="anchor" id="gac8f7cc8be890e835afc57b204c646b26"></a><!-- doxytag: member="processviewserver.h::pvGetEvent" ref="gac8f7cc8be890e835afc57b204c646b26" args="(PARAM *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* pvGetEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
If it is necessary to cleanup your application when the main worker thread terminates
you can set an exit handler that receives the data in app_data.
Call this function in pvMain. See also pvMain.
</pre> 
</div>
</div>
<a class="anchor" id="gaf96d6b8a0698a9dc33b689e6f6af61ce"></a><!-- doxytag: member="processviewserver.h::pvGetInitialMask" ref="gaf96d6b8a0698a9dc33b689e6f6af61ce" args="(PARAM *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvGetInitialMask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Get the initial mask the user wants to see
p-&gt;initial_mask is a string identifying the initial mask 
</pre> 
</div>
</div>
<a class="anchor" id="gaf21c047322907535c21f600cf1b9fba5"></a><!-- doxytag: member="processviewserver.h::pvGlUpdate" ref="gaf21c047322907535c21f600cf1b9fba5" args="(PARAM *p, int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvGlUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
update OpenGL widget
</pre> 
</div>
</div>
<a class="anchor" id="gac1f0ac6427b1dea0f068a18ff35023fa"></a><!-- doxytag: member="processviewserver.h::pvInit" ref="gac1f0ac6427b1dea0f068a18ff35023fa" args="(int ac, char **av, PARAM *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvInit </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
(Test) pvInit must be called in main(). It interprets the command line switches that it knows.
Afterwards you can interpret your command line switches. It is possible to set p.user to data
of your choice. This data will be available in the worker threads. (Caution: the worker threads are
only allowed to read the p.user data because it is shared among all clients)
Then there must be a while(1) in which new clients are accepted. For each client a new thread
is created.</pre><pre> int main(int ac, char **av)
 {
 PARAM p;
 int   s;</pre><pre>   pvInit(ac,av,&amp;p);
here you may interpret ac,av and set p.user to your data
   while(1)
   {
     s = pvAccept(&amp;p);
     if(s != -1) pvCreateThread(&amp;p,s);
   }
   return 0;
 }
</pre> 
</div>
</div>
<a class="anchor" id="ga171d44435443470cbec90401a059d2f5"></a><!-- doxytag: member="processviewserver.h::pvInitInternal" ref="ga171d44435443470cbec90401a059d2f5" args="(PARAM *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvInitInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
see pvInit
Init for script languages
</pre> 
</div>
</div>
<a class="anchor" id="ga1b0519bc72b1168bec8dd173e6ce1e47"></a><!-- doxytag: member="processviewserver.h::pvlock" ref="ga1b0519bc72b1168bec8dd173e6ce1e47" args="(PARAM *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
If you access variables that are global to the server or
if you want to use malloc() and free()
you must surround the operations with
<a class="el" href="group__IniAndGlobal.html#ga1b0519bc72b1168bec8dd173e6ce1e47">pvlock()</a> and <a class="el" href="group__IniAndGlobal.html#ga4ed35d24f18f4a747092558ead32dda8">pvunlock()</a>
because these operations are not thread save.
</pre> 
</div>
</div>
<a class="anchor" id="ga156b9eba01c7aa7ceef9326ecc8ea8e6"></a><!-- doxytag: member="processviewserver.h::pvMain" ref="ga156b9eba01c7aa7ceef9326ecc8ea8e6" args="(PARAM *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvMain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
pvMain is your main worker thread. It could look as follows.
The main worker thread is never closed. It will be closed automatically when the client disconnects.</pre><pre>int <a class="el" href="group__IniAndGlobal.html#ga156b9eba01c7aa7ceef9326ecc8ea8e6">pvMain(PARAM *p)</a>
{
int ret;</pre><pre>here you can initialize your worker thread
  pvSetCleanup(p,your_exit_handler,your_app_data); // if cleanup is necessary
  pvResize(p,0,970,600);  // this will resize your working area
  ret = showMask1(p);
  while(1)
  {
    switch(ret)
    {
      case 1:
        ret = showMask1(p);
        break;
      case 2:
        ret = showMask2(p);
        break;
      case 3:
        ret = showMask3(p);
        break;
      default:
        return 0;
    }
  }
}
</pre> 
</div>
</div>
<a class="anchor" id="ga865869acdc8177c3f837f9b76afcfefb"></a><!-- doxytag: member="processviewserver.h::pvMainFatal" ref="ga865869acdc8177c3f837f9b76afcfefb" args="(PARAM *p, const char *text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvMainFatal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Output a fatal message and terminate the whole server.
</pre> 
</div>
</div>
<a class="anchor" id="ga5aef66d0169c0d1161d367b5fbf86cbd"></a><!-- doxytag: member="processviewserver.h::pvPollEvent" ref="ga5aef66d0169c0d1161d367b5fbf86cbd" args="(PARAM *p, char *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvPollEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>event</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
This function will return the next event as soon as it is available.
The maximum wait time is p-&gt;sleep in milliseconds (default 100).
You can specify a different wait time on the commandline (-sleep=1000)</pre><pre>Example:</pre><pre> int showMask1(PARAM *p)
 {
 DATA d;
 char event[MAX_EVENT_LENGTH];
 int  i;
 char text[MAX_EVENT_LENGTH];</pre><pre>   defineMask1(p);
   readData1(&amp;d); // from shared memory or out of database
   showData1(p,&amp;d);
   while(1)
   {
     pvPollEvent(p,event);
     switch(pvParseEvent(event, &amp;i, text))
     {
       case NULL_EVENT:
         readData1(&amp;d); // from shared memory or out of database
         showData1(p,&amp;d);
         break;
       case BUTTON_EVENT:
         ...
         break;
       case TEXT_EVENT:
         ...
         break;
       default:
         printf("UNKNOWN_EVENT id=\%d \%s\\n",i,text);
         break;
     }
   }
 }
</pre> 
</div>
</div>
<a class="anchor" id="ga52a4f82d807e04869b86a08119109a24"></a><!-- doxytag: member="processviewserver.h::pvScreenHint" ref="ga52a4f82d807e04869b86a08119109a24" args="(PARAM *p, int w, int h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvScreenHint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>h</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Output a screenHint for calculating the zoom factor
Optimal screen width=w height=h .
</pre> 
</div>
</div>
<a class="anchor" id="ga995fefba9cbdfeeaf660df83a355401c"></a><!-- doxytag: member="processviewserver.h::pvSetCleanup" ref="ga995fefba9cbdfeeaf660df83a355401c" args="(PARAM *p, int(*cleanup)(void *), void *app_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvSetCleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(void *)&nbsp;</td>
          <td class="paramname"> <em>cleanup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>app_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
If it is necessary to cleanup your application when the main worker thread terminates
you can set an exit handler that receives the data in app_data.
Call this function in pvMain. See also pvMain.
</pre> 
</div>
</div>
<a class="anchor" id="ga3e6f444c72839e3549dacff16472ca08"></a><!-- doxytag: member="processviewserver.h::pvSetMouseShape" ref="ga3e6f444c72839e3549dacff16472ca08" args="(PARAM *p, int shape)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvSetMouseShape </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>shape</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Set mouse shape
<a class="el" href="group__DefinesAndEnums.html#gad19ba4f288a5afb7970196ceee05e47e">MouseShape</a>.
</pre> 
</div>
</div>
<a class="anchor" id="ga4cf6c6a3745f02a74c7b4648d8511a12"></a><!-- doxytag: member="processviewserver.h::pvSetWhatsThis" ref="ga4cf6c6a3745f02a74c7b4648d8511a12" args="(PARAM *p, int id, const char *text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvSetWhatsThis </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Set whatsThis text
Allowed Widgets: all Widgets
</pre> 
</div>
</div>
<a class="anchor" id="gaf657e6c10b2559303f960304444a6a2f"></a><!-- doxytag: member="processviewserver.h::pvSetXY" ref="gaf657e6c10b2559303f960304444a6a2f" args="(PARAM *p, int i, float x, float y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvSetXY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>y</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Set x,y array for script language
</pre> 
</div>
</div>
<a class="anchor" id="ga4c03529a0cea2c57c644908fa38ddad2"></a><!-- doxytag: member="processviewserver.h::pvSleep" ref="ga4c03529a0cea2c57c644908fa38ddad2" args="(int milliseconds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvSleep </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>milliseconds</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Sleep for milliseconds.
</pre> 
</div>
</div>
<a class="anchor" id="gac61f8fa497b44e693020c265b21206bc"></a><!-- doxytag: member="processviewserver.h::pvsystem" ref="gac61f8fa497b44e693020c265b21206bc" args="(const char *command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvsystem </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>command</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Same as system(command); but portable
</pre> 
</div>
</div>
<a class="anchor" id="gaf805ad598042f8da6896135e27cd387b"></a><!-- doxytag: member="processviewserver.h::pvThreadFatal" ref="gaf805ad598042f8da6896135e27cd387b" args="(PARAM *p, const char *text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvThreadFatal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Output a fatal message and terminate the worker thread.
</pre> 
</div>
</div>
<a class="anchor" id="ga4ed35d24f18f4a747092558ead32dda8"></a><!-- doxytag: member="processviewserver.h::pvunlock" ref="ga4ed35d24f18f4a747092558ead32dda8" args="(PARAM *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvunlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
If you access variables that are global to the server or
if you want to use malloc() and free()
you must surround the operations with
<a class="el" href="group__IniAndGlobal.html#ga1b0519bc72b1168bec8dd173e6ce1e47">pvlock()</a> and <a class="el" href="group__IniAndGlobal.html#ga4ed35d24f18f4a747092558ead32dda8">pvunlock()</a>
because these operations are not thread save.
</pre> 
</div>
</div>
<a class="anchor" id="gae97cd460f11f1542c11ed9349b8c2b80"></a><!-- doxytag: member="processviewserver.h::pvWait" ref="gae97cd460f11f1542c11ed9349b8c2b80" args="(PARAM *p, const char *pattern)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvWait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>pattern</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
waits for an event.
</pre> 
</div>
</div>
<a class="anchor" id="ga91de12f5b44ae6b136c1eee8e6e014fd"></a><!-- doxytag: member="processviewserver.h::pvWarning" ref="ga91de12f5b44ae6b136c1eee8e6e014fd" args="(PARAM *p, const char *text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvWarning </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>text</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Output a warning message.
</pre> 
</div>
</div>
<a class="anchor" id="ga76b06d17d8bb20a1913bb0aa71339e06"></a><!-- doxytag: member="processviewserver.h::pvWhatsThisPrintf" ref="ga76b06d17d8bb20a1913bb0aa71339e06" args="(PARAM *p, int id, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvWhatsThisPrintf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
printf whatsThis text
Allowed Widgets: all Widgets
</pre> 
</div>
</div>
<a class="anchor" id="gaa94a429d64753c7c016bf9f2202def63"></a><!-- doxytag: member="processviewserver.h::pvXYAllocate" ref="gaa94a429d64753c7c016bf9f2202def63" args="(PARAM *p, int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pvXYAllocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__PARAM__.html">PARAM</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
Allocate x,y array for script language
</pre> 
</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sat Feb 5 13:49:54 2011 for ProcessViewBrowser-ServerProgramming by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
