<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>rllib: rlEIBnetIP Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">rllib
   &#160;<span id="projectnumber">1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">rlEIBnetIP Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="rlEIBnetIP" --><!-- doxytag: inherits="rlUdpSocket" -->
<p><code>#include &lt;<a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for rlEIBnetIP:</div>
<div class="dyncontent">
<div class="center"><img src="classrlEIBnetIP__inherit__graph.png" border="0" usemap="#rlEIBnetIP_inherit__map" alt="Inheritance graph"/></div>
<map name="rlEIBnetIP_inherit__map" id="rlEIBnetIP_inherit__map">
<area shape="rect" id="node2" href="classrlUdpSocket.html" title="rlUdpSocket" alt="" coords="5,5,99,32"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for rlEIBnetIP:</div>
<div class="dyncontent">
<div class="center"><img src="classrlEIBnetIP__coll__graph.png" border="0" usemap="#rlEIBnetIP_coll__map" alt="Collaboration graph"/></div>
<map name="rlEIBnetIP_coll__map" id="rlEIBnetIP_coll__map">
<area shape="rect" id="node2" href="classrlUdpSocket.html" title="rlUdpSocket" alt="" coords="686,108,781,135"/><area shape="rect" id="node4" href="classrlThread.html" title="rlThread" alt="" coords="699,185,768,212"/><area shape="rect" id="node6" href="structTHREAD__PARAM.html" title="THREAD_PARAM" alt="" coords="917,208,1051,235"/><area shape="rect" id="node9" href="structWSEMAPHORE.html" title="WSEMAPHORE" alt="" coords="334,151,455,177"/><area shape="rect" id="node11" href="structpthread__attr__t.html" title="pthread_attr_t" alt="" coords="343,201,446,228"/><area shape="rect" id="node13" href="struct____sched__param.html" title="__sched_param" alt="" coords="5,201,120,228"/><area shape="rect" id="node15" href="classrlIpAdr.html" title="rlIpAdr" alt="" coords="703,7,763,33"/><area shape="rect" id="node17" href="classrlDataAcquisitionProvider.html" title="rlDataAcquisitionProvider" alt="" coords="649,57,818,84"/><area shape="rect" id="node19" href="classrlSharedMemory.html" title="rlSharedMemory" alt="" coords="336,28,453,55"/><area shape="rect" id="node21" href="structrlDataAcquisitionProvider_1_1SHM__HEADER.html" title="rlDataAcquisitionProvider::SHM_HEADER" alt="" coords="259,79,530,105"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classrlEIBnetIP-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrlEIBnetIP_1_1EIB__TEL.html">EIB_TEL</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrlEIBnetIP_1_1PDU.html">PDU</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6">EIBnetIP</a> { <br/>
&#160;&#160;<a class="el" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6acd5a20b8726a408db3dfb5fc811d8dba">PORT</a> =  3671, 
<a class="el" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6aed678b33147a8e09f5df08307837db11">SUCCESS</a> =  0, 
<a class="el" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">EIBERROR</a> =  0x0ffffffff, 
<a class="el" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6a7019ca6a0c73be962270b236ebf5a8ba">TIMEOUT</a> =  -1, 
<br/>
&#160;&#160;<a class="el" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6aac9341149c71a959a56786ce1535f49c">COULD_NOT_CONNECT</a> =  -2
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a3ef986d39bcac3b584e1ad26d5708e45">rlEIBnetIP</a> (int num_signals=1000, int <a class="el" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>=0, <a class="el" href="classrlDataAcquisitionProvider.html">rlDataAcquisitionProvider</a> *<a class="el" href="classrlEIBnetIP.html#a4a7149e5b86bf2537f41daccc1c86387">provider</a>=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#adefa98e40d5ce178bc966176e5b16638">~rlEIBnetIP</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a9a962e669d5ae98dd91890be8dc8aed8">setServer</a> (<a class="el" href="classrlIpAdr.html">rlIpAdr</a> *<a class="el" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a587f79578fe17da547b53c4754f157d7">setClient</a> (<a class="el" href="classrlIpAdr.html">rlIpAdr</a> *<a class="el" href="classrlEIBnetIP.html#a4a42dfcda15fd1e611b024a286009672">client</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a66442c258fa7b4cbb28aad1ef0fa2975">startReading</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a34d1b3ec6bdc75d2ff1820d91d74a6e1">stopReading</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#aebb119219a1a25c9ad0e930542137786">value</a> (const char *name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#acc0869377bed2eeba4c2f1ff4f73bbd0">valueUnsigned</a> (const char *name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a3618fa743b3504990a7f53d5d0c5ae1a">valueFloat2</a> (const char *name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a4e15e45e9b3977853d9466a9a0031de6">valueFloat4</a> (const char *name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a887f256d1e3033eb113bb62fca08d90d">setValue</a> (const char *name, int val, int length=-1, int addi1=-1, int ctrl=-1, int apci=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a8ac8fe6b1de6e7f510209c7d4033c8ac">setValueUnsigned</a> (const char *name, unsigned int val, int length=-1, int addi1=-1, int ctrl=-1, int apci=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a86669f319ac9e8116b00ee7c78b06e6d">setValueFloat</a> (const char *name, float val, int length=-1, int addi1=-1, int ctrl=-1, int apci=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#aa60f9244f08ca861d59ca12f1fbf1c7f">setText</a> (const char *name, const char *text)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a3954bf5bb0dded688e1771402b138a17">getText</a> (const char *name, char *text, int maxlen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a8d84ffb57eb017f27ef2c1b4a27adfe5">setSourceAdr</a> (const char *adr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#aaa0d9fe5684e3a709cdef4262cf3d64e">dump</a> (FILE *fout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a000059512aafffe1c76eb2e86088b32b">setValuesFromCSV</a> (const char *filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a9e88f3f47ed27092ccea75182b3a1c0a">connect</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#abd21da0f50f1e13df7b33a25baddfd20">disconnect</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#aa0225356e234d5dbb52ee24790ec2e54">isConnected</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#ac486d287decdeec37981f706d9ab7a3c">getDescription</a> (<a class="el" href="structrlEIBnetIP_1_1PDU.html">PDU</a> *pdu)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a4c6ae6b1e81c5b590e2321c052752421">recv</a> (void *buf, int maxlen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a000d2c2b57bb4d3b0667d09d4861d1bf">storeBuffer</a> (unsigned char *buf, int len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a366bf9e4fbb12708e4aa58bfb78d25e4">sendDisconnectRequest</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#af5929c0fac5d7a20e8dcca6291ceccf1">watch_eib</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#aa5b8c795f43185d498f56acad27ad10a">memsize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a8ae718a134cdbb39ca65ce0afe66ddba">running</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classrlThread.html">rlThread</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classrlIpAdr.html">rlIpAdr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">send_sequencecounter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">tunnel_ack</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classrlDataAcquisitionProvider.html">rlDataAcquisitionProvider</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a4a7149e5b86bf2537f41daccc1c86387">provider</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a6eadd8f5f2daf8680e75b986290d42b3">printTelegram</a> (<a class="el" href="structrlEIBnetIP_1_1EIB__TEL.html">EIB_TEL</a> *tel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#ac7db059cc876c3274146630b113641a4">storeInProvider</a> (<a class="el" href="structrlEIBnetIP_1_1EIB__TEL.html">EIB_TEL</a> *tel)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classrlIpAdr.html">rlIpAdr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a4a42dfcda15fd1e611b024a286009672">client</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classrlIpAdr.html">rlIpAdr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a73f9d778758e41e61d0951d5fa7d0e2b">from</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlEIBnetIP.html#a1ba03e5e8658851e2fb9dfbc036c492d">saddr</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><pre>
class for EIBnet/IP access
</pre> 
<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00032">32</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a4e31fc57027bed89bd3f7f6cce9a4fc6"></a><!-- doxytag: member="rlEIBnetIP::EIBnetIP" ref="a4e31fc57027bed89bd3f7f6cce9a4fc6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6">rlEIBnetIP::EIBnetIP</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a4e31fc57027bed89bd3f7f6cce9a4fc6acd5a20b8726a408db3dfb5fc811d8dba"></a><!-- doxytag: member="PORT" ref="a4e31fc57027bed89bd3f7f6cce9a4fc6acd5a20b8726a408db3dfb5fc811d8dba" args="" -->PORT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a4e31fc57027bed89bd3f7f6cce9a4fc6aed678b33147a8e09f5df08307837db11"></a><!-- doxytag: member="SUCCESS" ref="a4e31fc57027bed89bd3f7f6cce9a4fc6aed678b33147a8e09f5df08307837db11" args="" -->SUCCESS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64"></a><!-- doxytag: member="EIBERROR" ref="a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64" args="" -->EIBERROR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a4e31fc57027bed89bd3f7f6cce9a4fc6a7019ca6a0c73be962270b236ebf5a8ba"></a><!-- doxytag: member="TIMEOUT" ref="a4e31fc57027bed89bd3f7f6cce9a4fc6a7019ca6a0c73be962270b236ebf5a8ba" args="" -->TIMEOUT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a4e31fc57027bed89bd3f7f6cce9a4fc6aac9341149c71a959a56786ce1535f49c"></a><!-- doxytag: member="COULD_NOT_CONNECT" ref="a4e31fc57027bed89bd3f7f6cce9a4fc6aac9341149c71a959a56786ce1535f49c" args="" -->COULD_NOT_CONNECT</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00036">36</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>
<div class="fragment"><pre class="fragment">  {
    <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6acd5a20b8726a408db3dfb5fc811d8dba">PORT</a>              = 3671,
    <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6aed678b33147a8e09f5df08307837db11">SUCCESS</a>           = 0,
    <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">EIBERROR</a>          = 0x0ffffffff,
    <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6a7019ca6a0c73be962270b236ebf5a8ba">TIMEOUT</a>           = -1,
    <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6aac9341149c71a959a56786ce1535f49c">COULD_NOT_CONNECT</a> = -2
  };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3ef986d39bcac3b584e1ad26d5708e45"></a><!-- doxytag: member="rlEIBnetIP::rlEIBnetIP" ref="a3ef986d39bcac3b584e1ad26d5708e45" args="(int num_signals=1000, int debug=0, rlDataAcquisitionProvider *provider=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlEIBnetIP::rlEIBnetIP </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_signals</em> = <code>1000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>debug</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlDataAcquisitionProvider.html">rlDataAcquisitionProvider</a> *&#160;</td>
          <td class="paramname"><em>provider</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00164">164</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                        : <a class="code" href="classrlUdpSocket.html#a7d3e7c9282f12a97b318d213a57939a2">rlUdpSocket</a>(_debug)
{
  <a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a> = _debug;
  provider = _provider;
  <a class="code" href="classrlEIBnetIP.html#af5929c0fac5d7a20e8dcca6291ceccf1">watch_eib</a> = 0;
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP() constructor\n&quot;</span>);
  <span class="keywordtype">char</span> *cptr;
  <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a> = NULL;
  <a class="code" href="classrlEIBnetIP.html#aa5b8c795f43185d498f56acad27ad10a">memsize</a> = 0;
  <a class="code" href="classrlEIBnetIP.html#a8ae718a134cdbb39ca65ce0afe66ddba">running</a> = 0;
  <a class="code" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a> = 0;
  <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> = 0;
  <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a> = -1;
  <a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a> = NULL;
  <a class="code" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">send_sequencecounter</a> = 0;
  <span class="comment">//rlUdpSocket::setSockopt(SO_BROADCAST);</span>
  <a class="code" href="classrlUdpSocket.html#a56aabc572183ad00a54b5e3233555052">rlUdpSocket::bind</a>(<a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6acd5a20b8726a408db3dfb5fc811d8dba">rlEIBnetIP::PORT</a>);
  <span class="keywordflow">if</span>(num_signals &lt;= 0) <span class="keywordflow">return</span>;
  <a class="code" href="classrlEIBnetIP.html#aa5b8c795f43185d498f56acad27ad10a">memsize</a> = <span class="keyword">sizeof</span>(EIB_TEL)*num_signals;
  <a class="code" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a> = num_signals;
  cptr = <span class="keyword">new</span> <span class="keywordtype">char</span>[<a class="code" href="classrlEIBnetIP.html#aa5b8c795f43185d498f56acad27ad10a">memsize</a>];
  memset(cptr,0,<a class="code" href="classrlEIBnetIP.html#aa5b8c795f43185d498f56acad27ad10a">memsize</a>);
  <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a> = cptr;
  <a class="code" href="classrlEIBnetIP.html#a8d84ffb57eb017f27ef2c1b4a27adfe5">setSourceAdr</a>(<span class="stringliteral">&quot;/0/0/001&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adefa98e40d5ce178bc966176e5b16638"></a><!-- doxytag: member="rlEIBnetIP::~rlEIBnetIP" ref="adefa98e40d5ce178bc966176e5b16638" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlEIBnetIP::~rlEIBnetIP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00190">190</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#a8ae718a134cdbb39ca65ce0afe66ddba">running</a>) <a class="code" href="classrlEIBnetIP.html#a34d1b3ec6bdc75d2ff1820d91d74a6e1">stopReading</a>();
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a> != NULL)
  {
    <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a>;
    <span class="keyword">delete</span> [] cptr;
  }
  <a class="code" href="classrlEIBnetIP.html#a366bf9e4fbb12708e4aa58bfb78d25e4">sendDisconnectRequest</a>();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9e88f3f47ed27092ccea75182b3a1c0a"></a><!-- doxytag: member="rlEIBnetIP::connect" ref="a9e88f3f47ed27092ccea75182b3a1c0a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::connect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00473">473</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a> == NULL) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP()::connect()\n&quot;</span>);
  PDU pdu,response;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cricrd[<a class="code" href="rleibnetip_8cpp.html#a05ded4864d98bfeea191e49e048f39a8">EIB_CRICRDSIZE</a>];
  <span class="keywordtype">int</span> ret = 0;

  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> == 1)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::connect() already connected\n&quot;</span>);
    <span class="keywordflow">return</span> 1;
  }

  <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a> = -1;
  memset(&amp;response,0,<span class="keyword">sizeof</span>(response));
  pdu.headersize  = <a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>;
  pdu.version     = <a class="code" href="rleibnetip_8cpp.html#a3c54cd8bec91059a581c9815c6de846b">EIB_VERSION</a>;
  pdu.servicetype = htons(<a class="code" href="rleibnetip_8cpp.html#a258ffd3a2330563bc310b4dd520832caa86da7e42d9e5e50dff8b6fe5663d7b9b">CONNECT_REQUEST</a>);
  pdu.totalsize   = htons(<a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>+<a class="code" href="rleibnetip_8cpp.html#aedffab6bcd5c3ad2e5cc0745c126a5bd">EIB_ADRSIZE</a>*2+<a class="code" href="rleibnetip_8cpp.html#a05ded4864d98bfeea191e49e048f39a8">EIB_CRICRDSIZE</a>);
  memcpy(&amp;pdu.data[0],&amp;<a class="code" href="classrlEIBnetIP.html#a4a42dfcda15fd1e611b024a286009672">client</a>.<a class="code" href="classrlIpAdr.html#a73c95244de3109f59499ed468e7f4a4f">address</a>,<a class="code" href="rleibnetip_8cpp.html#aedffab6bcd5c3ad2e5cc0745c126a5bd">EIB_ADRSIZE</a>);
  memcpy(&amp;pdu.data[8],&amp;<a class="code" href="classrlEIBnetIP.html#a4a42dfcda15fd1e611b024a286009672">client</a>.<a class="code" href="classrlIpAdr.html#a73c95244de3109f59499ed468e7f4a4f">address</a>,<a class="code" href="rleibnetip_8cpp.html#aedffab6bcd5c3ad2e5cc0745c126a5bd">EIB_ADRSIZE</a>);
  cricrd[0] = <a class="code" href="rleibnetip_8cpp.html#a05ded4864d98bfeea191e49e048f39a8">EIB_CRICRDSIZE</a>;    <span class="comment">// structlength</span>
  cricrd[1] = <a class="code" href="rleibnetip_8cpp.html#abde839063a5be98bb5358512b286f8cd">TUNNEL_CONNECTION</a>; <span class="comment">// connectiontypecode</span>
  cricrd[2] = <a class="code" href="rleibnetip_8cpp.html#a85cd84ca8b89ad0e477670e6f0e4d4ff">TUNNEL_LINKLAYER</a>;  <span class="comment">// data1</span>
  cricrd[3] = 0;                 <span class="comment">// data2</span>
  memcpy(&amp;pdu.data[8*2],cricrd,<a class="code" href="rleibnetip_8cpp.html#a05ded4864d98bfeea191e49e048f39a8">EIB_CRICRDSIZE</a>);
  <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> = 0;

  <a class="code" href="classrlUdpSocket.html#aea90e8b8afef698f7be7cacba733fde8">rlUdpSocket::sendto</a>(&amp;pdu, ntohs(pdu.totalsize), <a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a>);
  ret = <a class="code" href="classrlEIBnetIP.html#a4c6ae6b1e81c5b590e2321c052752421">recv</a>(&amp;response, <span class="keyword">sizeof</span>(PDU));

  <span class="keywordflow">if</span>(ntohs(response.servicetype) == <a class="code" href="rleibnetip_8cpp.html#a258ffd3a2330563bc310b4dd520832caaccde12c9d8e1855b05df75476c243858">CONNECT_RESPONSE</a>)
  {
    <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>)
    {
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;response.headersize  = 0x%x\n&quot;</span>,response.headersize);
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;response.version     = 0x%x\n&quot;</span>,response.version);
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;response.servicetype = 0x%x\n&quot;</span>,ntohs(response.servicetype));
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;response.totalsize   = 0x%x\n&quot;</span>,ntohs(response.totalsize));
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;response.channelid   = 0x%x\n&quot;</span>,response.data[0]);
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;response.status      = 0x%x\n&quot;</span>,response.data[1]);
    }
    <span class="keywordflow">if</span>(response.data[1] == <a class="code" href="rleibnetip_8cpp.html#aa1f0dfda864fa9d2630645f233e1fdb4">E_NO_ERROR</a>)
    {
      <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a> = response.data[0];
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;CONNECT_RESPONSE == success\n&quot;</span>);
      <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> = 1;
      <a class="code" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">send_sequencecounter</a> = 0;
      <span class="keywordflow">return</span> 1;
    }
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;response == CONNECT_RESPONSE status=0x%x failed\n&quot;</span>,response.data[1]);
    <span class="keywordflow">return</span> -1; <span class="comment">//</span>
  }
  <span class="keywordflow">else</span>
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;response != CONNECT_RESPONSE\n&quot;</span>);
    <span class="keywordflow">return</span> -1;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="abd21da0f50f1e13df7b33a25baddfd20"></a><!-- doxytag: member="rlEIBnetIP::disconnect" ref="abd21da0f50f1e13df7b33a25baddfd20" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::disconnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00534">534</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a> == NULL) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP()::disconnect()\n&quot;</span>);
  PDU pdu;

  pdu.headersize  = <a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>;
  pdu.version     = <a class="code" href="rleibnetip_8cpp.html#a3c54cd8bec91059a581c9815c6de846b">EIB_VERSION</a>;
  pdu.servicetype = htons(<a class="code" href="rleibnetip_8cpp.html#a258ffd3a2330563bc310b4dd520832caa9eb5d0ad065f4c5fef971f518e3e62ea">DISCONNECT_RESPONSE</a>);
  pdu.totalsize   = htons(<a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>+2+<a class="code" href="rleibnetip_8cpp.html#aedffab6bcd5c3ad2e5cc0745c126a5bd">EIB_ADRSIZE</a>);
  pdu.data[0]     = <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a>; <span class="comment">// channelid</span>
  pdu.data[1]     = 0;         <span class="comment">// reserved</span>
  memcpy(&amp;pdu.data[2],&amp;<a class="code" href="classrlEIBnetIP.html#a4a42dfcda15fd1e611b024a286009672">client</a>.<a class="code" href="classrlIpAdr.html#a73c95244de3109f59499ed468e7f4a4f">address</a>,<a class="code" href="rleibnetip_8cpp.html#aedffab6bcd5c3ad2e5cc0745c126a5bd">EIB_ADRSIZE</a>);
  <a class="code" href="classrlUdpSocket.html#aea90e8b8afef698f7be7cacba733fde8">rlUdpSocket::sendto</a>(&amp;pdu, ntohs(pdu.totalsize), <a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a>);
  <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> = 0;
  <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a> = -1;
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6aed678b33147a8e09f5df08307837db11">rlEIBnetIP::SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaa0d9fe5684e3a709cdef4262cf3d64e"></a><!-- doxytag: member="rlEIBnetIP::dump" ref="aaa0d9fe5684e3a709cdef4262cf3d64e" args="(FILE *fout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::dump </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00363">363</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(fout == NULL) <span class="keywordflow">return</span> -1;
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::dump()\n&quot;</span>);
  <span class="keywordtype">int</span> s1,s2,s3,d1,d2,d3,val,length;
  <span class="keywordtype">int</span> i = 0;
  EIB_TEL *tel;
  EIB_TEL *memptr = (EIB_TEL *) <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a>;

  val = 0;
  <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();
  <span class="keywordflow">while</span>(1)
  {
    tel = &amp;memptr[i];
    <span class="keywordflow">if</span>(tel-&gt;mc == 0)   <span class="keywordflow">break</span>;
    <span class="keywordflow">if</span>(i &gt;= <a class="code" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a>) <span class="keywordflow">break</span>;
    s1 = tel-&gt;saddr/(8*256);
    s2 = (tel-&gt;saddr/256) &amp; 0x0ff;
    s3 = tel-&gt;saddr &amp; 0x0ff;
    d1 = tel-&gt;daddr/(8*256);
    d2 = (tel-&gt;daddr/256) &amp; 0x0ff;
    d3 = tel-&gt;daddr &amp; 0x0ff;
    length = tel-&gt;apci_length;
    <span class="keywordflow">if</span>(length == 1)
    {
      val = tel-&gt;val[0];
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 2)
    {
      <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;tel-&gt;val[0];
      val = (((*cptr)*256)+tel-&gt;val[1]);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 3)
    {
      <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;tel-&gt;val[0];
      val = (((*cptr)*256)+tel-&gt;val[1])*tel-&gt;val[2];
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 4)
    {
      <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;tel-&gt;val[0];
      val = ((((*cptr)*256)+tel-&gt;val[1])*(tel-&gt;val[2]*256) * tel-&gt;val[3]);
    }
    fprintf(fout,<span class="stringliteral">&quot;/%d/%d/%d\t/%d/%d/%d\t0x%x\t%d\n&quot;</span>,s1,s2,s3,d1,d2,d3,val,length);
    i++;
  }
  <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();
  <span class="keywordflow">return</span> i;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac486d287decdeec37981f706d9ab7a3c"></a><!-- doxytag: member="rlEIBnetIP::getDescription" ref="ac486d287decdeec37981f706d9ab7a3c" args="(PDU *pdu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::getDescription </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrlEIBnetIP_1_1PDU.html">PDU</a> *&#160;</td>
          <td class="paramname"><em>pdu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l01106">1106</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a> == NULL) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP()::getDescription()\n&quot;</span>);
  PDU pdu;
  <span class="keywordtype">int</span> ret;

  pdu.headersize  = <a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>;
  pdu.version     = <a class="code" href="rleibnetip_8cpp.html#a3c54cd8bec91059a581c9815c6de846b">EIB_VERSION</a>;
  pdu.servicetype = htons(<a class="code" href="rleibnetip_8cpp.html#a258ffd3a2330563bc310b4dd520832caa51396a4afc26a7a97ea9262db533b7c4">DESCRIPTION_REQUEST</a>);
  pdu.totalsize   = htons(<a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>+<a class="code" href="rleibnetip_8cpp.html#aedffab6bcd5c3ad2e5cc0745c126a5bd">EIB_ADRSIZE</a>*2);
  memcpy(pdu.data,&amp;<a class="code" href="classrlEIBnetIP.html#a4a42dfcda15fd1e611b024a286009672">client</a>.<a class="code" href="classrlIpAdr.html#a73c95244de3109f59499ed468e7f4a4f">address</a>,<a class="code" href="rleibnetip_8cpp.html#aedffab6bcd5c3ad2e5cc0745c126a5bd">EIB_ADRSIZE</a>*2);

  <a class="code" href="classrlUdpSocket.html#aea90e8b8afef698f7be7cacba733fde8">rlUdpSocket::sendto</a>(&amp;pdu, ntohs(pdu.totalsize), <a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a>);
  <span class="keywordflow">while</span>(1)
  {
    ret = <a class="code" href="classrlUdpSocket.html#abd70dc730af98464e0b7d4f1ca3d44d8">rlUdpSocket::recvfrom</a>(buf, <span class="keyword">sizeof</span>(pdu), &amp;<a class="code" href="classrlEIBnetIP.html#a73f9d778758e41e61d0951d5fa7d0e2b">from</a>, 1000);
    <span class="keywordflow">if</span>(ret &lt; 0)
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP()::getDescription() timeout\n&quot;</span>);
      <span class="keywordflow">return</span> ret;
    }
    <span class="keywordflow">if</span>(ntohs(buf-&gt;servicetype) == <a class="code" href="rleibnetip_8cpp.html#a258ffd3a2330563bc310b4dd520832caa9ec6f4ae9f3207c20bfd6be8e18d59ee">DESCRIPTION_RESPONSE</a>)
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP()::getDescription() got description\n&quot;</span>);
      <span class="keywordflow">return</span> ret;
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3954bf5bb0dded688e1771402b138a17"></a><!-- doxytag: member="rlEIBnetIP::getText" ref="a3954bf5bb0dded688e1771402b138a17" args="(const char *name, char *text, int maxlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::getText </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00745">745</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(name == NULL || text == NULL || maxlen &lt;= 0) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> a1,a2,a3,length;
  <span class="keywordtype">int</span> j;
  <span class="keyword">const</span> <span class="keywordtype">char</span> *cptr;
  <span class="keywordtype">char</span> buf[16];
  EIB_TEL tel;
  EIB_TEL *memptr = (EIB_TEL *) <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a>;

  text[0] = <span class="charliteral">&#39;\0&#39;</span>;
  <span class="comment">// interpret name</span>
  memset(&amp;tel,0xff,<span class="keyword">sizeof</span>(EIB_TEL));
  cptr = strchr(name,<span class="charliteral">&#39;/&#39;</span>);
  <span class="keywordflow">if</span>(cptr == NULL)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;USER_ERROR: rlEIBnetIP::getText() wrong name=%s\n&quot;</span>, name);
    <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  }
  sscanf(cptr,<span class="stringliteral">&quot;/%d/%d/%d&quot;</span>,&amp;a1,&amp;a2,&amp;a3);
  tel.saddr = (short) <a class="code" href="classrlEIBnetIP.html#a1ba03e5e8658851e2fb9dfbc036c492d">saddr</a>;
  tel.daddr = ((a1*8)+a2)*256+a3;

  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a>; i++)
  {
    <span class="keywordflow">if</span>(memptr[i].mc == 0) <span class="keywordflow">break</span>;
    <span class="comment">//if(memptr[i].saddr == tel.saddr &amp;&amp; memptr[i].daddr == tel.daddr)</span>
    <span class="keywordflow">if</span>(memptr[i].daddr == tel.daddr)
    {
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();
      length = memptr[i].apci_length;
      <span class="keywordflow">for</span>(j=0; j&lt;14; j++) buf[j] = memptr[i].val[j];
      buf[14] = <span class="charliteral">&#39;\0&#39;</span>;
      j = 0;
      <span class="keywordflow">while</span>(j&lt;maxlen &amp;&amp; j&lt;14)
      {
        text[j] = buf[j];
        j++;
      }
      <span class="keywordflow">return</span> j;
    }
  }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa0225356e234d5dbb52ee24790ec2e54"></a><!-- doxytag: member="rlEIBnetIP::isConnected" ref="aa0225356e234d5dbb52ee24790ec2e54" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::isConnected </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00572">572</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6eadd8f5f2daf8680e75b986290d42b3"></a><!-- doxytag: member="rlEIBnetIP::printTelegram" ref="a6eadd8f5f2daf8680e75b986290d42b3" args="(EIB_TEL *tel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::printTelegram </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrlEIBnetIP_1_1EIB__TEL.html">EIB_TEL</a> *&#160;</td>
          <td class="paramname"><em>tel</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00287">287</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> s1,s2,s3,d1,d2,d3,val,length;

  s1 = tel-&gt;saddr/(8*256);
  s2 = (tel-&gt;saddr/256) &amp; 0x0ff;
  s3 = tel-&gt;saddr &amp; 0x0ff;
  d1 = tel-&gt;daddr/(8*256);
  d2 = (tel-&gt;daddr/256) &amp; 0x0ff;
  d3 = tel-&gt;daddr &amp; 0x0ff;
  length = tel-&gt;apci_length;
  val = 0;
  <span class="keywordflow">if</span>(length == 1)
  {
    val = tel-&gt;val[0];
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 2)
  {
    <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;tel-&gt;val[0];
    val = (((*cptr)*256)+tel-&gt;val[1]);
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 3)
  {
    <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;tel-&gt;val[0];
    val = (((*cptr)*256)+tel-&gt;val[1])*tel-&gt;val[2];
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 4)
  {
    <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;tel-&gt;val[0];
    val = ((((*cptr)*256)+tel-&gt;val[1])*(tel-&gt;val[2]*256) * tel-&gt;val[3]);
  }
  <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;src=/%d/%d/%03d\tdest=/%d/%d/%03d\tval=0x%x\tlen=%d\n&quot;</span>,s1,s2,s3,d1,d2,d3,val,length);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4c6ae6b1e81c5b590e2321c052752421"></a><!-- doxytag: member="rlEIBnetIP::recv" ref="a4c6ae6b1e81c5b590e2321c052752421" args="(void *buf, int maxlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::recv </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l01095">1095</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ret;
  <span class="keywordflow">while</span>(1)
  {
    ret = <a class="code" href="classrlUdpSocket.html#abd70dc730af98464e0b7d4f1ca3d44d8">rlUdpSocket::recvfrom</a>(buf, maxlen, &amp;<a class="code" href="classrlEIBnetIP.html#a73f9d778758e41e61d0951d5fa7d0e2b">from</a>, 1000);
    <span class="keywordflow">if</span>(ret &lt; 0)         <span class="keywordflow">return</span> ret;
    <span class="keywordflow">if</span>(*<a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a> == <a class="code" href="classrlEIBnetIP.html#a73f9d778758e41e61d0951d5fa7d0e2b">from</a>) <span class="keywordflow">return</span> ret;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a366bf9e4fbb12708e4aa58bfb78d25e4"></a><!-- doxytag: member="rlEIBnetIP::sendDisconnectRequest" ref="a366bf9e4fbb12708e4aa58bfb78d25e4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::sendDisconnectRequest </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00553">553</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP()::sendDisconnectRequest()\n&quot;</span>);
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> == 0) <span class="keywordflow">return</span> -1;
  PDU pdu;

  pdu.headersize  = <a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>;
  pdu.version     = <a class="code" href="rleibnetip_8cpp.html#a3c54cd8bec91059a581c9815c6de846b">EIB_VERSION</a>;
  pdu.servicetype = htons(<a class="code" href="rleibnetip_8cpp.html#a258ffd3a2330563bc310b4dd520832caa6d440588759a4bb07ceb5d91a7eb3db1">DISCONNECT_REQUEST</a>);
  pdu.totalsize   = htons(<a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>+2+<a class="code" href="rleibnetip_8cpp.html#aedffab6bcd5c3ad2e5cc0745c126a5bd">EIB_ADRSIZE</a>);
  pdu.data[0]     = <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a>; <span class="comment">// channelid</span>
  pdu.data[1]     = 0;         <span class="comment">// reserved</span>
  memcpy(&amp;pdu.data[2],&amp;<a class="code" href="classrlEIBnetIP.html#a4a42dfcda15fd1e611b024a286009672">client</a>.<a class="code" href="classrlIpAdr.html#a73c95244de3109f59499ed468e7f4a4f">address</a>,<a class="code" href="rleibnetip_8cpp.html#aedffab6bcd5c3ad2e5cc0745c126a5bd">EIB_ADRSIZE</a>);
  <a class="code" href="classrlUdpSocket.html#aea90e8b8afef698f7be7cacba733fde8">rlUdpSocket::sendto</a>(&amp;pdu, ntohs(pdu.totalsize), <a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a>);
  <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> = 0;
  <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a> = -1;
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6aed678b33147a8e09f5df08307837db11">rlEIBnetIP::SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a587f79578fe17da547b53c4754f157d7"></a><!-- doxytag: member="rlEIBnetIP::setClient" ref="a587f79578fe17da547b53c4754f157d7" args="(rlIpAdr *client)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::setClient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrlIpAdr.html">rlIpAdr</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l01078">1078</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">// eib murx</span>
  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> murx1[8], murx2[8];
  memcpy(murx1,&amp;_client-&gt;address,<span class="keyword">sizeof</span>(murx1));
  murx2[0] = murx1[0]; <span class="comment">// sin_len</span>
  murx2[1] = murx1[1]; <span class="comment">// sin_family</span>
  murx2[6] = murx1[2]; <span class="comment">// sin_port</span>
  murx2[7] = murx1[3]; <span class="comment">// sin_port</span>
  murx2[2] = murx1[4]; <span class="comment">// sin_addr</span>
  murx2[3] = murx1[5]; <span class="comment">// sin_addr</span>
  murx2[4] = murx1[6]; <span class="comment">// sin_addr</span>
  murx2[5] = murx1[7]; <span class="comment">// sin_addr</span>
  memcpy(&amp;client.<a class="code" href="classrlIpAdr.html#a73c95244de3109f59499ed468e7f4a4f">address</a>,murx2,<span class="keyword">sizeof</span>(murx2));
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9a962e669d5ae98dd91890be8dc8aed8"></a><!-- doxytag: member="rlEIBnetIP::setServer" ref="a9a962e669d5ae98dd91890be8dc8aed8" args="(rlIpAdr *server)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::setServer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrlIpAdr.html">rlIpAdr</a> *&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l01057">1057</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(_server == NULL) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  server = _server;
  PDU pdu;
  <span class="keywordtype">int</span> ret;

  ret = <a class="code" href="classrlEIBnetIP.html#ac486d287decdeec37981f706d9ab7a3c">rlEIBnetIP::getDescription</a>(&amp;pdu);
  <span class="keywordflow">if</span>(ret &gt; 0)
  {
    <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setServer() found server\n&quot;</span>);
    memcpy(&amp;server-&gt;<a class="code" href="classrlIpAdr.html#a73c95244de3109f59499ed468e7f4a4f">address</a>,&amp;<a class="code" href="classrlEIBnetIP.html#a73f9d778758e41e61d0951d5fa7d0e2b">from</a>.<a class="code" href="classrlIpAdr.html#a73c95244de3109f59499ed468e7f4a4f">address</a>,<span class="keyword">sizeof</span>(server-&gt;<a class="code" href="classrlIpAdr.html#a73c95244de3109f59499ed468e7f4a4f">address</a>));
    <span class="keywordflow">return</span> 0;
  }
  <span class="keywordflow">else</span>
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setServer() could not find server\n&quot;</span>);
    <span class="keywordflow">return</span> -1;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8d84ffb57eb017f27ef2c1b4a27adfe5"></a><!-- doxytag: member="rlEIBnetIP::setSourceAdr" ref="a8d84ffb57eb017f27ef2c1b4a27adfe5" args="(const char *adr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::setSourceAdr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>adr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00595">595</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">char</span> *cptr;
  <span class="keywordtype">int</span> a1,a2,a3;

  <span class="comment">// interpret name</span>
  cptr = strchr(adr,<span class="charliteral">&#39;/&#39;</span>);
  <span class="keywordflow">if</span>(cptr == NULL)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;USER_ERROR: rlEIBnetIP::setSourceAdr() wrong adr=%s\n&quot;</span>, adr);
    <span class="keywordflow">return</span> -1;
  }
  sscanf(cptr,<span class="stringliteral">&quot;/%d/%d/%d&quot;</span>,&amp;a1,&amp;a2,&amp;a3);
  <a class="code" href="classrlEIBnetIP.html#a1ba03e5e8658851e2fb9dfbc036c492d">saddr</a> = ((a1*8)+a2)*256+a3;
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa60f9244f08ca861d59ca12f1fbf1c7f"></a><!-- doxytag: member="rlEIBnetIP::setText" ref="aa60f9244f08ca861d59ca12f1fbf1c7f" args="(const char *name, const char *text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::setText </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00790">790</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(name == NULL || text == NULL) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>; 
  <span class="keywordtype">char</span> buf[16];
  <span class="keywordtype">int</span> length = strlen(text);
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> a1,a2,a3,daddr;
  <span class="keywordtype">int</span> i,retry;
  <span class="keyword">const</span> <span class="keywordtype">char</span> *cptr;
  PDU pdu;
  EIB_TEL tel;
  EIB_TEL *memptr = (EIB_TEL *) <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a>;

  <span class="keywordflow">if</span>(length &gt; 14) length = 14;
  memset(buf,0,<span class="keyword">sizeof</span>(buf));
  <span class="keywordflow">for</span>(i=0; i&lt;length; i++) buf[i] = text[i];

  <span class="comment">// interpret name</span>
  cptr = strchr(name,<span class="charliteral">&#39;/&#39;</span>);
  <span class="keywordflow">if</span>(cptr == NULL)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;USER_ERROR: rlEIBnetIP::setText() wrong name=%s text=%s\n&quot;</span>, name, text);
    <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  }
  sscanf(cptr,<span class="stringliteral">&quot;/%d/%d/%d&quot;</span>,&amp;a1,&amp;a2,&amp;a3);
  daddr = ((a1*8)+a2)*256+a3;

  <span class="comment">// fill EIBnet/IP PDU</span>
  pdu.headersize   = <a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>;
  pdu.version      = <a class="code" href="rleibnetip_8cpp.html#a3c54cd8bec91059a581c9815c6de846b">EIB_VERSION</a>;
  pdu.servicetype  = htons(<a class="code" href="rleibnetip_8cpp.html#a258ffd3a2330563bc310b4dd520832caa94504f3d3696de6b3d92095ade68d19e">TUNNELLING_REQUEST</a>);
  pdu.totalsize    = htons(<a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>+4+10+length);
  pdu.data[0]      = 4;                    <span class="comment">// structlength</span>
  pdu.data[1]      = <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a>;            <span class="comment">// channelid</span>
  pdu.data[2]      = <a class="code" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">send_sequencecounter</a>; <span class="comment">// sequencecounter</span>
  pdu.data[3]      = <a class="code" href="rleibnetip_8cpp.html#aa1f0dfda864fa9d2630645f233e1fdb4">E_NO_ERROR</a>;           <span class="comment">// typespecific</span>
  tel.mc           = <a class="code" href="rleibnetip_8cpp.html#a63317ab61716127e0f7d809fbee44ebb">L_Data_Req</a>; <span class="comment">// L_Data_Req=0x11, L_Data_Con=0x2E L_Data_Ind=0x29</span>
  tel.addi1        = 0x0;
  tel.ctrl1        = 0xbc;
  tel.ctrl2        = 0xe0;
  tel.saddr        = (<span class="keywordtype">unsigned</span> short) htons((<span class="keywordtype">short</span>) <a class="code" href="classrlEIBnetIP.html#a1ba03e5e8658851e2fb9dfbc036c492d">saddr</a>);   <span class="comment">//0x1);</span>
  tel.daddr        = (<span class="keywordtype">unsigned</span> short) htons((<span class="keywordtype">short</span>) daddr);   <span class="comment">//(0x100)</span>
  tel.apci_length  = 0x1;
  tel.apci         = 0x0;
  <span class="keywordflow">for</span>(i=0; i&lt;14; i++) tel.val[i] = buf[i];
  memcpy(&amp;pdu.data[4],&amp;tel,<span class="keyword">sizeof</span>(EIB_TEL));

  <a class="code" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">tunnel_ack</a> = retry = 0;
  <span class="keywordflow">while</span>(1)
  {
    <span class="comment">// send value over EIBnet/IP</span>
    <a class="code" href="classrlUdpSocket.html#aea90e8b8afef698f7be7cacba733fde8">rlUdpSocket::sendto</a>(&amp;pdu, ntohs(pdu.totalsize), <a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a>);
    <a class="code" href="rlwthread_8cpp.html#a604b0dba29427e3514cd37136458e0c5">rlsleep</a>(10);
    <span class="keywordflow">if</span>     (<a class="code" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">tunnel_ack</a> == 1) <span class="comment">// OK</span>
    {
      <a class="code" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">send_sequencecounter</a> = (<a class="code" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">send_sequencecounter</a>+1) &amp; 0x0ff;
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setText(%s) ACK\n&quot;</span>,text);
      <span class="keywordflow">break</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">tunnel_ack</a> == -1) <span class="comment">// failure</span>
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setText(%s) NACK\n&quot;</span>,text);
      retry++;
    }
    <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setText(%s) timeout\n&quot;</span>,text);
      retry++;
    }
    <span class="keywordflow">if</span>(retry &gt;= 2)
    {
      <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> = 0 ;
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setText() connection lost\n&quot;</span>);
      <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
    }
  }
  <a class="code" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">tunnel_ack</a> = 0;

  tel.saddr = ntohs(tel.saddr); <span class="comment">// convert network -&gt; host byte order</span>
  tel.daddr = ntohs(tel.daddr);
  <span class="comment">// remember value within mem</span>
  <span class="keywordflow">for</span>(i=0; i&lt; <a class="code" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a>; i++)
  {
    <span class="keywordflow">if</span>(memptr[i].mc == 0)
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setText() insert new value\n&quot;</span>);
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();
      memcpy(&amp;memptr[i],&amp;tel,<span class="keyword">sizeof</span>(tel));
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();
      <span class="keywordflow">return</span> length;
    }
    <span class="comment">//else if(memptr[i].saddr == tel.saddr &amp;&amp; memptr[i].daddr == tel.daddr)</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(memptr[i].daddr == tel.daddr)
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setText() update existing value\n&quot;</span>);
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();
      memcpy(&amp;memptr[i],&amp;tel,<span class="keyword">sizeof</span>(tel));
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();
      <span class="keywordflow">return</span> length;
    }
  }
  <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;ERROR rlEIBnetIP::setText() not enough signals specified max=%d\n&quot;</span>,maxvalues);
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a887f256d1e3033eb113bb62fca08d90d"></a><!-- doxytag: member="rlEIBnetIP::setValue" ref="a887f256d1e3033eb113bb62fca08d90d" args="(const char *name, int val, int length=&#45;1, int addi1=&#45;1, int ctrl=&#45;1, int apci=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::setValue </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>addi1</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ctrl</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>apci</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00612">612</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uval;
  memcpy(&amp;uval,&amp;val,<span class="keyword">sizeof</span>(uval));
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a8ac8fe6b1de6e7f510209c7d4033c8ac">setValueUnsigned</a>(name, uval, length, addi1, ctrl, apci);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a86669f319ac9e8116b00ee7c78b06e6d"></a><!-- doxytag: member="rlEIBnetIP::setValueFloat" ref="a86669f319ac9e8116b00ee7c78b06e6d" args="(const char *name, float val, int length=&#45;1, int addi1=&#45;1, int ctrl=&#45;1, int apci=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::setValueFloat </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>addi1</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ctrl</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>apci</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00628">628</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uval,<a class="code" href="classrlUdpSocket.html#a19e7817ca9eacaef8b686496bfe9a36c">s</a>,e,m;
  <span class="keywordtype">float</span> fval,eval;
  <span class="keywordflow">if</span>(length == -1 || length == 2)
  {
    length = 2;
    <span class="keywordflow">if</span>(val &lt; 0.0f) s = 0x80000000;
    <span class="keywordflow">else</span>           s = 0;
    m = (<span class="keywordtype">unsigned</span> int) (val*100.0f);
    m = m/100;
    <span class="comment">// m*2^e = fabsf(val)</span>
    <span class="comment">// 2^e = fabsf(val)/m;</span>
    <span class="comment">//   e = ln(fabsf(val)/m)</span>
    <span class="keywordflow">if</span>(m == 0) e = 0;
    <span class="keywordflow">else</span>
    {
      fval = fabsf(val)/(float) m;
      eval = logf(fval);
      e = ((<span class="keywordtype">unsigned</span> int) eval) * 8* 256;
    }
    uval = s | e | m;
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 4)
  {
    memcpy(&amp;uval,&amp;val,<span class="keyword">sizeof</span>(uval));
  }
  <span class="keywordflow">else</span>
  {
    <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  }
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a8ac8fe6b1de6e7f510209c7d4033c8ac">setValueUnsigned</a>(name, uval, length, addi1, ctrl, apci);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a000059512aafffe1c76eb2e86088b32b"></a><!-- doxytag: member="rlEIBnetIP::setValuesFromCSV" ref="a000059512aafffe1c76eb2e86088b32b" args="(const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::setValuesFromCSV </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00412">412</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  FILE *fin;
  <span class="keywordtype">char</span> line[1024], *cptr;
  <span class="keywordtype">int</span>  s1,s2,s3,d1,d2,d3,i,val,len;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uval;

  <span class="keywordflow">if</span>(filename == NULL) <span class="keywordflow">return</span> -1;
  fin = fopen(filename,<span class="stringliteral">&quot;r&quot;</span>);
  <span class="keywordflow">if</span>(fin == NULL)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValuesFromCSV(%s) could not open file\n&quot;</span>,filename);
    <span class="keywordflow">return</span> -1;
  }

  <span class="keywordflow">while</span>(fgets(line,<span class="keyword">sizeof</span>(line)-1,fin) != NULL)
  {
    d1 = d2 = d3 = 0;
    cptr = strchr(line,<span class="charliteral">&#39;/&#39;</span>);
    <span class="keywordflow">if</span>(cptr == NULL) <span class="keywordflow">break</span>;
    sscanf(cptr,<span class="stringliteral">&quot;/%d/%d/%d&quot;</span>,&amp;s1,&amp;s2,&amp;s3);
    i = 0;
    <span class="keywordflow">while</span>(line[i] != <span class="charliteral">&#39;\0&#39;</span>)
    {
      <span class="keywordflow">if</span>(line[i] == <span class="charliteral">&#39; &#39;</span> || line[i] == <span class="charliteral">&#39;\t&#39;</span>)
      {
        <span class="keywordflow">while</span>(line[i] == <span class="charliteral">&#39; &#39;</span> || line[i] == <span class="charliteral">&#39;\t&#39;</span>) i++;
        <span class="keywordflow">if</span>(line[i] == <span class="charliteral">&#39;/&#39;</span>)
        {
          cptr = strstr(&amp;line[i],<span class="stringliteral">&quot;0x&quot;</span>);
          <span class="keywordflow">if</span>(cptr == NULL)
          {
            sscanf(&amp;line[i],<span class="stringliteral">&quot;/%d/%d/%d %d %d&quot;</span>,&amp;d1,&amp;d2,&amp;d3,&amp;val,&amp;len);
          }
          <span class="keywordflow">else</span>
          {
            sscanf(&amp;line[i],<span class="stringliteral">&quot;/%d/%d/%d %x %d&quot;</span>,&amp;d1,&amp;d2,&amp;d3,&amp;val,&amp;len);
          }
        }
        <span class="keywordflow">break</span>;
      }
      i++;
    }
    <span class="keywordflow">if</span>(line[i] == <span class="charliteral">&#39;\0&#39;</span>) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
    cptr = strchr(line,<span class="charliteral">&#39;/&#39;</span>);
    <span class="keywordflow">if</span>(cptr != NULL)
    {
      sprintf(line,<span class="stringliteral">&quot;/%d/%d/%d&quot;</span>,d1,d2,d3);
      <span class="keywordflow">for</span>(i=0; i&lt;100; i++) <span class="comment">// try setting even if hardware responds very slowly</span>
      {
        memcpy(&amp;uval,&amp;val,<span class="keyword">sizeof</span>(uval));
        uval = <a class="code" href="classrlEIBnetIP.html#a8ac8fe6b1de6e7f510209c7d4033c8ac">setValueUnsigned</a>(line,uval,len);
        <span class="keywordflow">if</span>(uval != <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>) <span class="keywordflow">break</span>;
      }
    }
  }

  fclose(fin);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8ac8fe6b1de6e7f510209c7d4033c8ac"></a><!-- doxytag: member="rlEIBnetIP::setValueUnsigned" ref="a8ac8fe6b1de6e7f510209c7d4033c8ac" args="(const char *name, unsigned int val, int length=&#45;1, int addi1=&#45;1, int ctrl=&#45;1, int apci=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::setValueUnsigned </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>addi1</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ctrl</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>apci</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00894">894</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(name == NULL || <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a> == NULL || <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a> == -1) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i,a1,a2,a3,daddr;
  <span class="keywordtype">int</span> retry;
  <span class="keyword">const</span> <span class="keywordtype">char</span> *cptr;
  PDU pdu;
  EIB_TEL tel;
  EIB_TEL *memptr = (EIB_TEL *) <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a>;

  <span class="comment">// interpret name</span>
  cptr = strchr(name,<span class="charliteral">&#39;/&#39;</span>);
  <span class="keywordflow">if</span>(cptr == NULL)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;USER_ERROR: rlEIBnetIP::setValue() wrong name=%s val=%d\n&quot;</span>, name, val);
    <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  }
  sscanf(cptr,<span class="stringliteral">&quot;/%d/%d/%d&quot;</span>,&amp;a1,&amp;a2,&amp;a3);
  daddr = ((a1*8)+a2)*256+a3;

  <span class="comment">// fill EIBnet/IP PDU</span>
  pdu.headersize   = <a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>;
  pdu.version      = <a class="code" href="rleibnetip_8cpp.html#a3c54cd8bec91059a581c9815c6de846b">EIB_VERSION</a>;
  pdu.servicetype  = htons(<a class="code" href="rleibnetip_8cpp.html#a258ffd3a2330563bc310b4dd520832caa94504f3d3696de6b3d92095ade68d19e">TUNNELLING_REQUEST</a>);
  <span class="keywordflow">if</span>(length == -1)
    pdu.totalsize    = htons(<a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>+4+10+1);
  <span class="keywordflow">else</span>
    pdu.totalsize    = htons(<a class="code" href="rleibnetip_8cpp.html#a7c85b6e0a76a49acb0a0d35b315c4dec">EIB_HEADERSIZE</a>+4+10+length);
  pdu.data[0]      = 4;                    <span class="comment">// structlength</span>
  pdu.data[1]      = <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a>;            <span class="comment">// channelid</span>
  pdu.data[2]      = <a class="code" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">send_sequencecounter</a>; <span class="comment">// sequencecounter</span>
  pdu.data[3]      = <a class="code" href="rleibnetip_8cpp.html#aa1f0dfda864fa9d2630645f233e1fdb4">E_NO_ERROR</a>;           <span class="comment">// typespecific</span>
  tel.mc           = <a class="code" href="rleibnetip_8cpp.html#a63317ab61716127e0f7d809fbee44ebb">L_Data_Req</a>; <span class="comment">// L_Data_Req=0x11, L_Data_Con=0x2E L_Data_Ind=0x29</span>

  tel.addi1        = 0x0;
  tel.ctrl1        = 0xbc;
  tel.ctrl2        = 0xe0;
  tel.saddr        = (<span class="keywordtype">unsigned</span> short) htons((<span class="keywordtype">short</span>) <a class="code" href="classrlEIBnetIP.html#a1ba03e5e8658851e2fb9dfbc036c492d">saddr</a>);   <span class="comment">//0x1);</span>
  tel.daddr        = (<span class="keywordtype">unsigned</span> short) htons((<span class="keywordtype">short</span>) daddr);   <span class="comment">//(0x100)</span>
  tel.apci_length  = 0x1;
  tel.apci         = 0x0;

  <span class="keywordflow">if</span>(addi1  != -1) tel.addi1 = (<span class="keywordtype">unsigned</span> char) ((addi1 &amp; 0x0ff));
  <span class="keywordflow">if</span>(ctrl   != -1)
  {
    tel.ctrl1 = (<span class="keywordtype">unsigned</span> char) ((ctrl &amp; 0x0ff00)/256);
    tel.ctrl2 = (<span class="keywordtype">unsigned</span> char) ((ctrl &amp; 0x0ff));
  }
  <span class="keywordflow">if</span>(length != -1) tel.apci_length = (<span class="keywordtype">unsigned</span> char) length;
  <span class="keywordflow">if</span>(apci   != -1) tel.apci = (<span class="keywordtype">unsigned</span> char) apci;

  <span class="keywordflow">if</span>(length == -1 || length == 1)
  {
    tel.val[0]       = (<span class="keywordtype">unsigned</span> char) val; <span class="comment">// 0x80; // 0x81</span>
    tel.val[1]       = (<span class="keywordtype">unsigned</span> char) 0x0;
    tel.val[2]       = (<span class="keywordtype">unsigned</span> char) 0x0;
    tel.val[3]       = (<span class="keywordtype">unsigned</span> char) 0x0;
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 2)
  {
    tel.val[0]       = (<span class="keywordtype">unsigned</span> char) ((val &amp; 0x0ff00)/256);
    tel.val[1]       = (<span class="keywordtype">unsigned</span> char) (val &amp; 0x0ff);
    tel.val[2]       = (<span class="keywordtype">unsigned</span> char) 0x0;
    tel.val[3]       = (<span class="keywordtype">unsigned</span> char) 0x0;
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 3)
  {
    tel.val[0]       = (<span class="keywordtype">unsigned</span> char) ((val &amp; 0x0ff000000)/(256*256));
    tel.val[1]       = (<span class="keywordtype">unsigned</span> char)  (val &amp; 0x0ff0000)/256;
    tel.val[2]       = (<span class="keywordtype">unsigned</span> char)  (val &amp; 0x0ff00);
    tel.val[3]       = (<span class="keywordtype">unsigned</span> char)  (val &amp; 0x0ff);
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 4)
  {
    tel.val[0]       = (<span class="keywordtype">unsigned</span> char) ((val &amp; 0x0ff000000)/(256*256*256));
    tel.val[1]       = (<span class="keywordtype">unsigned</span> char) ((val &amp; 0x0ff0000)/(256*256));
    tel.val[2]       = (<span class="keywordtype">unsigned</span> char) ((val &amp; 0x0ff00)/(256));
    tel.val[3]       = (<span class="keywordtype">unsigned</span> char) (val &amp; 0x0ff);
  }
  <span class="keywordflow">else</span>
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue(0x%x) unknown length=%d\n&quot;</span>,val,length);
    <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  }
  memcpy(&amp;pdu.data[4],&amp;tel,<span class="keyword">sizeof</span>(EIB_TEL));

  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() mc          = 0x%x\n&quot;</span>, tel.mc);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() addi1       = 0x%x\n&quot;</span>, tel.addi1);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() ctrl1       = 0x%x\n&quot;</span>, tel.ctrl1);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() ctrl2       = 0x%x\n&quot;</span>, tel.ctrl2);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() saddr       = 0x%x\n&quot;</span>, ntohs(tel.saddr));
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() daddr       = 0x%x\n&quot;</span>, ntohs(tel.daddr));
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() apci_length = 0x%x\n&quot;</span>, tel.apci_length);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() apci        = 0x%x\n&quot;</span>, tel.apci);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() val[0]      = 0x%x\n&quot;</span>, tel.val[0]);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() val[1]      = 0x%x\n&quot;</span>, tel.val[1]);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() val[2]      = 0x%x\n&quot;</span>, tel.val[2]);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() val[3]      = 0x%x\n&quot;</span>, tel.val[3]);
  }

  <a class="code" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">tunnel_ack</a> = retry = 0;
  <span class="keywordflow">while</span>(1)
  {
    <span class="comment">// send value over EIBnet/IP</span>
    <a class="code" href="classrlUdpSocket.html#aea90e8b8afef698f7be7cacba733fde8">rlUdpSocket::sendto</a>(&amp;pdu, ntohs(pdu.totalsize), <a class="code" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">server</a>);
    <a class="code" href="rlwthread_8cpp.html#a604b0dba29427e3514cd37136458e0c5">rlsleep</a>(10);
    <span class="keywordflow">if</span>     (<a class="code" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">tunnel_ack</a> == 1) <span class="comment">// OK</span>
    {
      <a class="code" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">send_sequencecounter</a> = (<a class="code" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">send_sequencecounter</a>+1) &amp; 0x0ff;
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue(0x%x) ACK\n&quot;</span>,val);
      <span class="keywordflow">break</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">tunnel_ack</a> == -1) <span class="comment">// failure</span>
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue(0x%x) NACK\n&quot;</span>,val);
      retry++;
    }
    <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue(0x%x) timeout\n&quot;</span>,val);
      retry++;
    }
    <span class="keywordflow">if</span>(retry &gt;= 2)
    {
      <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> = 0 ;
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue() connection lost\n&quot;</span>);
      <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
    }
  }
  <a class="code" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">tunnel_ack</a> = 0;

  tel.saddr = ntohs(tel.saddr); <span class="comment">// convert network -&gt; host byte order</span>
  tel.daddr = ntohs(tel.daddr);

  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#a4a7149e5b86bf2537f41daccc1c86387">provider</a> != NULL) <span class="keywordflow">return</span> 0;

  <span class="comment">// remember value within mem</span>
  <span class="keywordflow">for</span>(i=0; i&lt; (<span class="keywordtype">unsigned</span> int) <a class="code" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a>; i++)
  {
    <span class="keywordflow">if</span>(memptr[i].mc == 0)
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue(0x%x) insert new value\n&quot;</span>,val);
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();
      memcpy(&amp;memptr[i],&amp;tel,<span class="keyword">sizeof</span>(tel));
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();
      <span class="keywordflow">return</span> 0;
    }
    <span class="comment">//else if(memptr[i].saddr == tel.saddr &amp;&amp; memptr[i].daddr == tel.daddr)</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(memptr[i].daddr == tel.daddr)
    {
      <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::setValue(0x%x) update existing value\n&quot;</span>,val);
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();
      memcpy(&amp;memptr[i],&amp;tel,<span class="keyword">sizeof</span>(tel));
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();
      <span class="keywordflow">return</span> 0;
    }
  }
  <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;ERROR rlEIBnetIP::setValue() not enough signals specified max=%d\n&quot;</span>,<a class="code" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a>);
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a66442c258fa7b4cbb28aad1ef0fa2975"></a><!-- doxytag: member="rlEIBnetIP::startReading" ref="a66442c258fa7b4cbb28aad1ef0fa2975" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::startReading </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00577">577</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classrlEIBnetIP.html#a8ae718a134cdbb39ca65ce0afe66ddba">running</a> = 1;
  <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> = 0;
  <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a> = -1;
  <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a2e26bec1d1bc3bc35a3c8a1c9930f2fb">create</a>(<a class="code" href="rleibnetip_8cpp.html#a0b56bc7b567bbb2141bb53b1ea0834f6">eib_reader</a>,<span class="keyword">this</span>);
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6aed678b33147a8e09f5df08307837db11">rlEIBnetIP::SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a34d1b3ec6bdc75d2ff1820d91d74a6e1"></a><!-- doxytag: member="rlEIBnetIP::stopReading" ref="a34d1b3ec6bdc75d2ff1820d91d74a6e1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::stopReading </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00586">586</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classrlEIBnetIP.html#a8ae718a134cdbb39ca65ce0afe66ddba">running</a> = 0;
  <a class="code" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">is_connected</a> = 0;
  <a class="code" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">channelid</a> = -1;
  <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a942c994869562d19a57919afa7d5d80a">cancel</a>();
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6aed678b33147a8e09f5df08307837db11">rlEIBnetIP::SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a000d2c2b57bb4d3b0667d09d4861d1bf"></a><!-- doxytag: member="rlEIBnetIP::storeBuffer" ref="a000d2c2b57bb4d3b0667d09d4861d1bf" args="(unsigned char *buf, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::storeBuffer </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00201">201</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  EIB_TEL tel;
  <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *sptr;
  <span class="keywordtype">int</span> i;

  <span class="keywordflow">if</span>(len &lt;= 0 || <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a> == NULL) <span class="keywordflow">return</span> -1;
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::storeBuffer() buf=[0x%x&quot;</span>,buf[0]);
    <span class="keywordflow">for</span>(i=1; i&lt;len; i++) ::<a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">printf</a>(<span class="stringliteral">&quot;,0x%x&quot;</span>,buf[i]);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;]\n&quot;</span>);
  }

  tel.mc = buf[0];
  tel.addi1       = buf[1];
  tel.ctrl1       = buf[2];
  tel.ctrl2       = buf[3];
  sptr            = (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *) &amp;buf[4];
  tel.saddr       = ntohs(*sptr);
  sptr            = (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *) &amp;buf[6];
  tel.daddr       = ntohs(*sptr);
  tel.apci_length = buf[8];
  tel.apci        = buf[9];
  tel.val[0] = buf[10];
  tel.val[1] = buf[10+1];
  tel.val[2] = buf[10+2];
  tel.val[3] = buf[10+3];
  <span class="keywordflow">for</span>(i=0; i&lt;(len-10); i++) tel.val[i] = buf[10+i];
  switch (tel.mc)
  {
    <span class="keywordflow">case</span> <a class="code" href="rleibnetip_8cpp.html#a63317ab61716127e0f7d809fbee44ebb">L_Data_Req</a>: <span class="comment">//0x11:</span>
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::storeBuffer() messagecode=0x%x L_Data_Req\n&quot;</span>,tel.mc);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="rleibnetip_8cpp.html#adb5166bf0bd4c87baf4cc7b054edffbb">L_Data_Ind</a>: <span class="comment">//0x29:</span>
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="rleibnetip_8cpp.html#a3495260b5552168f26e82751c8904e8b">L_Data_Con</a>: <span class="comment">//0x2E:</span>
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::storeBuffer() unknown messagecode=0x%x L_Data_Con\n&quot;</span>,tel.mc);
      <span class="keywordflow">return</span> -1;
  }
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;\nmc=0x%x addi1=0x%x ctrl1=0x%x ctrl2=0x%x saddr=0x%x daddr=0x%x acpi_length=0x%x apci=0x%x&quot;</span>,
    tel.mc,
    tel.addi1,
    tel.ctrl1,
    tel.ctrl2,
    tel.saddr,
    tel.daddr,
    tel.apci_length,
    tel.apci);
    <span class="keywordflow">for</span>(i=10; i&lt;len; i++) ::<a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">printf</a>(<span class="stringliteral">&quot; val[%d]=0x%x&quot;</span>,i-10,tel.val[i-10]);
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;\n&quot;</span>);
  }

  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#af5929c0fac5d7a20e8dcca6291ceccf1">watch_eib</a>) <a class="code" href="classrlEIBnetIP.html#a6eadd8f5f2daf8680e75b986290d42b3">printTelegram</a>(&amp;tel);
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#a4a7149e5b86bf2537f41daccc1c86387">provider</a> != NULL) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#ac7db059cc876c3274146630b113641a4">storeInProvider</a>(&amp;tel);

  <span class="comment">// store EIB_TEL in *mem</span>
  EIB_TEL *memptr = (EIB_TEL *) <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a>;
  <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a>; i++)
  {
    <span class="keywordflow">if</span>(memptr[i].mc == 0)
    {
      <span class="comment">//if(debug) ::printf(&quot;rlEIBnetIP::storeBuffer() insert new value\n&quot;);</span>
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();
      memcpy(&amp;memptr[i],&amp;tel,<span class="keyword">sizeof</span>(tel));
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();
      <span class="keywordflow">return</span> 0;
    }
    <span class="comment">//else if(memptr[i].saddr == tel.saddr &amp;&amp; memptr[i].daddr == tel.daddr)</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(memptr[i].daddr == tel.daddr)
    {
      <span class="comment">//if(debug) ::printf(&quot;rlEIBnetIP::storeBuffer() update existing value\n&quot;);</span>
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();
      memcpy(&amp;memptr[i],&amp;tel,<span class="keyword">sizeof</span>(tel));
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();
      <span class="keywordflow">return</span> 0;
    }
  }
  <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::storeBuffer() maxvalues=%d too small\n&quot;</span>,maxvalues);
  <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac7db059cc876c3274146630b113641a4"></a><!-- doxytag: member="rlEIBnetIP::storeInProvider" ref="ac7db059cc876c3274146630b113641a4" args="(EIB_TEL *tel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::storeInProvider </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrlEIBnetIP_1_1EIB__TEL.html">EIB_TEL</a> *&#160;</td>
          <td class="paramname"><em>tel</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00322">322</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#a4a7149e5b86bf2537f41daccc1c86387">provider</a> == NULL || tel == NULL) <span class="keywordflow">return</span> -1;
  <span class="keywordtype">int</span> s1,s2,s3,d1,d2,d3,val,length;
  <span class="keywordtype">char</span> name[128], <a class="code" href="classrlEIBnetIP.html#aebb119219a1a25c9ad0e930542137786">value</a>[128];

  s1 = tel-&gt;saddr/(8*256);
  s2 = (tel-&gt;saddr/256) &amp; 0x0ff;
  s3 = tel-&gt;saddr &amp; 0x0ff;
  d1 = tel-&gt;daddr/(8*256);
  d2 = (tel-&gt;daddr/256) &amp; 0x0ff;
  d3 = tel-&gt;daddr &amp; 0x0ff;
  length = tel-&gt;apci_length;
  val = 0;
  <span class="keywordflow">if</span>(length == 1)
  {
    val = tel-&gt;val[0];
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 2)
  {
    <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;tel-&gt;val[0];
    val = (((*cptr)*256)+tel-&gt;val[1]);
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 3)
  {
    <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;tel-&gt;val[0];
    val = (((*cptr)*256)+tel-&gt;val[1])*tel-&gt;val[2];
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 4)
  {
    <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;tel-&gt;val[0];
    val = ((((*cptr)*256)+tel-&gt;val[1])*(tel-&gt;val[2]*256) * tel-&gt;val[3]);
  }
  <span class="comment">//::printf(&quot;/%d/%d/%d\t/%d/%d/%d\t0x%x\t%d\n&quot;,s1,s2,s3,d1,d2,d3,val,length);</span>
  sprintf(name,<span class="stringliteral">&quot;/%d/%d/%03d&quot;</span>,d1,d2,d3);
  sprintf(value,<span class="stringliteral">&quot;%d&quot;</span>,val);
  <span class="keywordflow">if</span>(<a class="code" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">debug</a>) <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;storeInProvicer: name=%s value=%s&quot;</span>, name, value);
  <a class="code" href="classrlEIBnetIP.html#a4a7149e5b86bf2537f41daccc1c86387">provider</a>-&gt;<a class="code" href="classrlDataAcquisitionProvider.html#a570658cbca250bd9441206e1ece2e694">setStringValue</a>(name, value);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aebb119219a1a25c9ad0e930542137786"></a><!-- doxytag: member="rlEIBnetIP::value" ref="aebb119219a1a25c9ad0e930542137786" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlEIBnetIP::value </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00619">619</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> val;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uval;
  uval = <a class="code" href="classrlEIBnetIP.html#acc0869377bed2eeba4c2f1ff4f73bbd0">valueUnsigned</a>(name);
  memcpy(&amp;val,&amp;uval,<span class="keyword">sizeof</span>(val));
  <span class="keywordflow">return</span> val;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3618fa743b3504990a7f53d5d0c5ae1a"></a><!-- doxytag: member="rlEIBnetIP::valueFloat2" ref="a3618fa743b3504990a7f53d5d0c5ae1a" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float rlEIBnetIP::valueFloat2 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00662">662</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">float</span> val,sign;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uval,e,m;
  uval = <a class="code" href="classrlEIBnetIP.html#acc0869377bed2eeba4c2f1ff4f73bbd0">valueUnsigned</a>(name);
  <span class="keywordflow">if</span>(uval &amp; 0x080000000) sign = 1.0f;
  <span class="keywordflow">else</span>                   sign = -1.0f;
  uval = uval | 0x07fffffff; <span class="comment">// eliminate sign</span>
  m = uval &amp; 0x07ffff;
  e = uval / (8*256);
  val = sign*(0.01f*m)*(2^e);
  <span class="keywordflow">return</span> val;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4e15e45e9b3977853d9466a9a0031de6"></a><!-- doxytag: member="rlEIBnetIP::valueFloat4" ref="a4e15e45e9b3977853d9466a9a0031de6" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float rlEIBnetIP::valueFloat4 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00676">676</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">float</span> val;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uval;
  uval = <a class="code" href="classrlEIBnetIP.html#acc0869377bed2eeba4c2f1ff4f73bbd0">valueUnsigned</a>(name);
  memcpy(&amp;val,&amp;uval,<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));
  <span class="keywordflow">return</span> val;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acc0869377bed2eeba4c2f1ff4f73bbd0"></a><!-- doxytag: member="rlEIBnetIP::valueUnsigned" ref="acc0869377bed2eeba4c2f1ff4f73bbd0" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int rlEIBnetIP::valueUnsigned </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8cpp_source.html#l00685">685</a> of file <a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(name == NULL || <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a> == NULL) <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> val,a1,a2,a3,length;
  <span class="keyword">const</span> <span class="keywordtype">char</span> *cptr;
  EIB_TEL tel;
  EIB_TEL *memptr = (EIB_TEL *) <a class="code" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">mem</a>;

  <span class="comment">// interpret name</span>
  memset(&amp;tel,0xff,<span class="keyword">sizeof</span>(EIB_TEL));
  cptr = strchr(name,<span class="charliteral">&#39;/&#39;</span>);
  <span class="keywordflow">if</span>(cptr == NULL)
  {
    <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;USER_ERROR: rlEIBnetIP::value() wrong name=%s\n&quot;</span>, name);
    <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
  }
  sscanf(cptr,<span class="stringliteral">&quot;/%d/%d/%d&quot;</span>,&amp;a1,&amp;a2,&amp;a3);
  tel.saddr = (short) <a class="code" href="classrlEIBnetIP.html#a1ba03e5e8658851e2fb9dfbc036c492d">saddr</a>;
  tel.daddr = ((a1*8)+a2)*256+a3;

  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">maxvalues</a>; i++)
  {
    <span class="keywordflow">if</span>(memptr[i].mc == 0) <span class="keywordflow">break</span>;
    <span class="comment">//if(memptr[i].saddr == tel.saddr &amp;&amp; memptr[i].daddr == tel.daddr)</span>
    <span class="keywordflow">if</span>(memptr[i].daddr == tel.daddr)
    {
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();
      val = 0;
      length = memptr[i].apci_length;
      <span class="keywordflow">if</span>(length == 1)
      {
        val = memptr[i].val[0];
      }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 2)
      {
        <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;memptr[i].val[0];
        val = (((*cptr)*256)+memptr[i].val[1]);
      }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 3)
      {
        <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;memptr[i].val[0];
        val = (((*cptr)*256)+memptr[i].val[1])*memptr[i].val[2];
      }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(length == 4)
      {
        <span class="keywordtype">char</span> *cptr = (<span class="keywordtype">char</span> *) &amp;memptr[i].val[0];
        val = ((((*cptr)*256)+memptr[i].val[1])*(memptr[i].val[2]*256) * memptr[i].val[3]);
      }
      <a class="code" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();
      <span class="keywordflow">if</span>(length &lt; 1 || length &gt; 4 || length == 3)
      {
        <a class="code" href="classrlUdpSocket.html#a3e8c67d198ee9e4e18266537c82ff7b2">::printf</a>(<span class="stringliteral">&quot;rlEIBnetIP::value(0x%x) unknown length=%d\n&quot;</span>,val,length);
        <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
      }
      <span class="keywordflow">return</span> val;
    }
  }
  <span class="keywordflow">return</span> <a class="code" href="classrlEIBnetIP.html#a4e31fc57027bed89bd3f7f6cce9a4fc6adb4a63209dc931f03f60dba94c5efb64">rlEIBnetIP::EIBERROR</a>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a955ba5643f8cbc90f41bb0ec4f6eb117"></a><!-- doxytag: member="rlEIBnetIP::channelid" ref="a955ba5643f8cbc90f41bb0ec4f6eb117" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlEIBnetIP.html#a955ba5643f8cbc90f41bb0ec4f6eb117">rlEIBnetIP::channelid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00104">104</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a42dfcda15fd1e611b024a286009672"></a><!-- doxytag: member="rlEIBnetIP::client" ref="a4a42dfcda15fd1e611b024a286009672" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrlIpAdr.html">rlIpAdr</a> <a class="el" href="classrlEIBnetIP.html#a4a42dfcda15fd1e611b024a286009672">rlEIBnetIP::client</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00114">114</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac13a696b9fedeb2cb2a5a764ae0cef82"></a><!-- doxytag: member="rlEIBnetIP::debug" ref="ac13a696b9fedeb2cb2a5a764ae0cef82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlEIBnetIP.html#ac13a696b9fedeb2cb2a5a764ae0cef82">rlEIBnetIP::debug</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classrlUdpSocket.html#a6104de2d13cd329c5db92d7e1c6ff284">rlUdpSocket</a>.</p>

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00087">87</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a73f9d778758e41e61d0951d5fa7d0e2b"></a><!-- doxytag: member="rlEIBnetIP::from" ref="a73f9d778758e41e61d0951d5fa7d0e2b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrlIpAdr.html">rlIpAdr</a> <a class="el" href="classrlEIBnetIP.html#a73f9d778758e41e61d0951d5fa7d0e2b">rlEIBnetIP::from</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00115">115</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa81a42af4a52ab839a943bcb929de6cd"></a><!-- doxytag: member="rlEIBnetIP::is_connected" ref="aa81a42af4a52ab839a943bcb929de6cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlEIBnetIP.html#aa81a42af4a52ab839a943bcb929de6cd">rlEIBnetIP::is_connected</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00117">117</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4ffe4396c7230d8c779ba27208c1f80a"></a><!-- doxytag: member="rlEIBnetIP::maxvalues" ref="a4ffe4396c7230d8c779ba27208c1f80a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlEIBnetIP.html#a4ffe4396c7230d8c779ba27208c1f80a">rlEIBnetIP::maxvalues</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00116">116</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4abe062ed8afeaf8173894a7b3f174d8"></a><!-- doxytag: member="rlEIBnetIP::mem" ref="a4abe062ed8afeaf8173894a7b3f174d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="classrlEIBnetIP.html#a4abe062ed8afeaf8173894a7b3f174d8">rlEIBnetIP::mem</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00101">101</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa5b8c795f43185d498f56acad27ad10a"></a><!-- doxytag: member="rlEIBnetIP::memsize" ref="aa5b8c795f43185d498f56acad27ad10a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlEIBnetIP.html#aa5b8c795f43185d498f56acad27ad10a">rlEIBnetIP::memsize</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00102">102</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a7149e5b86bf2537f41daccc1c86387"></a><!-- doxytag: member="rlEIBnetIP::provider" ref="a4a7149e5b86bf2537f41daccc1c86387" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrlDataAcquisitionProvider.html">rlDataAcquisitionProvider</a>* <a class="el" href="classrlEIBnetIP.html#a4a7149e5b86bf2537f41daccc1c86387">rlEIBnetIP::provider</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00109">109</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8ae718a134cdbb39ca65ce0afe66ddba"></a><!-- doxytag: member="rlEIBnetIP::running" ref="a8ae718a134cdbb39ca65ce0afe66ddba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlEIBnetIP.html#a8ae718a134cdbb39ca65ce0afe66ddba">rlEIBnetIP::running</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00103">103</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1ba03e5e8658851e2fb9dfbc036c492d"></a><!-- doxytag: member="rlEIBnetIP::saddr" ref="a1ba03e5e8658851e2fb9dfbc036c492d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short <a class="el" href="classrlEIBnetIP.html#a1ba03e5e8658851e2fb9dfbc036c492d">rlEIBnetIP::saddr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00118">118</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a06af0c51db3d51b13ab3bb6296019b7b"></a><!-- doxytag: member="rlEIBnetIP::send_sequencecounter" ref="a06af0c51db3d51b13ab3bb6296019b7b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlEIBnetIP.html#a06af0c51db3d51b13ab3bb6296019b7b">rlEIBnetIP::send_sequencecounter</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00107">107</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a43ac581a040823ef0f5fcb6cc24477c7"></a><!-- doxytag: member="rlEIBnetIP::server" ref="a43ac581a040823ef0f5fcb6cc24477c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrlIpAdr.html">rlIpAdr</a>* <a class="el" href="classrlEIBnetIP.html#a43ac581a040823ef0f5fcb6cc24477c7">rlEIBnetIP::server</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00106">106</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7a4dc97aaf46c32960afbf2285206390"></a><!-- doxytag: member="rlEIBnetIP::thread" ref="a7a4dc97aaf46c32960afbf2285206390" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrlThread.html">rlThread</a> <a class="el" href="classrlEIBnetIP.html#a7a4dc97aaf46c32960afbf2285206390">rlEIBnetIP::thread</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00105">105</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="afbced3ff3fead4c55fa6a161b9d79b3d"></a><!-- doxytag: member="rlEIBnetIP::tunnel_ack" ref="afbced3ff3fead4c55fa6a161b9d79b3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlEIBnetIP.html#afbced3ff3fead4c55fa6a161b9d79b3d">rlEIBnetIP::tunnel_ack</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00108">108</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<a class="anchor" id="af5929c0fac5d7a20e8dcca6291ceccf1"></a><!-- doxytag: member="rlEIBnetIP::watch_eib" ref="af5929c0fac5d7a20e8dcca6291ceccf1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlEIBnetIP.html#af5929c0fac5d7a20e8dcca6291ceccf1">rlEIBnetIP::watch_eib</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rleibnetip_8h_source.html#l00088">88</a> of file <a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="rleibnetip_8h_source.html">rleibnetip.h</a></li>
<li><a class="el" href="rleibnetip_8cpp_source.html">rleibnetip.cpp</a></li>
</ul>
</div>


<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
