<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>rllib: rlCanOpen Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">rllib
   &#160;<span id="projectnumber">1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">rlCanOpen Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="rlCanOpen" -->
<p>main class which provides canopen API functions and manages all nodes.  
 <a href="classrlCanOpen.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>&gt;</code></p>

<p><a href="classrlCanOpen-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a543e78ab2f7dfc71c8967babc4537400">rlCanOpen</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#abb1f2ae469b8669e92de89225fe7cc29">rlCanOpen</a> (char *_inifilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a5d6f4e64167fb38d3fb670381c483852">~rlCanOpen</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ad17ae29368457cd075e57d82140de997">getBoardCount</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the number of available boards  <a href="#ad17ae29368457cd075e57d82140de997"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae">getActiveBoard</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the number of currently active board  <a href="#a3e7b87154134ee74f2a7611a3b931dae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#af8071fb948b6862ec7444e4f9b33b679">showNodeConfiguration</a> (int _boardnr, int _nodeid)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">prints out the configuration of a specific node  <a href="#af8071fb948b6862ec7444e4f9b33b679"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#afb672e8a6cd805cd5ed902fb740a6f3e">showNodeConfiguration</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">prints out the configuration off all available nodes from all boards  <a href="#afb672e8a6cd805cd5ed902fb740a6f3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713">sdo_read</a> (int _boardnr, int _nodeid, int _objectindex, int _subindex, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_sdo_data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">read a certain object from the object dictionary of a node  <a href="#a0a0e5e4328ff82cc5a7de3e8fa9c9713"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#afe214122e51cdd214d586ef1b50a5b34">sdo_write</a> (int _boardnr, int _nodeid, int _objectindex, int _subindex, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_sdo_data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">write data into a certain object from the object dictionary of a node  <a href="#afe214122e51cdd214d586ef1b50a5b34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a73a3479ae9754495e17aa6591dbf135e">pdo_receive</a> (int _boardnr, int _nodeid, int _pdonr, int _mappingnr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">using the pdo_receive function you can receive a mapped object within PDO  <a href="#a73a3479ae9754495e17aa6591dbf135e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aad8dd8baeb1b1caf32b38528b5039060">pdo_receive</a> (int _boardnr, int _nodeid, int _pdonr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">using the pdo_receive function you can receive a PDO (Process Data Object)  <a href="#aad8dd8baeb1b1caf32b38528b5039060"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aa0af0f6576ec284128e9c3efb4770ca2">pdo_transmit</a> (int _boardnr, int _nodeid, int _pdonr, int _mappingnr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">transmit a mapped object within a PDO to a specific node  <a href="#aa0af0f6576ec284128e9c3efb4770ca2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a813d45bf60088fc0d4fcd70264a7dbe1">pdo_transmit</a> (int _boardnr, int _nodeid, int _pdonr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">transmit a 8 Byte PDO to a specific node  <a href="#a813d45bf60088fc0d4fcd70264a7dbe1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252">getNodeIndex</a> (int _boardnr, int _nodeid, int &amp;_index)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">this function returns the listindex of a desired node  <a href="#a79e0198f870d1c405d4b692628133252"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#abab868b55f7b1bc5e14c9185e711d5e7">getObjectType</a> (int _boardnr, int _nodeid, int _objectindex, int _subindex)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns daemontype number of a specific object  <a href="#abab868b55f7b1bc5e14c9185e711d5e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aef2160067fb768dc63c038fa0abc0f4d">getNodeState</a> (int _boardnr, int _nodeid, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">use this function to get information about a specific node  <a href="#aef2160067fb768dc63c038fa0abc0f4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac65b49a7d5677c354cd73c6980687219">restartBoard</a> (int _boardnr, int _restarttype)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">using this function you are able to restart a CanOpenMaster board  <a href="#ac65b49a7d5677c354cd73c6980687219"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a3b59ba388442d8ccf33f0f031752f6cd">sendNMTCommand</a> (int _boardnr, int _nodeid, unsigned char _cmd)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">send a NMT Command to one or all nodes (of one board)  <a href="#a3b59ba388442d8ccf33f0f031752f6cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a> (int _canopentype)</td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a464c2a31796b3c816f6282e1df12f7f7">getNodeConfiguration</a> (int _nodeID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a07a517a30bff32985a1e54a4787e1006">getPdoID</a> (int _boardnr, int _nodeid, int _objektindex, int _direction)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return PdoId of mapped object.  <a href="#a07a517a30bff32985a1e54a4787e1006"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a2ee4ce66da6eac2f80309f968e1a49fe">read_inifile</a> (const char *_filename)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">read properties of inifile  <a href="#a2ee4ce66da6eac2f80309f968e1a49fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921">ini</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize nodes and create nodelist  <a href="#aab75d58a1776264647ee87df5972f921"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ae03cba7206676285f6639b7f744312b4">delmsg</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">clear message struct by setting all elements to zero  <a href="#ae03cba7206676285f6639b7f744312b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#af2ed347a61f28ad445ba615d6e82e2d8">iniboards</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read informations about installed devices.  <a href="#af2ed347a61f28ad445ba615d6e82e2d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61">setBoardActive</a> (int _boardnr)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">sets a desired CanOpenMaster active, so that it can be used  <a href="#a75581c22eb7264ed2926e535835f1f61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a> (int _boardnr, int _nodeid, int _pdoID, int _pdoDirection)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac05ad772d2766154831c90bc17877de8">createNodes</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for nodes in all boards and append it into the nodelist.  <a href="#ac05ad772d2766154831c90bc17877de8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a992c869dba69a39723309bbc960db2a8">createMappingObjects</a> (int _boardid, int _nodeid, int _pdoDirection)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">this function writes the mapping objects for each pdo of a node  <a href="#a992c869dba69a39723309bbc960db2a8"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72">activeboard</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the currently active board  <a href="#af6158583052812792b8036d631d95a72"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431">err_out_buf</a> [255]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">this string buffer is usually written with sprintf before sent to stdout  <a href="#a64a5fceff2c1c9d97a319eab86b07431"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25">sRet</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return value for hilscher specific message functions  <a href="#a1c40a2fc97d124fafe75c2f58c121f25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ae49809a8c8792a84afdbaf5339ccfc56">err_fp</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to error logfile.  <a href="#ae49809a8c8792a84afdbaf5339ccfc56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d">logFileName</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">name of logfile stdout is redirected to  <a href="#a0547463787b69513660fefb1f5b5848d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">RCS_MESSAGETELEGRAM_10&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1">message</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">hilscher specific message structur which will be sent to the master card  <a href="#a86ad06349b70e8d0fceaeb06efa362f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QPtrVector&lt; <a class="el" href="classrlCanNode.html">rlCanNode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72">nodelist</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">this list contains all nodes from all boards  <a href="#a6fe4e7245881d141b63f42ea46f9fd72"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24">boardcount</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the current count of CanOpenMaster cards  <a href="#a3eff7e93db293eb999c1accf78d56e24"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76">messagenr</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">message counter  <a href="#a8bc3d3346fdb9e64c6bc041fcac19b76"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>main class which provides canopen API functions and manages all nodes. </p>
<p>This class contains a canopen specific API which accesses the canopen bus through the bus-independ Hilscher device API. It reads the configuration which has to be written previously to the device by SyCon. Based on this configuration data it searches node corresponding EDS files to create object directories. These help to enshure type security and cast warnings when users try to write incorrect data types to can nodes. </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00055">55</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a543e78ab2f7dfc71c8967babc4537400"></a><!-- doxytag: member="rlCanOpen::rlCanOpen" ref="a543e78ab2f7dfc71c8967babc4537400" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlCanOpen::rlCanOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00040">40</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Constructer nodes class\n&quot;</span>);
  <a class="code" href="classrlCanOpen.html#a2ee4ce66da6eac2f80309f968e1a49fe" title="read properties of inifile">read_inifile</a>(<span class="stringliteral">&quot;./canopen.ini&quot;</span>);
  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>){
    FILE* fp;
    fp = freopen (<a class="code" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d" title="name of logfile stdout is redirected to">logFileName</a>.ascii(),<span class="stringliteral">&quot;w&quot;</span>,stdout); <span class="comment">// redirekt stdout to textfile</span>
    
    <span class="comment">/* enable linebuffering in order to write every line to the file immediately */</span>
    setvbuf ( fp , NULL , _IOFBF , 1024 ); 
  }
  <a class="code" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921" title="initialize nodes and create nodelist">ini</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="abb1f2ae469b8669e92de89225fe7cc29"></a><!-- doxytag: member="rlCanOpen::rlCanOpen" ref="abb1f2ae469b8669e92de89225fe7cc29" args="(char *_inifilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlCanOpen::rlCanOpen </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>_inifilename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00029">29</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Constructer nodes class\n&quot;</span>);
  <a class="code" href="classrlCanOpen.html#a2ee4ce66da6eac2f80309f968e1a49fe" title="read properties of inifile">read_inifile</a>(_inifilename);
  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>){
    freopen (<a class="code" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d" title="name of logfile stdout is redirected to">logFileName</a>.ascii(),<span class="stringliteral">&quot;w&quot;</span>,stdout); <span class="comment">// redirekt stdout to textfile</span>
  }
  <a class="code" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921" title="initialize nodes and create nodelist">ini</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5d6f4e64167fb38d3fb670381c483852"></a><!-- doxytag: member="rlCanOpen::~rlCanOpen" ref="a5d6f4e64167fb38d3fb670381c483852" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlCanOpen::~rlCanOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00054">54</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;destruktor rlCanOpen\n&quot;</span>);
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a>;i++)
    DevExitBoard(i);

<span class="preprocessor">#ifdef RLWIN32</span>
<span class="preprocessor"></span>  DevCloseDriver(0);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>  DevCloseDriver();
<span class="preprocessor">#endif    </span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>)    
    fclose (stdout);
  
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a992c869dba69a39723309bbc960db2a8"></a><!-- doxytag: member="rlCanOpen::createMappingObjects" ref="a992c869dba69a39723309bbc960db2a8" args="(int _boardid, int _nodeid, int _pdoDirection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::createMappingObjects </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdoDirection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this function writes the mapping objects for each pdo of a node </p>
<p>creates the mappings for each pdo </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00137">137</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> pdomax = 0;
  <span class="keywordflow">if</span> (_pdoDirection == <a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>)
    pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;getReceivePdoCount();
  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(_pdoDirection == <a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>)
    pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;getTransmitPdoCount();
    
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1;j&lt;=pdomax;j++)    <span class="comment">//each receive/transmit pdo</span>
  <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a>(_boardid,_nodeid,j,_pdoDirection)==0) <span class="keywordflow">return</span> 0;
  <span class="keywordflow">return</span> 1;

}   
</pre></div>
</div>
</div>
<a class="anchor" id="ac05ad772d2766154831c90bc17877de8"></a><!-- doxytag: member="rlCanOpen::createNodes" ref="ac05ad772d2766154831c90bc17877de8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::createNodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Search for nodes in all boards and append it into the nodelist. </p>
<p>this function checks the bus for available nodes and creates a corresponding nodelist </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00103">103</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
 <span class="keywordtype">int</span> nodeid;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> boardid = 0;boardid&lt;<a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a>;boardid++)
  {
    <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(boardid);
    <span class="keywordflow">for</span>(nodeid = 0; nodeid &lt;= <a class="code" href="rlcanopenstructs_8h.html#abd2aacdca9cb2a1a30f3392256b96ea3">MAX_NODES</a>; nodeid++)  <span class="comment">// from node 0..127</span>
      <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a464c2a31796b3c816f6282e1df12f7f7">getNodeConfiguration</a>(nodeid)) <span class="comment">// writes received node-configuration </span>
                                        <span class="comment">// into class-global message-struct</span>
      {
        <span class="comment">// new node found. insert it into the nodelist</span>
        <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.resize( <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size() + 1 );   
        
        <span class="comment">// append the new node in the list</span>
        <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.insert( <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1, 
                         <span class="keyword">new</span> <a class="code" href="classrlCanNode.html" title="class to manage one node of a CanOpenMaster board in a CanOpen network">rlCanNode</a>(boardid,nodeid,<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>));
        
       <span class="comment">//append Mapping data                                  </span>
        <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;hasMapping()){
          <span class="keywordflow">if</span>(!<a class="code" href="classrlCanOpen.html#a992c869dba69a39723309bbc960db2a8" title="this function writes the mapping objects for each pdo of a node">createMappingObjects</a>(boardid,nodeid,<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>))<span class="keywordflow">return</span> 0;
          <span class="keywordflow">if</span>(!<a class="code" href="classrlCanOpen.html#a992c869dba69a39723309bbc960db2a8" title="this function writes the mapping objects for each pdo of a node">createMappingObjects</a>(boardid,nodeid,<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>))<span class="keywordflow">return</span> 0;
        }
        <span class="keywordflow">else</span>
        {
          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;WARNING: no Mapping available on node %d.&quot;</span>, nodeid);
          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Probably EDS file couldn&#39;t be found in EDS directory.\n&quot;</span>);
        }
      }             
  }
  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae03cba7206676285f6639b7f744312b4"></a><!-- doxytag: member="rlCanOpen::delmsg" ref="ae03cba7206676285f6639b7f744312b4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rlCanOpen::delmsg </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>clear message struct by setting all elements to zero </p>
<p>this function resets all elements of global message struct to zero </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00859">859</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                      {
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx            =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx            =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln            =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr            =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a             =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f             =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b             =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e             =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr    =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area     =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr      =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx      =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt      =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type     =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function      =0;
  
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="rlcanopenstructs_8h.html#a4d267be232afc6e35e9cc9a4a1987293">MAX_SDO_BUFFERSIZE</a>; i++)
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[i] = 0;

}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e7b87154134ee74f2a7611a3b931dae"></a><!-- doxytag: member="rlCanOpen::getActiveBoard" ref="a3e7b87154134ee74f2a7611a3b931dae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getActiveBoard </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns the number of currently active board </p>
<p>returns the currently active board </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00296">296</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72" title="the currently active board">activeboard</a>;
}                                                                                                                                                                                
</pre></div>
</div>
</div>
<a class="anchor" id="ad17ae29368457cd075e57d82140de997"></a><!-- doxytag: member="rlCanOpen::getBoardCount" ref="ad17ae29368457cd075e57d82140de997" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getBoardCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns the number of available boards </p>
<p>returns the current count of available CanOpenMaster cards </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00211">211</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a>;
}  
</pre></div>
</div>
</div>
<a class="anchor" id="a464c2a31796b3c816f6282e1df12f7f7"></a><!-- doxytag: member="rlCanOpen::getNodeConfiguration" ref="a464c2a31796b3c816f6282e1df12f7f7" args="(int _nodeID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::getNodeConfiguration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeID</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function reads out the configuration of a specific node using special Hilscher commands (CMDCODE_GET_CONFIGURATION). If the master board isn't configurated by SyCon it is not possibly to use this function with success. It returns false if the node is not available </p>
<p>Device Number</p>
<p>Pointer to user buffer</p>
<p>Timeout </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00217">217</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">//build message       </span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx            = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>; 
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx            = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln            = 8;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr            =<a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++; 
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a             =0; 
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f             =0;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b             =<a class="code" href="rlcanopenstructs_8h.html#a92aacf2e33d2d8d3e9893c4538bfae2b">CMDCODE_GET_CONFIGURATION</a>;
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e             =0x00;  <span class="comment">//fragmentation</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr    =_nodeID;  
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area     =0; 
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr      =0; 
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx      =0; 
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt      =0; 
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type     =0; 
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function      =0;
  
  <span class="comment">//put configuration request</span>
  DevPutMessage(0, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,5000L) ;  
  
  <span class="comment">//receive answer message</span>
  <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage (  0,                       
                          <span class="keyword">sizeof</span>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>),      
                          (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,   
                          2000L );                 

  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msgnrlocal = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> -1;
  
  <span class="comment">// receive correct answer </span>
  <span class="keywordflow">if</span>((<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a == <a class="code" href="rlcanopenstructs_8h.html#a786531d89ce666d3c6f40e6b3a39c504">RESPONSE_CODE_GET_CONFIGURATION</a>) &amp;&amp; (<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr == msgnrlocal))
    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f == <a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>) <span class="comment">// node active, no error</span>
      <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e == 0x00) <span class="comment">//configuration fits in the message</span>
      {
        sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;Board %d node %d is active. No problems found\n&quot;</span>, 
          <a class="code" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae" title="returns the number of currently active board">getActiveBoard</a>(), _nodeID);
        
        <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
        <span class="keywordflow">return</span> 1;
      }
      <span class="keywordflow">else</span>
      {
         sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;Board %d node %d is active. \n&quot;</span>, 
           <a class="code" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae" title="returns the number of currently active board">getActiveBoard</a>(), _nodeID);
           
         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Configuration data does not fit in one message,\n&quot;</span>);
         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;so the current node does not include the complete data\n&quot;</span>);
         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot; - multiplex configration data is not yet implemented!!! -\n&quot;</span>);
         <span class="keywordflow">return</span> 1;
      } 
    <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;
  <span class="keywordflow">else</span> 
  {
    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;----&gt;message.a=%d, message.nr=%d unsere msg nr: %d\n&quot;</span>, 
      <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a, <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr, msgnrlocal);
      
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <span class="stringliteral">&quot;Communication ERROR!!!&quot;</span>);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
    <span class="keywordflow">return</span> 0;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a79e0198f870d1c405d4b692628133252"></a><!-- doxytag: member="rlCanOpen::getNodeIndex" ref="a79e0198f870d1c405d4b692628133252" args="(int _boardnr, int _nodeid, int &amp;_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getNodeIndex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this function returns the listindex of a desired node </p>
<p>Because the nodes of all boards are stored in one list, the listindex is not equal to the nodeID(1-127). Use this function to get the listindex of a desired node </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00882">882</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size(); i++)
  {
    <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getNodeID() == _nodeid) &amp;&amp; 
        (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getBoardID() == _boardnr))
    {
      _index = i;
      <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }           
  }
  <span class="keywordflow">return</span> <span class="keyword">false</span>; 
}
</pre></div>
</div>
</div>
<a class="anchor" id="aef2160067fb768dc63c038fa0abc0f4d"></a><!-- doxytag: member="rlCanOpen::getNodeState" ref="aef2160067fb768dc63c038fa0abc0f4d" args="(int _boardnr, int _nodeid, rlCanOpenTypes &amp;_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getNodeState </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>use this function to get information about a specific node </p>
<p>Use this function to get information about a specific node. The nodestate, nodeerror and a nodestateFlag will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a>. Read the rlCanOpenTypes.h header to get further information about these variables. Hilscher specific function (so no CanOpoen services) are used to receive the information </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01045">1045</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{ 
 
 <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);
 
 COM_ND_DIAGNOSTICS * diag;
 diag = (COM_ND_DIAGNOSTICS*) &amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[0];

  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>         ;<span class="comment">//receiver = user at HOST</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>     ;<span class="comment">// transmitter = USR_INTF-Task</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln = 8                ;<span class="comment">//length of message</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++      ;<span class="comment">//number of the message</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a  = 0                ;<span class="comment">//no answer</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f  = 0                ;<span class="comment">//error, status</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b  = <a class="code" href="rlcanopenstructs_8h.html#acddf85b855483e1edbff1ab0296f9924">CMDCODE_Node_Diag</a>;<span class="comment">//command = COM_Node_Diag</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e =0                  ;<span class="comment">//extension</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr = _nodeid  ;<span class="comment">//k Rem_Adr</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area = 0         ;<span class="comment">// data area, unused</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr  = 0         ;<span class="comment">//data address, unused</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx  = 0         ;<span class="comment">//data index, unused</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt  = 0         ;<span class="comment">//data count, unused</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type = 5         ;<span class="comment">// data type byte string</span>
  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function =  1         ;<span class="comment">//function read</span>
  
  
 if ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevPutMessage(_boardnr, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>, 5000L)) 
       == DRV_NO_ERROR )
 {
   <span class="keywordflow">while</span>( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage(_boardnr, <span class="keyword">sizeof</span>(message), 
                                (MSG_STRUC *)&amp;message, 0)) 
          == DRV_DEV_GET_NO_MESSAGE )       
   {
     <span class="keywordflow">continue</span>;
   }
   <span class="keywordflow">if</span> ( <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> == DRV_NO_ERROR )
   {
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;message successfully received\n&quot;</span>);
     <span class="comment">// continue;</span>
   }
   <span class="keywordflow">else</span>
   {
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Error  Message (f = %d))\n&quot;</span>,message.f);
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevGetMessage(%d, sizeof(message), &amp;message, 500): %d\n&quot;</span>,
             _boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
             
     <span class="keywordflow">return</span> 0;
    } 
  }
  <span class="keywordflow">else</span>
  {
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevPutMessage(%d, &amp;message, 5000): %d\n&quot;</span>,_boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
    <span class="keywordflow">return</span> 0;
  }   
  _data.<a class="code" href="classrlCanOpenTypes.html#ae46a7cab0600325bf95dc1d3544397f4" title="sets type to RL_NODESTATE. Stores flag-data received from the device.">set_nodestateFlags</a>( diag-&gt;bNodeStatus_1.bNodeNoResponse, 
                            diag-&gt;bNodeStatus_1.bEmcyBuffOverflow,
                            diag-&gt;bNodeStatus_1.bPrmFault, 
                            diag-&gt;bNodeStatus_1.bGuardActive,
                            diag-&gt;bNodeStatus_1.bDeactivated );
                       
  _data.<a class="code" href="classrlCanOpenTypes.html#ac01c44e149d41b4998ee0b3f73590364" title="sets current state of node.">set_nodestate</a>(diag-&gt;bNodeState);
  _data.<a class="code" href="classrlCanOpenTypes.html#a5c2f2d709ff2419c05fdb03794bea87f">set_nodeerror</a>(diag-&gt;bActualError);
                       
  _data.<a class="code" href="classrlCanOpenTypes.html#a45061bf88af2c0f0a09e163b37f6affc" title="alternative setter receives integer typenumber">set_DaemonType</a>(<a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3acdb6e58d9ad486fd43a8beaa993d2b35">rlCanOpenTypes::RL_NODESTATE</a>);
  
  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abab868b55f7b1bc5e14c9185e711d5e7"></a><!-- doxytag: member="rlCanOpen::getObjectType" ref="abab868b55f7b1bc5e14c9185e711d5e7" args="(int _boardnr, int _nodeid, int _objectindex, int _subindex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getObjectType </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_objectindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_subindex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns daemontype number of a specific object </p>
<p>returns daemontype number of an object. The type is retrieved from the node's objectdir. When no objectdir exists (e.g. because of a missing EDS file) or when the requested object does not exist, this function will return 0xFF (the corresponding value to <a class="el" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3ac2f64996a25d15c3ce264c93ee7d3f70">rlCanOpenTypes::RL_NOTYPE</a>) </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00897">897</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> nodeindex;
  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr, _nodeid, nodeindex)){
    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping())
      <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;objecttype(_objectindex, _subindex);
    <span class="keywordflow">else</span>
      <span class="keywordflow">return</span> <a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3a229debf1ae9bd7aa4fd5955de94b6433">rlCanOpenTypes::RL_BUFFER</a>;
  }
  <span class="keywordflow">else</span>{
    <span class="keywordflow">return</span> <a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3ac2f64996a25d15c3ce264c93ee7d3f70">rlCanOpenTypes::RL_NOTYPE</a>;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a07a517a30bff32985a1e54a4787e1006"></a><!-- doxytag: member="rlCanOpen::getPdoID" ref="a07a517a30bff32985a1e54a4787e1006" args="(int _boardnr, int _nodeid, int _objektindex, int _direction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getPdoID </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_objektindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return PdoId of mapped object. </p>
<p>this function iterates through the recieve/tramsmit pdo lists and returns the ID number of the pdo that fits the given objektindex. The PdoId identifies the send/receive PDO on the given node </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01015">1015</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
  <span class="keywordtype">int</span> pdomax=0;
  <span class="keywordtype">int</span> nodeindex=0;
  <span class="keywordtype">int</span> madress=0;
  <span class="comment">// get index of node in nodelist depending on boardid and nodeid</span>
  <span class="comment">// index is stored in nodeindex variable</span>
  <a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr, _nodeid, nodeindex); 
  
  <span class="comment">// get number of elements in particular PDO list</span>
  <span class="keywordflow">if</span> (_direction == <a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>)
    pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;getReceivePdoCount();
  <span class="keywordflow">if</span> (_direction == <a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>)
    pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;getTransmitPdoCount();
   
   <span class="comment">/* iterate through every element of particular list until mapping </span>
<span class="comment">      object adress matches given objectindex */</span>
   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=1;j&lt;=pdomax;j++)  
   {                                                                                                    
      
     madress = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_direction][j-1]-&gt;mappingOvAdress;    
     <span class="keywordflow">if</span> (madress == _objektindex)
       <span class="keywordflow">return</span> j;  
   }
   <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aab75d58a1776264647ee87df5972f921"></a><!-- doxytag: member="rlCanOpen::ini" ref="aab75d58a1776264647ee87df5972f921" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::ini </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialize nodes and create nodelist </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00071">71</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> = 0;
  <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.setAutoDelete(<span class="keyword">true</span>);

  time_t rawtime;
  <span class="keyword">struct </span>tm * timeinfo;
  <a class="code" href="rlevent_8cpp.html#acf6c371f558a71d8a8bbc899e4429e0c">time</a> ( &amp;rawtime );
  timeinfo = localtime ( &amp;rawtime );

  sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;\nnew session startet: %s\n&quot;</span>, asctime(timeinfo));
  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
 
  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#af2ed347a61f28ad445ba615d6e82e2d8" title="Read informations about installed devices.">iniboards</a>()){
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;at least one board initialize!\n&quot;</span>);
  }
  <span class="keywordflow">else</span>
  {
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;no board available or no board could be initialized correctly!\n&quot;</span>);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Programm -&gt; Close\n&quot;</span>);
    exit(0); 
  }
  
  <span class="comment">// search for active nodes and create them</span>
  
  <a class="code" href="classrlCanOpen.html#ac05ad772d2766154831c90bc17877de8" title="Search for nodes in all boards and append it into the nodelist.">createNodes</a>();
  
 
  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af2ed347a61f28ad445ba615d6e82e2d8"></a><!-- doxytag: member="rlCanOpen::iniboards" ref="af2ed347a61f28ad445ba615d6e82e2d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::iniboards </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read informations about installed devices. </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00154">154</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  
  <span class="keywordtype">int</span> currentboardcount=0;
  
  BOARD_INFO tBoardInfo;

<span class="preprocessor">#ifdef RLWIN32</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevOpenDriver(0)) == DRV_NO_ERROR) 
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevOpenDriver()) == DRV_NO_ERROR) 
<span class="preprocessor">#endif    </span>
<span class="preprocessor"></span>  {
    <span class="comment">// Driver successfully opend, read board information</span>
<span class="preprocessor">#ifdef RLWIN32</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetBoardInfo( 0, <span class="keyword">sizeof</span>(tBoardInfo), &amp;tBoardInfo)) != DRV_NO_ERROR) 
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetBoardInfo( &amp;tBoardInfo)) != DRV_NO_ERROR) 
<span class="preprocessor">#endif    </span>
<span class="preprocessor"></span>          {
          <span class="comment">// Function error</span>
            <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>( <span class="stringliteral">&quot;DevGetBoardInfo RetWert = %5d \n&quot;</span>, <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> );
          } <span class="keywordflow">else</span> 
          {
            <span class="comment">// Information successfully read, save for further use</span>
            <span class="comment">// Check out which boards are available</span>
            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> usIdx = 0; usIdx &lt; MAX_DEV_BOARDS; usIdx++)
            {
              <span class="keywordflow">if</span> ( tBoardInfo.tBoard[usIdx].usAvailable == TRUE) {
              <span class="comment">// Board is configured, try to init the board</span>
                <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevInitBoard(
#ifdef <a class="code" href="rldefine_8h.html#aa69fd2b1358365a7eabefb22433241a0">RLWIN32</a>
                tBoardInfo.tBoard[usIdx].usBoardNumber, NULL);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                tBoardInfo.tBoard[usIdx].usBoard);
<span class="preprocessor">#endif    </span>
<span class="preprocessor"></span>                <span class="keywordflow">if</span> ( <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> != DRV_NO_ERROR) {
                  <span class="comment">// Function error</span>
                  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>( <span class="stringliteral">&quot;DevInitBoard RetWert = %5d \n&quot;</span>, <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> );
                } <span class="keywordflow">else</span> {
                <span class="comment">// DEVICE is available and ready............</span>
                currentboardcount++;
                       }
              }
            }
          }
   }
  <a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a> = currentboardcount;       
 
  <span class="keywordflow">if</span> (currentboardcount!=0)
    <span class="keywordflow">return</span> 1;   
  <span class="keywordflow">else</span>
   <span class="keywordflow">return</span> 0;    
}
</pre></div>
</div>
</div>
<a class="anchor" id="afe931676649e9b5be1d244a3fc8f1b61"></a><!-- doxytag: member="rlCanOpen::is_twisted_type" ref="afe931676649e9b5be1d244a3fc8f1b61" args="(int _canopentype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::is_twisted_type </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_canopentype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01226">1226</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">switch</span> (_canopentype){
  
    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a1569876cd33de357eef45c9f3a6387d3">rlCanOpenTypes::INTEGER24_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  
    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a7648935585838256f2669d349d2a9bd2">rlCanOpenTypes::INTEGER40_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  
    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a27336b8f748dd0b43b8256aab3f705ea">rlCanOpenTypes::INTEGER48_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  
    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398aae497b0c7c514f702901387355c5ffe6">rlCanOpenTypes::INTEGER56_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  
    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398ae768c04dc6f86ca7922ef3d90ff4c538">rlCanOpenTypes::UNSIGNED24_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>;  
    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a1b847508cc46d8a8900b2bf6e45f8297">rlCanOpenTypes::UNSIGNED40_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>;  
    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a8a31b85f0f7716f806437a9e58e73be2">rlCanOpenTypes::UNSIGNED48_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>; 
    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398acabf48be88a8827f322f2c20e49273cf">rlCanOpenTypes::UNSIGNED56_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>;   
    <span class="keywordflow">default</span>                          :<span class="keywordflow">return</span> <span class="keyword">false</span>;
  };

}
</pre></div>
</div>
</div>
<a class="anchor" id="a73a3479ae9754495e17aa6591dbf135e"></a><!-- doxytag: member="rlCanOpen::pdo_receive" ref="a73a3479ae9754495e17aa6591dbf135e" args="(int _boardnr, int _nodeid, int _pdonr, int _mappingnr, rlCanOpenTypes &amp;_pdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_receive </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_mappingnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_pdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>using the pdo_receive function you can receive a mapped object within PDO </p>
<p>using the pdo_receive function you can receive a PDO (Process Data Object), which is send from the specific node to the device. The enquired object will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. The mapping is only available if mapping is configurated during the node creation of the rlcanopen constructer. Therefore a eds file (electronic data sheet) is needed. Use the cannode::hasMapping() function to check if mapping is available. To read out the correct value from this class use one of the get_TYPE() {e.g. get_int() } functions you can assert the type in the class using <a class="el" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">rlCanOpenTypes::get_DaemonType()</a>; </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00544">544</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
 
 <span class="keywordtype">int</span> nodeindex;
 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buffer[8];
 
 <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
 {
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified node does not exist! PDO receive failed!&quot;</span>);
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, 
     _boardnr, _nodeid, _pdonr, _mappingnr);
     
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
   <span class="keywordflow">return</span> 0;
 }
 <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! PDO receive failed!&quot;</span>);
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, 
     _boardnr, _nodeid, _pdonr, _mappingnr);
   
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);
   <span class="keywordflow">return</span> 0;
 }
 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr -1]-&gt;mappingList.size() 
          &lt; (<span class="keywordtype">unsigned</span> int) _mappingnr){
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified Mappingnr does not exist! PDO receive failed!&quot;</span>);
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, 
     _boardnr, _nodeid, _pdonr, _mappingnr);
     
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac06bda295f5176eca7aba684d3a23e42">ERRCODE_INVALID_MAPID</a>);
   <span class="keywordflow">return</span> 0;
 }      
 
 <span class="comment">// PDO No.1 has the index 0 !!!</span>
 <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;bPDOSize;      
 <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;usPDOAddress; 
 
 <span class="comment">//cout&lt;&lt;&quot;size =&quot;&lt;&lt;pdosize&lt;&lt;&quot; offset = &quot;&lt;&lt;pdooffset&lt;&lt;&quot;\n&quot;;</span>
 
 <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr,   <span class="comment">// Board NO</span>
                      0,                  <span class="comment">//offset send data</span>
                      0,                  <span class="comment">//Length of the send IO data</span>
                      NULL,               <span class="comment">//Pointer to the user send data buffer</span>
                      pdooffset,          <span class="comment">//Byte offset in the receive IO data area</span>
                      pdosize,            <span class="comment">//Length of the receive IO data</span>
                      &amp;buffer[0],         <span class="comment">//Pointer to the user read data buffer</span>
                      100L)               <span class="comment">//timeout in milliseconds</span>
      ) == DRV_NO_ERROR)
 {
   
   <span class="keywordtype">int</span> length_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;
         pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;mappingList[_mappingnr-1]-&gt;length/8;
           
   <span class="keywordtype">int</span> position_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;
         pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;mappingList[_mappingnr-1]-&gt;position/8; 
         
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a071fb679e9956c9c5a46c633e29b784c" title="sets all bytes in databuffer to zero">clearBuffer</a>();
   
   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = position_in_byte; i&lt; length_in_byte+position_in_byte;i++)
   {
        _pdo_data.<a class="code" href="classrlCanOpenTypes.html#ae679e810361bd26aed31a5458daa4ef5" title="transfer raw data into the databuffer">set_buffer</a>(i-position_in_byte,buffer[i]);
   }
        
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a45061bf88af2c0f0a09e163b37f6affc" title="alternative setter receives integer typenumber">set_DaemonType</a>( <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;
          mappingList[_mappingnr-1]-&gt;etype);
     
       
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>);
   
   
    <span class="comment">// if CanOpen-Type is a twistet integer (etc. 52Bit ) the value will be converted</span>
   <span class="keywordtype">int</span> canopentype = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;
          mappingList[_mappingnr-1]-&gt;canopentype;
           
   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a>(canopentype))
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a57a8d0945c14a3e868c9da3c34a26ec0">translate_CanOpenType</a>(canopentype);   
   
   <span class="keywordflow">return</span> 1;  
 }
 <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: PDO receive failed!&quot;</span>);
 <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, 
   _boardnr, _nodeid, _pdonr, _mappingnr);
 
 _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a58f71815e94679fbf8e83166eb25a73c">ERRCODE_PDORCV_FAIL</a>);
 
  <span class="keywordflow">return</span> 0;     
}
</pre></div>
</div>
</div>
<a class="anchor" id="aad8dd8baeb1b1caf32b38528b5039060"></a><!-- doxytag: member="rlCanOpen::pdo_receive" ref="aad8dd8baeb1b1caf32b38528b5039060" args="(int _boardnr, int _nodeid, int _pdonr, rlCanOpenTypes &amp;_pdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_receive </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_pdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>using the pdo_receive function you can receive a PDO (Process Data Object) </p>
<p>using the pdo_receive function you can receive a PDO (Process Data Object), which is send from the specific node to the canOpen master card. The data will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. This function doesn't use mapping. So the whole 8Byte PDO data, will be received. To read out use the <a class="el" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">rlCanOpenTypes::get_buffer</a>({0-7}) function </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00637">637</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
   
   <span class="keywordtype">int</span> nodeindex;
   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
   {
     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! PDO \</span>
<span class="stringliteral">                           receive failed! BoardId: %d NodeId: %d PDO \</span>
<span class="stringliteral">                           ID: %d\n&quot;</span>, _boardnr, _nodeid, _pdonr);
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
     
     <span class="comment">//cout&lt;&lt;&quot;ERROR: specified node does not exist!\n&quot;;</span>
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
     <span class="keywordflow">return</span> 0;
   }
   
   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){
     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! \</span>
<span class="stringliteral">                           PDO receive failed! BoardId: %d NodeId: \</span>
<span class="stringliteral">                           %d PDO ID: %d\n&quot;</span>, _boardnr, _nodeid, _pdonr);
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);

     <span class="comment">//cout&lt;&lt;&quot;PDO ID does not exists!\n&quot;;</span>
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);
     <span class="keywordflow">return</span> 0;
   }
   
   <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;bPDOSize;
   
   <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;
                                pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;usPDOAddress;
   
   <span class="comment">//cout&lt;&lt;&quot;\nsize =&quot;&lt;&lt;pdosize&lt;&lt;&quot; offset = &quot;&lt;&lt;pdooffset;</span>
     
   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr, <span class="comment">// Board NO</span>
                  0,                      <span class="comment">//offset send data</span>
                  0,                      <span class="comment">//Length of the send IO data</span>
                  NULL,                   <span class="comment">//Pointer to the user send data buffer</span>
                  pdooffset,              <span class="comment">//Byte offset in the receive IO data area</span>
                  pdosize,                <span class="comment">//Length of the receive IO data</span>
                  &amp;_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a0d92ed9f5cdf6d248a9332649e7f2433" title="external buffer for pdotransfer">pdobuffer</a>[0],<span class="comment">//Pointer to the user read data buffer</span>
                  100L)                   <span class="comment">//timeout in milliseconds</span>
        ) == DRV_NO_ERROR)
   {
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#ab05d3a8d10d68e545aba3846ed6aaf5a" title="exchange bytes 0-7 from pdobuffer to databuffer">pdobuf2buf</a>();
     <span class="comment">//rlDebugPrintf(&quot;PDO recieve successfull!\n&quot;);</span>
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>);
     <span class="keywordflow">return</span> 1;
   
   }
   sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO receive failed! \</span>
<span class="stringliteral">                         BoardId: %d NodeId: %d PDO \</span>
<span class="stringliteral">                         ID: %d\n&quot;</span>, _boardnr, _nodeid, _pdonr);
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);

   <span class="comment">//rlDebugPrintf(&quot;ERROR: PDO RECEIVE FAILED\n&quot;);</span>
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a58f71815e94679fbf8e83166eb25a73c">ERRCODE_PDORCV_FAIL</a>);
     <span class="keywordflow">return</span> 0;                          
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa0af0f6576ec284128e9c3efb4770ca2"></a><!-- doxytag: member="rlCanOpen::pdo_transmit" ref="aa0af0f6576ec284128e9c3efb4770ca2" args="(int _boardnr, int _nodeid, int _pdonr, int _mappingnr, rlCanOpenTypes &amp;_pdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_transmit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_mappingnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_pdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>transmit a mapped object within a PDO to a specific node </p>
<p>Using the pdo_transmit function you can transmit a PDO (Process Data Object) to a specific node. The desired data must be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. The mapping is only available if mapping is configurated during the node creation of the rlcanopen constructer. Therefore an eds file (electronic data sheet) is needed. Use the cannode::hasMapping() function to check if mapping is available </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00703">703</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
   <span class="keywordtype">int</span> nodeindex;
   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
   {
     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! PDO transmit \</span>
<span class="stringliteral">                           failed! BoardId: %d NodeId: %d PDO ID: %d Mappingnr:\</span>
<span class="stringliteral">                            %d\n&quot;</span>, _boardnr, _nodeid, _pdonr, _mappingnr);
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
     <span class="keywordflow">return</span> 0;
   }
   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){
     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! PDO transmit\</span>
<span class="stringliteral">                           failed! BoardId: %d NodeId: %d PDO ID: %d Mappingnr:\</span>
<span class="stringliteral">                            %d\n&quot;</span>, _boardnr, _nodeid, _pdonr, _mappingnr);
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
        
     <span class="comment">//cout&lt;&lt;&quot;PDO ID does not exists!\n&quot;;</span>
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);
     <span class="keywordflow">return</span> 0;
   }
   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr -1]-&gt;mappingList.size()
              &lt; (<span class="keywordtype">unsigned</span> int) _mappingnr){
     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified mappingnr does not exist! PDO \</span>
<span class="stringliteral">                           transmit failed! BoardId: %d NodeId: %d PDO \</span>
<span class="stringliteral">                           ID: %d Mappingnr: %d\n&quot;</span>, 
                           _boardnr, _nodeid, _pdonr, _mappingnr);
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);

     <span class="comment">//cout&lt;&lt;&quot;mapping ID does not exists!\n&quot;;</span>
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac06bda295f5176eca7aba684d3a23e42">ERRCODE_INVALID_MAPID</a>);
     <span class="keywordflow">return</span> 0;
   }    
   
   <span class="comment">// PDO No.1 has the index 0 !!!</span>
   <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;bPDOSize; 
   <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;usPDOAddress;

   <span class="keywordtype">int</span> length_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;
                          mappingList[_mappingnr-1]-&gt;length/8;
                          
   <span class="keywordtype">int</span> position_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;
                          mappingList[_mappingnr-1]-&gt;position/8; 
   
   <span class="keywordflow">if</span> (_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">get_DaemonType</a>() != (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;
               pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;mappingList[_mappingnr-1]-&gt;etype))
   {  
     
     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: invalid type! Expected type: %d  Your Type:\</span>
<span class="stringliteral">                            %d! PDO transmit failed! BoardId: %d NodeId: %d \</span>
<span class="stringliteral">                            PDO ID: %d Mappingnr: %d\n&quot;</span>, 
          <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;
            mappingList[_mappingnr-1]-&gt;etype, 
          _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">get_DaemonType</a>(), _boardnr, _nodeid, _pdonr, _mappingnr);
       
       
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">get_DaemonType</a>();
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#acaa13c777fe2910c2902c92fdbf7e392">ERRCODE_INVALID_RLTYPE</a>);
     <span class="keywordflow">return</span> 0;
   }
   
    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a479e8118a82dd132df3fa6d87bafa033" title="exchange bytes 0-7 from databuffer to pdobuffer">buf2pdobuf</a>();
   
   <span class="comment">// no conversion necessary. correct length in mapping list</span>

   pdooffset = pdooffset + position_in_byte;
   pdosize = length_in_byte;
   
   
   
   <span class="comment">//cout&lt;&lt;&quot;size =&quot;&lt;&lt;pdosize&lt;&lt;&quot; offset = &quot;&lt;&lt;pdooffset&lt;&lt;&quot;\n&quot;;</span>
   
   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr,       <span class="comment">// Board NO</span>
                        pdooffset,              <span class="comment">//offset send data</span>
                        pdosize,                <span class="comment">//Length of the send IO data</span>
                        &amp;_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a0d92ed9f5cdf6d248a9332649e7f2433" title="external buffer for pdotransfer">pdobuffer</a>[0],<span class="comment">//Pointer to the user send data buffer</span>
                        0,                      <span class="comment">//Byte offset in the receive IO data area</span>
                        0,                      <span class="comment">//Length of the receive IO data</span>
                        NULL,                   <span class="comment">//Pointer to the user read data buffer</span>
                        100L)                   <span class="comment">//timeout in milliseconds</span>
        ) == DRV_NO_ERROR)
   {
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(0);
     <span class="comment">//rlDebugPrintf(&quot;PDO transmit successful! \n&quot;);</span>
     <span class="keywordflow">return</span> 1;  
   }
   sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO transmit failed! BoardId: %d NodeId: %d \</span>
<span class="stringliteral">                         PDO ID: %d Mappingnr: %d\n&quot;</span>, 
                         _boardnr, _nodeid, _pdonr, _mappingnr);
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
   
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac6a1a95fdab7f5b7d2dfb3056df2eee8">ERRCODE_PDOSND_FAIL</a>);
   <span class="keywordflow">return</span> 0;    
}
</pre></div>
</div>
</div>
<a class="anchor" id="a813d45bf60088fc0d4fcd70264a7dbe1"></a><!-- doxytag: member="rlCanOpen::pdo_transmit" ref="a813d45bf60088fc0d4fcd70264a7dbe1" args="(int _boardnr, int _nodeid, int _pdonr, rlCanOpenTypes &amp;_pdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_transmit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_pdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>transmit a 8 Byte PDO to a specific node </p>
<p>Using the pdo_transmit function you can transmit a PDO (Process Data Object) to a specific node. The desired data must be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. This function does not support mapping. So the whole 8byte PDO data, will be send to write to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> use the <a class="el" href="classrlCanOpenTypes.html#ae679e810361bd26aed31a5458daa4ef5" title="transfer raw data into the databuffer">rlCanOpenTypes::set_buffer</a>({0-7}) function </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00806">806</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
   <span class="keywordtype">int</span> nodeindex;
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a479e8118a82dd132df3fa6d87bafa033" title="exchange bytes 0-7 from databuffer to pdobuffer">buf2pdobuf</a>();
   
   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
   {
     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! PDO transmit\</span>
<span class="stringliteral">                           failed! BoardId: %d NodeId: %d PDO ID: %d \n&quot;</span>,
                            _boardnr, _nodeid, _pdonr);
                            
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
     <span class="keywordflow">return</span> 0;
   }
   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){
     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! PDO \</span>
<span class="stringliteral">                           transmit failed! BoardId: %d NodeId: %d PDO \</span>
<span class="stringliteral">                           ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdonr);
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);
     <span class="keywordflow">return</span> 0;
   }
   
   <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;bPDOSize;
   <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;usPDOAddress; 
   
   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr,       <span class="comment">// Board NO</span>
                        pdooffset,              <span class="comment">//offset send data</span>
                        pdosize,                <span class="comment">//Length of the send IO data</span>
                        &amp;_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a0d92ed9f5cdf6d248a9332649e7f2433" title="external buffer for pdotransfer">pdobuffer</a>[0],<span class="comment">//Pointer to the user send data buffer</span>
                        0,                      <span class="comment">//Byte offset in the receive IO data area</span>
                        0,                      <span class="comment">//Length of the receive IO data</span>
                        NULL,                   <span class="comment">//Pointer to the user read data buffer</span>
                        100L)                   <span class="comment">//timeout in milliseconds</span>
        ) == DRV_NO_ERROR)
   {
     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>);
     <span class="keywordflow">return</span> 1;
   }
   sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO transmit failed! BoardId: %d NodeId: %d \</span>
<span class="stringliteral">                         PDO ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdonr);
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
   
   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac6a1a95fdab7f5b7d2dfb3056df2eee8">ERRCODE_PDOSND_FAIL</a>);
    <span class="keywordflow">return</span> 0;                           
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2ee4ce66da6eac2f80309f968e1a49fe"></a><!-- doxytag: member="rlCanOpen::read_inifile" ref="a2ee4ce66da6eac2f80309f968e1a49fe" args="(const char *_filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rlCanOpen::read_inifile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>_filename</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>read properties of inifile </p>
<p>read properties of inifile. EDS path, logfile location and user-specific options are set on startup </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01189">1189</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                 {
  <a class="code" href="classrlIniFile.html">rlIniFile</a> <a class="code" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921" title="initialize nodes and create nodelist">ini</a>;   
  QString buffer;
  <span class="keywordflow">if</span> (ini.<a class="code" href="classrlIniFile.html#a2d308c9697478c1c0965c2ed7e6581cc">read</a>(_filename)!=-1){
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;used inifile: %s\n&quot;</span>, _filename);
    
    <span class="comment">// read EDS directory location</span>
    buffer=QString(ini.<a class="code" href="classrlIniFile.html#abd6617813df57f3cdcc2f7829a742f32">text</a>(<span class="stringliteral">&quot;DIRECTORIES&quot;</span>,<span class="stringliteral">&quot;EdsDir&quot;</span>));
    buffer.remove((<span class="keywordtype">char</span>) ACSII_CODE_CARRIAGE_RETURN);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;EdsDir: %s\n&quot;</span>, buffer.ascii());
    <span class="comment">// store EDS directory location in environmet variable</span>
<span class="preprocessor">#ifdef RLWIN32</span>
<span class="preprocessor"></span>    SetEnvironmentVariable(<span class="stringliteral">&quot;EdsDir&quot;</span>, buffer.ascii());
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    setenv(<span class="stringliteral">&quot;EdsDir&quot;</span>, buffer.ascii(), 1);
<span class="preprocessor">#endif    </span>
<span class="preprocessor"></span>    
    <span class="comment">// read Logfilename</span>
    <a class="code" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d" title="name of logfile stdout is redirected to">logFileName</a>=QString(ini.<a class="code" href="classrlIniFile.html#abd6617813df57f3cdcc2f7829a742f32">text</a>(<span class="stringliteral">&quot;DIRECTORIES&quot;</span>,<span class="stringliteral">&quot;LogFileName&quot;</span>));
    logFileName.remove((<span class="keywordtype">char</span>) ACSII_CODE_CARRIAGE_RETURN);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Log Filename: %s\n&quot;</span>, logFileName.ascii());
    
    <span class="comment">// read loggin-option </span>
    buffer=QString(ini.<a class="code" href="classrlIniFile.html#abd6617813df57f3cdcc2f7829a742f32">text</a>(<span class="stringliteral">&quot;OPTIONS&quot;</span>,<span class="stringliteral">&quot;enableLoggin&quot;</span>));
    <span class="keywordflow">if</span> (buffer.contains(<span class="stringliteral">&quot;yes&quot;</span>, <span class="keyword">false</span>)==1)
      <a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>=<span class="keyword">true</span>;  
    <span class="keywordflow">else</span>
      <a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>=<span class="keyword">false</span>;  
  }
  <span class="keywordflow">else</span>
  {
    logFileName=  <span class="stringliteral">&quot;./outfile.txt&quot;</span>;
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: INIFILE NOT FOUND\n&quot;</span>);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac91a85e76f8b9506303f5992fe72d018"></a><!-- doxytag: member="rlCanOpen::refreshMappingList" ref="ac91a85e76f8b9506303f5992fe72d018" args="(int _boardnr, int _nodeid, int _pdoID, int _pdoDirection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::refreshMappingList </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdoID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdoDirection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>if the user changes the mapping of a node using SDO functions, the internal mapping list should be changed </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00917">917</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">//rlDebugPrintf(&quot;refresh mappinglist1\n&quot;);</span>
  <span class="keywordtype">int</span> nodeindex;
  <span class="keywordtype">int</span> madress=0;
  
   
    madress = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;
                pdoList[_pdoDirection][_pdoID -1]-&gt;mappingOvAdress;
      
  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== <span class="keyword">false</span>) 
  {
    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! refresh \</span>
<span class="stringliteral">                          mapping list failed! BoardId: %d NodeId: %d \</span>
<span class="stringliteral">                          PDO ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdoID);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
    <span class="keywordflow">return</span> 0;
  }
  
 
  <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_pdoDirection].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdoID)
  {
    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO does not exist! refresh \</span>
<span class="stringliteral">                          mapping list failed! BoardId: %d NodeId: %d \</span>
<span class="stringliteral">                          PDO ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdoID);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
    <span class="keywordflow">return</span> 0;
  }
   
  <span class="comment">//append Mapping data                                 </span>
  <a class="code" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> sdobuffer;                            
  <span class="keywordtype">int</span> mappingcount;
  <a class="code" href="structrlCanMapping.html" title="mapping object which is part of the mappinglist of a PDO">rlCanMapping</a> * mappingobject; 
                                            
  <span class="comment">//get mapping count                       </span>
  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713" title="read a certain object from the object dictionary of a node">sdo_read</a>(_boardnr,_nodeid,madress,0,sdobuffer) == 0){
    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: read sdo data! refresh mapping list failed! \</span>
<span class="stringliteral">                          BoardId: %d NodeId: %d PDO ID: %d \n&quot;</span>, 
                          _boardnr, _nodeid, _pdoID);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
  }
  
  mappingcount = sdobuffer.<a class="code" href="classrlCanOpenTypes.html#ab94c175fc5b094f3a0e259266e1d7f85" title="returns databuffer-content as uchar type">get_uchar</a>();   
  
  sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;Current mappingcount: %d\n&quot;</span>, mappingcount);
  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);                                           
  
  <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_pdoDirection][_pdoID-1]-&gt;
                  mappingList.resize(mappingcount);

  <span class="keywordtype">int</span> currentposition = 0;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mcount = 1; mcount &lt;= mappingcount;mcount++)  <span class="comment">//each mappingobject</span>
  {
    mappingobject = <span class="keyword">new</span> <a class="code" href="structrlCanMapping.html" title="mapping object which is part of the mappinglist of a PDO">rlCanMapping</a>;  <span class="comment">//create new mappingobject in memory</span>
    mappingobject-&gt;<a class="code" href="structrlCanMapping.html#adfeb435b465421c10a527f0e03643cfd" title="the mapping ID determines the mapping object within the PDO (1 to n)">mappingId</a> = mcount;
        
   
   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713" title="read a certain object from the object dictionary of a node">sdo_read</a>(_boardnr,_nodeid,madress,mcount,sdobuffer) == 0){
     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: read sdo data! refresh mapping list failed! \</span>
<span class="stringliteral">                           BoardId: %d NodeId: %d PDO ID: %d \n&quot;</span>, 
                           _boardnr, _nodeid, _pdoID);
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
     <span class="comment">//cout&lt;&lt;&quot;Error during create Mappinglist!\n&quot;;</span>
    }
       
    <span class="comment">//get length of mapping object</span>
    <span class="keywordtype">int</span> mlength  = sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(0);
    mappingobject-&gt;<a class="code" href="structrlCanMapping.html#a6e1cb25d9777c0a5b6a9615ba54b4eb9" title="length of mappend object in bits">length</a> = mlength;
    
    <span class="comment">//calculate the mapping position</span>
    <span class="keywordflow">if</span> (mcount&gt;1)
      mappingobject-&gt;<a class="code" href="structrlCanMapping.html#adc9982e23260fae2c13bca8ed916b278" title="its position in within the 8Byte">position</a> = currentposition;         
    <span class="keywordflow">else</span>       
      mappingobject-&gt;<a class="code" href="structrlCanMapping.html#adc9982e23260fae2c13bca8ed916b278" title="its position in within the 8Byte">position</a> = 0;           
    currentposition+=mlength;
    
    <span class="comment">// get the ov adress of the current mapped object</span>
    <span class="keywordtype">int</span> mi  = (int) (sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(3)*pow(256,1) 
                                          + sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(2));
                                          
    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msi = sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(1);
        
    <a class="code" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> temptype;
    mappingobject-&gt;<a class="code" href="structrlCanMapping.html#a0bf5454714c486432b1881371cb8cede" title="its current type (int32, float, char, ...)">etype</a> = temptype.<a class="code" href="classrlCanOpenTypes.html#a5fa2427f1c611d5ea95b02ec71e483cc" title="Function for typenumber conversion.">canOpenType2DeamonType</a>
                           (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;objecttype(mi, msi));
        
    <span class="comment">// insert the mappingobject to mappinglist</span>
    <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_pdoDirection][_pdoID-1]-&gt;
                         mappingList.insert(mcount-1,mappingobject);
       
  }
  <span class="keywordflow">return</span> 1;                                                   
}                                                               
</pre></div>
</div>
</div>
<a class="anchor" id="ac65b49a7d5677c354cd73c6980687219"></a><!-- doxytag: member="rlCanOpen::restartBoard" ref="ac65b49a7d5677c354cd73c6980687219" args="(int _boardnr, int _restarttype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::restartBoard </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_restarttype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>using this function you are able to restart a CanOpenMaster board </p>
<p>Using this function you are able to restart a CanOpenMaster board (device). There are 3 possibly kinds of restarting the master: coldstart, warmstart, bootstart. The corresponding '#defines' are declared in canopenstructs.h Hilscher specific function (so no CanOpoen services) are used to execute this command </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01114">1114</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
   <span class="comment">//COLDSTART           2</span>
   <span class="comment">//WARMSTART           3</span>
   <span class="comment">//BOOTSTART           4</span>
   
   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevReset(_boardnr, _restarttype, 5000L) != DRV_NO_ERROR ))
  {
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;restart failed!\n&quot;</span>);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;DevReset(%d, Restart, 5000): %d\n&quot;</span>, _boardnr, <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
    <span class="keywordflow">return</span> 0;
  }
  
   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;restart successfully\n&quot;</span>);
   <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0a0e5e4328ff82cc5a7de3e8fa9c9713"></a><!-- doxytag: member="rlCanOpen::sdo_read" ref="a0a0e5e4328ff82cc5a7de3e8fa9c9713" args="(int _boardnr, int _nodeid, int _objectindex, int _subindex, rlCanOpenTypes &amp;_sdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::sdo_read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_objectindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_subindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_sdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>read a certain object from the object dictionary of a node </p>
<p>using the sdo_read function you can read a certain object from the object dictionary of a node. For this the SDO (Service Data Object) service will be used. The enquired object will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. To read out the correct value from this class use one of the get_TYPE() {e.g. get_int() } functions. You can assert the type in the class using <a class="el" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">rlCanOpenTypes::get_DaemonType()</a>; if sdo_read failures the current error can be read out using <a class="el" href="classrlCanOpenTypes.html#a8e213475ba049fe418aa703354e797eb" title="returns current errnumber">rlCanOpenTypes::get_rlmsgerr()</a> </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00332">332</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> datalength;
    <span class="keywordtype">int</span> canopentype;
    <span class="keywordtype">int</span> nodeindex; 
    
    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
    {
      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified node does not exist! SDO write failed!&quot;</span>);
      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Objektindex: %d Subindex: %d\n&quot;</span>, 
        _boardnr, _nodeid, _objectindex, _subindex);
        
      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
      <span class="keywordflow">return</span> 0;
    }


    <a class="code" href="classrlCanOpen.html#ae03cba7206676285f6639b7f744312b4" title="clear message struct by setting all elements to zero">delmsg</a>();
    <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);
    
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx          = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx          = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln          = 8;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr          = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a           = 0; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f           = 0;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b           = <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e           = 0;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr  = _nodeid;  
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area   = 0; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr    = _objectindex; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx    = _subindex; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt    = 0; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type   = 0; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function    = <a class="code" href="rlcanopenstructs_8h.html#a57374c705ca0846e8d00c1036c1d2cbd">TASK_TFC_READ</a>; 
 
   <span class="keywordflow">if</span>(DevPutMessage(0, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,5000L) != DRV_NO_ERROR) <span class="keywordflow">return</span> 0;
   
   <a class="code" href="classrlCanOpen.html#ae03cba7206676285f6639b7f744312b4" title="clear message struct by setting all elements to zero">delmsg</a>();
   <span class="comment">// receive the answer</span>
  
   <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage( <a class="code" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae" title="returns the number of currently active board">getActiveBoard</a>(),                       <span class="comment">// Device Number            </span>
                         <span class="keyword">sizeof</span>(message), 
                         (MSG_STRUC *)&amp;message,   <span class="comment">// Pointer to user buffer  </span>
                         2000L );                 <span class="comment">// Timeout   </span>
   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msgnrlocal;
   msgnrlocal = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> - 1;                       
   
   <span class="comment">// receive correct answer   </span>
   <span class="keywordflow">if</span>((message.a == <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>)&amp;&amp;(message.nr == msgnrlocal)){ 
      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(message.f);
      <span class="keywordflow">if</span> (message.f == <a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>) <span class="comment">// node active, no error</span>
      {
        canopentype=<a class="code" href="classrlCanOpen.html#abab868b55f7b1bc5e14c9185e711d5e7" title="returns daemontype number of a specific object">getObjectType</a>(_boardnr, _nodeid, _objectindex, _subindex);
        <span class="keywordflow">if</span> (canopentype!=<a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3ac2f64996a25d15c3ce264c93ee7d3f70">rlCanOpenTypes::RL_NOTYPE</a>){
          _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ab20336305ab86cb7f70ba7d082db6741" title="recieves an CANopen typenumber and returns appropiate RL-Type">set_CanOpenType</a>(canopentype);
          datalength = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ab9855e0b33acd508a2a87b8c45655d70" title="returns number of bytes used for current type">getLength</a>();
        }
        <span class="keywordflow">else</span> 
        {
          _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a45061bf88af2c0f0a09e163b37f6affc" title="alternative setter receives integer typenumber">set_DaemonType</a>(<a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3a229debf1ae9bd7aa4fd5955de94b6433">rlCanOpenTypes::RL_BUFFER</a>);
          datalength = <a class="code" href="rlcanopenstructs_8h.html#a4d267be232afc6e35e9cc9a4a1987293">MAX_SDO_BUFFERSIZE</a>;
        }
        _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a071fb679e9956c9c5a46c633e29b784c" title="sets all bytes in databuffer to zero">clearBuffer</a>();   
        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; datalength; i++)
          _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ae679e810361bd26aed31a5458daa4ef5" title="transfer raw data into the databuffer">set_buffer</a>(i, message.d[i]);         
        
        <span class="comment">// if CanOpen-Type is a twistet integer (etc. 52Bit ) the value will be converted</span>
        <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a>(canopentype)) &amp;&amp; (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()))
          _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a57a8d0945c14a3e868c9da3c34a26ec0">translate_CanOpenType</a>(canopentype);
        
        <span class="keywordflow">return</span> 1;
      }
      <span class="keywordflow">else</span>
      {
        <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;message.f = %d  message.f = %x Hex \n&quot;</span>, message.f, message.f);
      }
    }
    <span class="keywordflow">else</span>
    {
      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;message.a = %d message.nr = %d vergleich mit: %d\n&quot;</span>, 
         message.a, message.nr, msgnrlocal);
         
      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(-1);
    }
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR during read SDO message!&quot;</span>);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Obj: %x Sub: %x\n&quot;</span>, 
      _boardnr, _nodeid, _objectindex, _subindex);
      
      
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afe214122e51cdd214d586ef1b50a5b34"></a><!-- doxytag: member="rlCanOpen::sdo_write" ref="afe214122e51cdd214d586ef1b50a5b34" args="(int _boardnr, int _nodeid, int _objectindex, int _subindex, rlCanOpenTypes &amp;_sdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::sdo_write </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_objectindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_subindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_sdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>write data into a certain object from the object dictionary of a node </p>
<p>using the sdo_write function you can write to a certain object from the object dictionary of a node. For this the SDO (Service Data Object) Service will be used. The relevant data must be written into the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class before. To write the data into the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class use one of the datatype depending functions like <a class="el" href="classrlCanOpenTypes.html#ab592a58ab2a143018b778a66f93e3d43" title="sets type to RL_INT and stores passed parameter data in databuffer">rlCanOpenTypes::set_int(int _value)</a>; if sdo_write failures the current error can be read out using <a class="el" href="classrlCanOpenTypes.html#a8e213475ba049fe418aa703354e797eb" title="returns current errnumber">rlCanOpenTypes::get_rlmsgerr()</a> </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00431">431</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> length;
    <span class="keywordtype">int</span> pdoid;
    length = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ab9855e0b33acd508a2a87b8c45655d70" title="returns number of bytes used for current type">getLength</a>();
    <span class="keywordtype">int</span> nodeindex;
    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
    {
      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified node does not exist! SDO write failed!&quot;</span>);
      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Objektindex: %d Subindex: %d\n&quot;</span>, 
        _boardnr, _nodeid, _objectindex, _subindex);
      
      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
      <span class="keywordflow">return</span> 0;
    }
    
    <span class="comment">// if CanOpen-Type is a twistet integer (etc. 52Bit ) the datalength must be adjusted</span>
    <span class="keywordtype">int</span> canopentype = <a class="code" href="classrlCanOpen.html#abab868b55f7b1bc5e14c9185e711d5e7" title="returns daemontype number of a specific object">getObjectType</a>(_boardnr, _nodeid, _objectindex, _subindex);
   
    <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a>(canopentype)) &amp;&amp; (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()))
      length = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a9d93e04857e7351221b4cd0f1adf4efe">get_CanOpenTypeLength</a>(canopentype);
   
     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0;i&lt;length;i++)
        <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[i] = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(i);

    
    <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);
    
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx          = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx          = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln          = 8+ length;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr          = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a           = 0; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f           = 0;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b           = <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e           = 0;
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr  = _nodeid;  
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area   = 0; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr    = _objectindex; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx    = _subindex; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt    = length; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type   = 0; 
    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function    = <a class="code" href="rlcanopenstructs_8h.html#ab710ffcc49def608b33679e823c8e0c4">TASK_TFC_WRITE</a>; 
    
    <span class="keywordflow">if</span>(DevPutMessage(0, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,5000L) != DRV_NO_ERROR) <span class="keywordflow">return</span> 0;
         
    
  <span class="comment">// receive the answer</span>
  
  <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage ( _boardnr,                <span class="comment">// Device Number            </span>
                         <span class="keyword">sizeof</span>(message), 
                         (MSG_STRUC *)&amp;message,   <span class="comment">// Pointer to user buffer  </span>
                         2000L );                 <span class="comment">// Timeout   </span>
   
   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msgnrlocal = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> - 1;
   
   <span class="comment">// receive correct answer   </span>
   <span class="keywordflow">if</span>((message.a == <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>)&amp;&amp;(message.nr == msgnrlocal)){  
      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(message.f);
      <span class="keywordflow">if</span> (message.f == <a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>) <span class="comment">// node active, no error</span>
      {
        <span class="comment">//check if the mapping has changed</span>
        <span class="keywordflow">if</span>( (_objectindex &gt;= <a class="code" href="rlcanopenstructs_8h.html#a330bcfdaa91e6b28214c6f729e953887">TRANSMIT_PDO_MAPPING_STARTADRESS</a>) &amp;&amp;
            (_objectindex &lt;= <a class="code" href="rlcanopenstructs_8h.html#ae409747bccc82f0f5c4c41fede2c0c7a">TRANSMIT_PDO_MAPPING_MAXADRESS</a>) &amp;&amp; 
            (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()) )
        { 
          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Mapping has changed: boardid %d, nodeid %d, objectindex %x\n&quot;</span>, 
            _boardnr, _nodeid, _objectindex);
            
          pdoid = <a class="code" href="classrlCanOpen.html#a07a517a30bff32985a1e54a4787e1006" title="return PdoId of mapped object.">getPdoID</a>(_boardnr, _nodeid, _objectindex, <a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>);
          <a class="code" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a>(_boardnr,_nodeid,pdoid,<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (_objectindex &gt;= <a class="code" href="rlcanopenstructs_8h.html#ac3149ff3f10f094a76671d481773ba1a">RECEIVE_PDO_MAPPING_STARTADRESS</a>) &amp;&amp; 
                  (_objectindex &lt;= <a class="code" href="rlcanopenstructs_8h.html#aec05da2dc4c26fb5ca45cd2bffd2ae9f">RECEIVE_PDO_MAPPING_MAXADRESS</a>) &amp;&amp;
                  (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()) )
        {
          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Mapping has changed: boardid %d, nodeid %d, objectindex %x\n&quot;</span>, 
            _boardnr, _nodeid, _objectindex);
          pdoid = <a class="code" href="classrlCanOpen.html#a07a517a30bff32985a1e54a4787e1006" title="return PdoId of mapped object.">getPdoID</a>(_boardnr, _nodeid, _objectindex, <a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>);
          <a class="code" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a>(_boardnr,_nodeid,pdoid,<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>);
        }
        <span class="keywordflow">return</span> 1;
      }
      <span class="keywordflow">else</span>
      {
        sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;message.f = %d  message.f = %x Hex \n&quot;</span>, 
          message.f, message.f);
          
        <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
        _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(message.f);
      }
    }
    <span class="keywordflow">else</span>
    {
      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(-1);
      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;message.a = %d message.nr = %d vergleich mit: %d\n&quot;</span>, 
        message.a, message.nr, msgnrlocal);
        
      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
    }
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR during read SDO message!&quot;</span>);
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Obj: %x Sub: %x\n&quot;</span>, 
      _boardnr, _nodeid, _objectindex, _subindex);
      
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3b59ba388442d8ccf33f0f031752f6cd"></a><!-- doxytag: member="rlCanOpen::sendNMTCommand" ref="a3b59ba388442d8ccf33f0f031752f6cd" args="(int _boardnr, int _nodeid, unsigned char _cmd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::sendNMTCommand </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>_cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send a NMT Command to one or all nodes (of one board) </p>
<p>Using this function you can send a NMT Command to one or all nodes (of one board). NMT (Network Management) is a CanOpen service. Because of the device there are constrictions for the user. You can only execute the follow NMT commands: START_REMOTE_NODE, STOP_REMOTE_NODE, ENTER_PREOPERATIONAL, RESET_NODE, RESET_COMMUNICATION The corresponding '#defines' are declared in canopenstructs.h </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01132">1132</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  MSG_STRUC <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>;
  <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);
  
  message.rx = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>         ;<span class="comment">//receiver = user at HOST</span>
  message.tx = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>     ;<span class="comment">// transmitter = USR_INTF-Task</span>
  message.ln = 2                ;<span class="comment">//length of message</span>
  message.nr = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++      ;<span class="comment">//number of the message</span>
  message.a  = 0                ;<span class="comment">//no answer</span>
  message.f  = 0                ;<span class="comment">//error, status</span>
  message.b  = <a class="code" href="rlcanopenstructs_8h.html#a37f659f732180aa50171e6aee00f2a1d">CMD_NMT_Module_Protocol</a>;<span class="comment">//command = COM_Node_Diag</span>
  message.e =  0                ;<span class="comment">//extension</span>

        <span class="comment">// NMT Command specifier</span>
        <span class="comment">//1     Start Remote Node</span>
        <span class="comment">//2     Stop Remote Node</span>
        <span class="comment">//128   Enter Pre-Operational</span>
        <span class="comment">//129   Reset Node</span>
        <span class="comment">//130   Reset Communication</span>
  message.data[0] = _cmd                ;<span class="comment">//NMT Command specifier</span>
  message.data[1] = _nodeid     ;<span class="comment">//NodeID</span>
  
   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevPutMessage(_boardnr, (MSG_STRUC *)&amp;message, 5000L)) 
         == DRV_NO_ERROR )
 {
   <span class="keywordflow">while</span>( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage(_boardnr, <span class="keyword">sizeof</span>(message), 
                               (MSG_STRUC *)&amp;message, 0)) 
           == DRV_DEV_GET_NO_MESSAGE )
   {
     <span class="keywordflow">continue</span>;
   }
   <span class="keywordflow">if</span> ( <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> == DRV_NO_ERROR )
   {
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;NMT message successfully received\n&quot;</span>);
     <span class="comment">// continue;</span>
   }
   <span class="keywordflow">else</span>
   {
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Error  Message (f = %d))\n&quot;</span>,message.f);
     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevGetMessage(%d, sizeof(message), &amp;message, 500): %d\n&quot;</span>,
             _boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
     
     <span class="keywordflow">return</span> 0;
    }
  }
  <span class="keywordflow">else</span>
  {
    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevPutMessage(NMT)(%d, &amp;message, 5000): %d\n&quot;</span>,_boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
    <span class="keywordflow">return</span> 0;
  } <span class="comment">/* if ( (sRet = DevPutMessage(...)) == DRV_NO_ERROR ) else */</span>
  
  <span class="keywordflow">return</span> 1;     
}
</pre></div>
</div>
</div>
<a class="anchor" id="a75581c22eb7264ed2926e535835f1f61"></a><!-- doxytag: member="rlCanOpen::setBoardActive" ref="a75581c22eb7264ed2926e535835f1f61" args="(int _boardnr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short rlCanOpen::setBoardActive </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>sets a desired CanOpenMaster active, so that it can be used </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00285">285</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
                        
  <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevSetHostState( _boardnr, HOST_READY, 0L) == DRV_NO_ERROR) )   
    <a class="code" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72" title="the currently active board">activeboard</a> = _boardnr;
 
  <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af8071fb948b6862ec7444e4f9b33b679"></a><!-- doxytag: member="rlCanOpen::showNodeConfiguration" ref="af8071fb948b6862ec7444e4f9b33b679" args="(int _boardnr, int _nodeid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::showNodeConfiguration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>prints out the configuration of a specific node </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00303">303</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size(); i++)
  {
    <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getNodeID() == _nodeid) &amp;&amp; 
        (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getBoardID() == _boardnr))
    {
      <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;showConfiguration();
      <span class="keywordflow">return</span> <span class="keyword">true</span>;
      
    }           
  }

  <span class="keywordflow">return</span> <span class="keyword">false</span>; 
} 
</pre></div>
</div>
</div>
<a class="anchor" id="afb672e8a6cd805cd5ed902fb740a6f3e"></a><!-- doxytag: member="rlCanOpen::showNodeConfiguration" ref="afb672e8a6cd805cd5ed902fb740a6f3e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::showNodeConfiguration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>prints out the configuration off all available nodes from all boards </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00320">320</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size() == 0) <span class="keywordflow">return</span> 0;
  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size(); i++)
  {
    <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;showConfiguration();   
  }
   <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="af6158583052812792b8036d631d95a72"></a><!-- doxytag: member="rlCanOpen::activeboard" ref="af6158583052812792b8036d631d95a72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72">rlCanOpen::activeboard</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the currently active board </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00219">219</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3eff7e93db293eb999c1accf78d56e24"></a><!-- doxytag: member="rlCanOpen::boardcount" ref="a3eff7e93db293eb999c1accf78d56e24" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24">rlCanOpen::boardcount</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the current count of CanOpenMaster cards </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00253">253</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac61d9cf8e555c36c2b558cda10e9193f"></a><!-- doxytag: member="rlCanOpen::enableLogging" ref="ac61d9cf8e555c36c2b558cda10e9193f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">rlCanOpen::enableLogging</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>this indicator is true when stdout is redirected to file. it is set in the ini-file </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00281">281</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae49809a8c8792a84afdbaf5339ccfc56"></a><!-- doxytag: member="rlCanOpen::err_fp" ref="ae49809a8c8792a84afdbaf5339ccfc56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE* <a class="el" href="classrlCanOpen.html#ae49809a8c8792a84afdbaf5339ccfc56">rlCanOpen::err_fp</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to error logfile. </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00241">241</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a64a5fceff2c1c9d97a319eab86b07431"></a><!-- doxytag: member="rlCanOpen::err_out_buf" ref="a64a5fceff2c1c9d97a319eab86b07431" args="[255]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431">rlCanOpen::err_out_buf</a>[255]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this string buffer is usually written with sprintf before sent to stdout </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00235">235</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0547463787b69513660fefb1f5b5848d"></a><!-- doxytag: member="rlCanOpen::logFileName" ref="a0547463787b69513660fefb1f5b5848d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString <a class="el" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d">rlCanOpen::logFileName</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>name of logfile stdout is redirected to </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00244">244</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a86ad06349b70e8d0fceaeb06efa362f1"></a><!-- doxytag: member="rlCanOpen::message" ref="a86ad06349b70e8d0fceaeb06efa362f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RCS_MESSAGETELEGRAM_10 <a class="el" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1">rlCanOpen::message</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>hilscher specific message structur which will be sent to the master card </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00247">247</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8bc3d3346fdb9e64c6bc041fcac19b76"></a><!-- doxytag: member="rlCanOpen::messagenr" ref="a8bc3d3346fdb9e64c6bc041fcac19b76" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76">rlCanOpen::messagenr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>message counter </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00256">256</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6fe4e7245881d141b63f42ea46f9fd72"></a><!-- doxytag: member="rlCanOpen::nodelist" ref="a6fe4e7245881d141b63f42ea46f9fd72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QPtrVector&lt;<a class="el" href="classrlCanNode.html">rlCanNode</a>&gt; <a class="el" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72">rlCanOpen::nodelist</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this list contains all nodes from all boards </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00250">250</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1c40a2fc97d124fafe75c2f58c121f25"></a><!-- doxytag: member="rlCanOpen::sRet" ref="a1c40a2fc97d124fafe75c2f58c121f25" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short <a class="el" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25">rlCanOpen::sRet</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return value for hilscher specific message functions </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00238">238</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a></li>
<li><a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
