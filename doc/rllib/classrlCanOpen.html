<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>rllib: rlCanOpen Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">rllib
   &#160;<span id="projectnumber">1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">rlCanOpen Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>main class which provides canopen API functions and manages all nodes.  
 <a href="classrlCanOpen.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>&gt;</code></p>

<p><a href="classrlCanOpen-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a543e78ab2f7dfc71c8967babc4537400"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a543e78ab2f7dfc71c8967babc4537400">rlCanOpen</a> ()</td></tr>
<tr class="memitem:abb1f2ae469b8669e92de89225fe7cc29"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#abb1f2ae469b8669e92de89225fe7cc29">rlCanOpen</a> (char *_inifilename)</td></tr>
<tr class="memitem:a5d6f4e64167fb38d3fb670381c483852"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a5d6f4e64167fb38d3fb670381c483852">~rlCanOpen</a> ()</td></tr>
<tr class="memitem:ad17ae29368457cd075e57d82140de997"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ad17ae29368457cd075e57d82140de997">getBoardCount</a> ()</td></tr>
<tr class="memdesc:ad17ae29368457cd075e57d82140de997"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the number of available boards  <a href="#ad17ae29368457cd075e57d82140de997"></a><br/></td></tr>
<tr class="memitem:a3e7b87154134ee74f2a7611a3b931dae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae">getActiveBoard</a> ()</td></tr>
<tr class="memdesc:a3e7b87154134ee74f2a7611a3b931dae"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the number of currently active board  <a href="#a3e7b87154134ee74f2a7611a3b931dae"></a><br/></td></tr>
<tr class="memitem:af8071fb948b6862ec7444e4f9b33b679"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#af8071fb948b6862ec7444e4f9b33b679">showNodeConfiguration</a> (int _boardnr, int _nodeid)</td></tr>
<tr class="memdesc:af8071fb948b6862ec7444e4f9b33b679"><td class="mdescLeft">&#160;</td><td class="mdescRight">prints out the configuration of a specific node  <a href="#af8071fb948b6862ec7444e4f9b33b679"></a><br/></td></tr>
<tr class="memitem:afb672e8a6cd805cd5ed902fb740a6f3e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#afb672e8a6cd805cd5ed902fb740a6f3e">showNodeConfiguration</a> ()</td></tr>
<tr class="memdesc:afb672e8a6cd805cd5ed902fb740a6f3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">prints out the configuration off all available nodes from all boards  <a href="#afb672e8a6cd805cd5ed902fb740a6f3e"></a><br/></td></tr>
<tr class="memitem:a0a0e5e4328ff82cc5a7de3e8fa9c9713"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713">sdo_read</a> (int _boardnr, int _nodeid, int _objectindex, int _subindex, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_sdo_data)</td></tr>
<tr class="memdesc:a0a0e5e4328ff82cc5a7de3e8fa9c9713"><td class="mdescLeft">&#160;</td><td class="mdescRight">read a certain object from the object dictionary of a node  <a href="#a0a0e5e4328ff82cc5a7de3e8fa9c9713"></a><br/></td></tr>
<tr class="memitem:afe214122e51cdd214d586ef1b50a5b34"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#afe214122e51cdd214d586ef1b50a5b34">sdo_write</a> (int _boardnr, int _nodeid, int _objectindex, int _subindex, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_sdo_data)</td></tr>
<tr class="memdesc:afe214122e51cdd214d586ef1b50a5b34"><td class="mdescLeft">&#160;</td><td class="mdescRight">write data into a certain object from the object dictionary of a node  <a href="#afe214122e51cdd214d586ef1b50a5b34"></a><br/></td></tr>
<tr class="memitem:a73a3479ae9754495e17aa6591dbf135e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a73a3479ae9754495e17aa6591dbf135e">pdo_receive</a> (int _boardnr, int _nodeid, int _pdonr, int _mappingnr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr class="memdesc:a73a3479ae9754495e17aa6591dbf135e"><td class="mdescLeft">&#160;</td><td class="mdescRight">using the pdo_receive function you can receive a mapped object within PDO  <a href="#a73a3479ae9754495e17aa6591dbf135e"></a><br/></td></tr>
<tr class="memitem:aad8dd8baeb1b1caf32b38528b5039060"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aad8dd8baeb1b1caf32b38528b5039060">pdo_receive</a> (int _boardnr, int _nodeid, int _pdonr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr class="memdesc:aad8dd8baeb1b1caf32b38528b5039060"><td class="mdescLeft">&#160;</td><td class="mdescRight">using the pdo_receive function you can receive a PDO (Process Data Object)  <a href="#aad8dd8baeb1b1caf32b38528b5039060"></a><br/></td></tr>
<tr class="memitem:aa0af0f6576ec284128e9c3efb4770ca2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aa0af0f6576ec284128e9c3efb4770ca2">pdo_transmit</a> (int _boardnr, int _nodeid, int _pdonr, int _mappingnr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr class="memdesc:aa0af0f6576ec284128e9c3efb4770ca2"><td class="mdescLeft">&#160;</td><td class="mdescRight">transmit a mapped object within a PDO to a specific node  <a href="#aa0af0f6576ec284128e9c3efb4770ca2"></a><br/></td></tr>
<tr class="memitem:a813d45bf60088fc0d4fcd70264a7dbe1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a813d45bf60088fc0d4fcd70264a7dbe1">pdo_transmit</a> (int _boardnr, int _nodeid, int _pdonr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr class="memdesc:a813d45bf60088fc0d4fcd70264a7dbe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">transmit a 8 Byte PDO to a specific node  <a href="#a813d45bf60088fc0d4fcd70264a7dbe1"></a><br/></td></tr>
<tr class="memitem:a79e0198f870d1c405d4b692628133252"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252">getNodeIndex</a> (int _boardnr, int _nodeid, int &amp;_index)</td></tr>
<tr class="memdesc:a79e0198f870d1c405d4b692628133252"><td class="mdescLeft">&#160;</td><td class="mdescRight">this function returns the listindex of a desired node  <a href="#a79e0198f870d1c405d4b692628133252"></a><br/></td></tr>
<tr class="memitem:abab868b55f7b1bc5e14c9185e711d5e7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#abab868b55f7b1bc5e14c9185e711d5e7">getObjectType</a> (int _boardnr, int _nodeid, int _objectindex, int _subindex)</td></tr>
<tr class="memdesc:abab868b55f7b1bc5e14c9185e711d5e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns daemontype number of a specific object  <a href="#abab868b55f7b1bc5e14c9185e711d5e7"></a><br/></td></tr>
<tr class="memitem:aef2160067fb768dc63c038fa0abc0f4d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aef2160067fb768dc63c038fa0abc0f4d">getNodeState</a> (int _boardnr, int _nodeid, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_data)</td></tr>
<tr class="memdesc:aef2160067fb768dc63c038fa0abc0f4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">use this function to get information about a specific node  <a href="#aef2160067fb768dc63c038fa0abc0f4d"></a><br/></td></tr>
<tr class="memitem:ac65b49a7d5677c354cd73c6980687219"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac65b49a7d5677c354cd73c6980687219">restartBoard</a> (int _boardnr, int _restarttype)</td></tr>
<tr class="memdesc:ac65b49a7d5677c354cd73c6980687219"><td class="mdescLeft">&#160;</td><td class="mdescRight">using this function you are able to restart a CanOpenMaster board  <a href="#ac65b49a7d5677c354cd73c6980687219"></a><br/></td></tr>
<tr class="memitem:a3b59ba388442d8ccf33f0f031752f6cd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a3b59ba388442d8ccf33f0f031752f6cd">sendNMTCommand</a> (int _boardnr, int _nodeid, unsigned char _cmd)</td></tr>
<tr class="memdesc:a3b59ba388442d8ccf33f0f031752f6cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a NMT Command to one or all nodes (of one board)  <a href="#a3b59ba388442d8ccf33f0f031752f6cd"></a><br/></td></tr>
<tr class="memitem:afe931676649e9b5be1d244a3fc8f1b61"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a> (int _canopentype)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a464c2a31796b3c816f6282e1df12f7f7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a464c2a31796b3c816f6282e1df12f7f7">getNodeConfiguration</a> (int _nodeID)</td></tr>
<tr class="memitem:a07a517a30bff32985a1e54a4787e1006"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a07a517a30bff32985a1e54a4787e1006">getPdoID</a> (int _boardnr, int _nodeid, int _objektindex, int _direction)</td></tr>
<tr class="memdesc:a07a517a30bff32985a1e54a4787e1006"><td class="mdescLeft">&#160;</td><td class="mdescRight">return PdoId of mapped object.  <a href="#a07a517a30bff32985a1e54a4787e1006"></a><br/></td></tr>
<tr class="memitem:a2ee4ce66da6eac2f80309f968e1a49fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a2ee4ce66da6eac2f80309f968e1a49fe">read_inifile</a> (const char *_filename)</td></tr>
<tr class="memdesc:a2ee4ce66da6eac2f80309f968e1a49fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">read properties of inifile  <a href="#a2ee4ce66da6eac2f80309f968e1a49fe"></a><br/></td></tr>
<tr class="memitem:aab75d58a1776264647ee87df5972f921"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921">ini</a> ()</td></tr>
<tr class="memdesc:aab75d58a1776264647ee87df5972f921"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize nodes and create nodelist  <a href="#aab75d58a1776264647ee87df5972f921"></a><br/></td></tr>
<tr class="memitem:ae03cba7206676285f6639b7f744312b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ae03cba7206676285f6639b7f744312b4">delmsg</a> ()</td></tr>
<tr class="memdesc:ae03cba7206676285f6639b7f744312b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">clear message struct by setting all elements to zero  <a href="#ae03cba7206676285f6639b7f744312b4"></a><br/></td></tr>
<tr class="memitem:af2ed347a61f28ad445ba615d6e82e2d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#af2ed347a61f28ad445ba615d6e82e2d8">iniboards</a> ()</td></tr>
<tr class="memdesc:af2ed347a61f28ad445ba615d6e82e2d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read informations about installed devices.  <a href="#af2ed347a61f28ad445ba615d6e82e2d8"></a><br/></td></tr>
<tr class="memitem:a75581c22eb7264ed2926e535835f1f61"><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61">setBoardActive</a> (int _boardnr)</td></tr>
<tr class="memdesc:a75581c22eb7264ed2926e535835f1f61"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets a desired CanOpenMaster active, so that it can be used  <a href="#a75581c22eb7264ed2926e535835f1f61"></a><br/></td></tr>
<tr class="memitem:ac91a85e76f8b9506303f5992fe72d018"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a> (int _boardnr, int _nodeid, int _pdoID, int _pdoDirection)</td></tr>
<tr class="memitem:ac05ad772d2766154831c90bc17877de8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac05ad772d2766154831c90bc17877de8">createNodes</a> ()</td></tr>
<tr class="memdesc:ac05ad772d2766154831c90bc17877de8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for nodes in all boards and append it into the nodelist.  <a href="#ac05ad772d2766154831c90bc17877de8"></a><br/></td></tr>
<tr class="memitem:a992c869dba69a39723309bbc960db2a8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a992c869dba69a39723309bbc960db2a8">createMappingObjects</a> (int _boardid, int _nodeid, int _pdoDirection)</td></tr>
<tr class="memdesc:a992c869dba69a39723309bbc960db2a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">this function writes the mapping objects for each pdo of a node  <a href="#a992c869dba69a39723309bbc960db2a8"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:af6158583052812792b8036d631d95a72"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72">activeboard</a></td></tr>
<tr class="memdesc:af6158583052812792b8036d631d95a72"><td class="mdescLeft">&#160;</td><td class="mdescRight">the currently active board  <a href="#af6158583052812792b8036d631d95a72"></a><br/></td></tr>
<tr class="memitem:a64a5fceff2c1c9d97a319eab86b07431"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431">err_out_buf</a> [255]</td></tr>
<tr class="memdesc:a64a5fceff2c1c9d97a319eab86b07431"><td class="mdescLeft">&#160;</td><td class="mdescRight">this string buffer is usually written with sprintf before sent to stdout  <a href="#a64a5fceff2c1c9d97a319eab86b07431"></a><br/></td></tr>
<tr class="memitem:a1c40a2fc97d124fafe75c2f58c121f25"><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25">sRet</a></td></tr>
<tr class="memdesc:a1c40a2fc97d124fafe75c2f58c121f25"><td class="mdescLeft">&#160;</td><td class="mdescRight">return value for hilscher specific message functions  <a href="#a1c40a2fc97d124fafe75c2f58c121f25"></a><br/></td></tr>
<tr class="memitem:ae49809a8c8792a84afdbaf5339ccfc56"><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ae49809a8c8792a84afdbaf5339ccfc56">err_fp</a></td></tr>
<tr class="memdesc:ae49809a8c8792a84afdbaf5339ccfc56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to error logfile.  <a href="#ae49809a8c8792a84afdbaf5339ccfc56"></a><br/></td></tr>
<tr class="memitem:a0547463787b69513660fefb1f5b5848d"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d">logFileName</a></td></tr>
<tr class="memdesc:a0547463787b69513660fefb1f5b5848d"><td class="mdescLeft">&#160;</td><td class="mdescRight">name of logfile stdout is redirected to  <a href="#a0547463787b69513660fefb1f5b5848d"></a><br/></td></tr>
<tr class="memitem:a86ad06349b70e8d0fceaeb06efa362f1"><td class="memItemLeft" align="right" valign="top">RCS_MESSAGETELEGRAM_10&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1">message</a></td></tr>
<tr class="memdesc:a86ad06349b70e8d0fceaeb06efa362f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">hilscher specific message structur which will be sent to the master card  <a href="#a86ad06349b70e8d0fceaeb06efa362f1"></a><br/></td></tr>
<tr class="memitem:a6fe4e7245881d141b63f42ea46f9fd72"><td class="memItemLeft" align="right" valign="top">QPtrVector&lt; <a class="el" href="classrlCanNode.html">rlCanNode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72">nodelist</a></td></tr>
<tr class="memdesc:a6fe4e7245881d141b63f42ea46f9fd72"><td class="mdescLeft">&#160;</td><td class="mdescRight">this list contains all nodes from all boards  <a href="#a6fe4e7245881d141b63f42ea46f9fd72"></a><br/></td></tr>
<tr class="memitem:a3eff7e93db293eb999c1accf78d56e24"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24">boardcount</a></td></tr>
<tr class="memdesc:a3eff7e93db293eb999c1accf78d56e24"><td class="mdescLeft">&#160;</td><td class="mdescRight">the current count of CanOpenMaster cards  <a href="#a3eff7e93db293eb999c1accf78d56e24"></a><br/></td></tr>
<tr class="memitem:a8bc3d3346fdb9e64c6bc041fcac19b76"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76">messagenr</a></td></tr>
<tr class="memdesc:a8bc3d3346fdb9e64c6bc041fcac19b76"><td class="mdescLeft">&#160;</td><td class="mdescRight">message counter  <a href="#a8bc3d3346fdb9e64c6bc041fcac19b76"></a><br/></td></tr>
<tr class="memitem:ac61d9cf8e555c36c2b558cda10e9193f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>main class which provides canopen API functions and manages all nodes. </p>
<p>This class contains a canopen specific API which accesses the canopen bus through the bus-independ Hilscher device API. It reads the configuration which has to be written previously to the device by SyCon. Based on this configuration data it searches node corresponding EDS files to create object directories. These help to enshure type security and cast warnings when users try to write incorrect data types to can nodes. </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00055">55</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a543e78ab2f7dfc71c8967babc4537400"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlCanOpen::rlCanOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00040">40</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Constructer nodes class\n&quot;</span>);</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a2ee4ce66da6eac2f80309f968e1a49fe" title="read properties of inifile">read_inifile</a>(<span class="stringliteral">&quot;./canopen.ini&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>){</div>
<div class="line">    FILE* fp;</div>
<div class="line">    fp = freopen (<a class="code" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d" title="name of logfile stdout is redirected to">logFileName</a>.ascii(),<span class="stringliteral">&quot;w&quot;</span>,stdout); <span class="comment">// redirekt stdout to textfile</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* enable linebuffering in order to write every line to the file immediately */</span></div>
<div class="line">    setvbuf ( fp , NULL , _IOFBF , 1024 ); </div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921" title="initialize nodes and create nodelist">ini</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abb1f2ae469b8669e92de89225fe7cc29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlCanOpen::rlCanOpen </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>_inifilename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00029">29</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Constructer nodes class\n&quot;</span>);</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a2ee4ce66da6eac2f80309f968e1a49fe" title="read properties of inifile">read_inifile</a>(_inifilename);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>){</div>
<div class="line">    freopen (<a class="code" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d" title="name of logfile stdout is redirected to">logFileName</a>.ascii(),<span class="stringliteral">&quot;w&quot;</span>,stdout); <span class="comment">// redirekt stdout to textfile</span></div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921" title="initialize nodes and create nodelist">ini</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5d6f4e64167fb38d3fb670381c483852"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlCanOpen::~rlCanOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00054">54</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;destruktor rlCanOpen\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a>;i++)</div>
<div class="line">    DevExitBoard(i);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef RLWIN32</span></div>
<div class="line"><span class="preprocessor"></span>  DevCloseDriver(0);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>  DevCloseDriver();</div>
<div class="line"><span class="preprocessor">#endif    </span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>)    </div>
<div class="line">    fclose (stdout);</div>
<div class="line">  </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a992c869dba69a39723309bbc960db2a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::createMappingObjects </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdoDirection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>this function writes the mapping objects for each pdo of a node </p>
<p>creates the mappings for each pdo </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00137">137</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> pdomax = 0;</div>
<div class="line">  <span class="keywordflow">if</span> (_pdoDirection == <a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>)</div>
<div class="line">    pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;getReceivePdoCount();</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(_pdoDirection == <a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>)</div>
<div class="line">    pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;getTransmitPdoCount();</div>
<div class="line">    </div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1;j&lt;=pdomax;j++)    <span class="comment">//each receive/transmit pdo</span></div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a>(_boardid,_nodeid,j,_pdoDirection)==0) <span class="keywordflow">return</span> 0;</div>
<div class="line">  <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">}   </div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac05ad772d2766154831c90bc17877de8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::createNodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search for nodes in all boards and append it into the nodelist. </p>
<p>this function checks the bus for available nodes and creates a corresponding nodelist </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00103">103</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line"> <span class="keywordtype">int</span> nodeid;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> boardid = 0;boardid&lt;<a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a>;boardid++)</div>
<div class="line">  {</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(boardid);</div>
<div class="line">    <span class="keywordflow">for</span>(nodeid = 0; nodeid &lt;= <a class="code" href="rlcanopenstructs_8h.html#abd2aacdca9cb2a1a30f3392256b96ea3">MAX_NODES</a>; nodeid++)  <span class="comment">// from node 0..127</span></div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a464c2a31796b3c816f6282e1df12f7f7">getNodeConfiguration</a>(nodeid)) <span class="comment">// writes received node-configuration </span></div>
<div class="line">                                        <span class="comment">// into class-global message-struct</span></div>
<div class="line">      {</div>
<div class="line">        <span class="comment">// new node found. insert it into the nodelist</span></div>
<div class="line">        <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.resize( <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size() + 1 );   </div>
<div class="line">        </div>
<div class="line">        <span class="comment">// append the new node in the list</span></div>
<div class="line">        <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.insert( <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1, </div>
<div class="line">                         <span class="keyword">new</span> <a class="code" href="classrlCanNode.html" title="class to manage one node of a CanOpenMaster board in a CanOpen network">rlCanNode</a>(boardid,nodeid,<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>));</div>
<div class="line">        </div>
<div class="line">       <span class="comment">//append Mapping data                                  </span></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;hasMapping()){</div>
<div class="line">          <span class="keywordflow">if</span>(!<a class="code" href="classrlCanOpen.html#a992c869dba69a39723309bbc960db2a8" title="this function writes the mapping objects for each pdo of a node">createMappingObjects</a>(boardid,nodeid,<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>))<span class="keywordflow">return</span> 0;</div>
<div class="line">          <span class="keywordflow">if</span>(!<a class="code" href="classrlCanOpen.html#a992c869dba69a39723309bbc960db2a8" title="this function writes the mapping objects for each pdo of a node">createMappingObjects</a>(boardid,nodeid,<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>))<span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;WARNING: no Mapping available on node %d.&quot;</span>, nodeid);</div>
<div class="line">          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Probably EDS file couldn&#39;t be found in EDS directory.\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">      }             </div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae03cba7206676285f6639b7f744312b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rlCanOpen::delmsg </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>clear message struct by setting all elements to zero </p>
<p>this function resets all elements of global message struct to zero </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00859">859</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">                      {</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx            =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx            =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln            =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr            =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a             =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f             =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b             =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e             =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr    =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area     =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr      =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx      =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt      =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type     =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function      =0;</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="rlcanopenstructs_8h.html#a4d267be232afc6e35e9cc9a4a1987293">MAX_SDO_BUFFERSIZE</a>; i++)</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[i] = 0;</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3e7b87154134ee74f2a7611a3b931dae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getActiveBoard </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the number of currently active board </p>
<p>returns the currently active board </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00296">296</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72" title="the currently active board">activeboard</a>;</div>
<div class="line">}                                                                                                                                                                                </div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad17ae29368457cd075e57d82140de997"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getBoardCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the number of available boards </p>
<p>returns the current count of available CanOpenMaster cards </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00211">211</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a>;</div>
<div class="line">}  </div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a464c2a31796b3c816f6282e1df12f7f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::getNodeConfiguration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function reads out the configuration of a specific node using special Hilscher commands (CMDCODE_GET_CONFIGURATION). If the master board isn't configurated by SyCon it is not possibly to use this function with success. It returns false if the node is not available </p>
<p>Device Number</p>
<p>Pointer to user buffer</p>
<p>Timeout </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00217">217</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="comment">//build message       </span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx            = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>; </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx            = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln            = 8;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr            =<a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++; </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a             =0; </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f             =0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b             =<a class="code" href="rlcanopenstructs_8h.html#a92aacf2e33d2d8d3e9893c4538bfae2b">CMDCODE_GET_CONFIGURATION</a>;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e             =0x00;  <span class="comment">//fragmentation</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr    =_nodeID;  </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area     =0; </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr      =0; </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx      =0; </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt      =0; </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type     =0; </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function      =0;</div>
<div class="line">  </div>
<div class="line">  <span class="comment">//put configuration request</span></div>
<div class="line">  DevPutMessage(0, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,5000L) ;  </div>
<div class="line">  </div>
<div class="line">  <span class="comment">//receive answer message</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage (  0,                       </div>
<div class="line">                          <span class="keyword">sizeof</span>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>),      </div>
<div class="line">                          (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,   </div>
<div class="line">                          2000L );                 </div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msgnrlocal = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> -1;</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// receive correct answer </span></div>
<div class="line">  <span class="keywordflow">if</span>((<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a == <a class="code" href="rlcanopenstructs_8h.html#a786531d89ce666d3c6f40e6b3a39c504">RESPONSE_CODE_GET_CONFIGURATION</a>) &amp;&amp; (<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr == msgnrlocal))</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f == <a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>) <span class="comment">// node active, no error</span></div>
<div class="line">      <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e == 0x00) <span class="comment">//configuration fits in the message</span></div>
<div class="line">      {</div>
<div class="line">        sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;Board %d node %d is active. No problems found\n&quot;</span>, </div>
<div class="line">          <a class="code" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae" title="returns the number of currently active board">getActiveBoard</a>(), _nodeID);</div>
<div class="line">        </div>
<div class="line">        <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">      {</div>
<div class="line">         sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;Board %d node %d is active. \n&quot;</span>, </div>
<div class="line">           <a class="code" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae" title="returns the number of currently active board">getActiveBoard</a>(), _nodeID);</div>
<div class="line">           </div>
<div class="line">         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Configuration data does not fit in one message,\n&quot;</span>);</div>
<div class="line">         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;so the current node does not include the complete data\n&quot;</span>);</div>
<div class="line">         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot; - multiplex configration data is not yet implemented!!! -\n&quot;</span>);</div>
<div class="line">         <span class="keywordflow">return</span> 1;</div>
<div class="line">      } </div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;</div>
<div class="line">  <span class="keywordflow">else</span> </div>
<div class="line">  {</div>
<div class="line">    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;----&gt;message.a=%d, message.nr=%d unsere msg nr: %d\n&quot;</span>, </div>
<div class="line">      <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a, <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr, msgnrlocal);</div>
<div class="line">      </div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <span class="stringliteral">&quot;Communication ERROR!!!&quot;</span>);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a79e0198f870d1c405d4b692628133252"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getNodeIndex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this function returns the listindex of a desired node </p>
<p>Because the nodes of all boards are stored in one list, the listindex is not equal to the nodeID(1-127). Use this function to get the listindex of a desired node </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00882">882</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size(); i++)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getNodeID() == _nodeid) &amp;&amp; </div>
<div class="line">        (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getBoardID() == _boardnr))</div>
<div class="line">    {</div>
<div class="line">      _index = i;</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }           </div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>; </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aef2160067fb768dc63c038fa0abc0f4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getNodeState </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>use this function to get information about a specific node </p>
<p>Use this function to get information about a specific node. The nodestate, nodeerror and a nodestateFlag will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a>. Read the rlCanOpenTypes.h header to get further information about these variables. Hilscher specific function (so no CanOpoen services) are used to receive the information </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01045">1045</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{ </div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);</div>
<div class="line"> </div>
<div class="line"> COM_ND_DIAGNOSTICS * diag;</div>
<div class="line"> diag = (COM_ND_DIAGNOSTICS*) &amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[0];</div>
<div class="line"></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>         ;<span class="comment">//receiver = user at HOST</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>     ;<span class="comment">// transmitter = USR_INTF-Task</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln = 8                ;<span class="comment">//length of message</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++      ;<span class="comment">//number of the message</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a  = 0                ;<span class="comment">//no answer</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f  = 0                ;<span class="comment">//error, status</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b  = <a class="code" href="rlcanopenstructs_8h.html#acddf85b855483e1edbff1ab0296f9924">CMDCODE_Node_Diag</a>;<span class="comment">//command = COM_Node_Diag</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e =0                  ;<span class="comment">//extension</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr = _nodeid  ;<span class="comment">//k Rem_Adr</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area = 0         ;<span class="comment">// data area, unused</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr  = 0         ;<span class="comment">//data address, unused</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx  = 0         ;<span class="comment">//data index, unused</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt  = 0         ;<span class="comment">//data count, unused</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type = 5         ;<span class="comment">// data type byte string</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function =  1         ;<span class="comment">//function read</span></div>
<div class="line">  </div>
<div class="line">  </div>
<div class="line"> if ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevPutMessage(_boardnr, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>, 5000L)) </div>
<div class="line">       == DRV_NO_ERROR )</div>
<div class="line"> {</div>
<div class="line">   <span class="keywordflow">while</span>( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage(_boardnr, <span class="keyword">sizeof</span>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>), </div>
<div class="line">                                (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>, 0)) </div>
<div class="line">          == DRV_DEV_GET_NO_MESSAGE )       </div>
<div class="line">   {</div>
<div class="line">     <span class="keywordflow">continue</span>;</div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">if</span> ( <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> == DRV_NO_ERROR )</div>
<div class="line">   {</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;message successfully received\n&quot;</span>);</div>
<div class="line">     <span class="comment">// continue;</span></div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">else</span></div>
<div class="line">   {</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Error  Message (f = %d))\n&quot;</span>,<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f);</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevGetMessage(%d, sizeof(message), &amp;message, 500): %d\n&quot;</span>,</div>
<div class="line">             _boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);</div>
<div class="line">             </div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">    } </div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">  {</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevPutMessage(%d, &amp;message, 5000): %d\n&quot;</span>,_boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }   </div>
<div class="line">  _data.<a class="code" href="classrlCanOpenTypes.html#ae46a7cab0600325bf95dc1d3544397f4" title="sets type to RL_NODESTATE. Stores flag-data received from the device.">set_nodestateFlags</a>( diag-&gt;bNodeStatus_1.bNodeNoResponse, </div>
<div class="line">                            diag-&gt;bNodeStatus_1.bEmcyBuffOverflow,</div>
<div class="line">                            diag-&gt;bNodeStatus_1.bPrmFault, </div>
<div class="line">                            diag-&gt;bNodeStatus_1.bGuardActive,</div>
<div class="line">                            diag-&gt;bNodeStatus_1.bDeactivated );</div>
<div class="line">                       </div>
<div class="line">  _data.<a class="code" href="classrlCanOpenTypes.html#ac01c44e149d41b4998ee0b3f73590364" title="sets current state of node.">set_nodestate</a>(diag-&gt;bNodeState);</div>
<div class="line">  _data.<a class="code" href="classrlCanOpenTypes.html#a5c2f2d709ff2419c05fdb03794bea87f">set_nodeerror</a>(diag-&gt;bActualError);</div>
<div class="line">                       </div>
<div class="line">  _data.<a class="code" href="classrlCanOpenTypes.html#a45061bf88af2c0f0a09e163b37f6affc" title="alternative setter receives integer typenumber">set_DaemonType</a>(<a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3acdb6e58d9ad486fd43a8beaa993d2b35">rlCanOpenTypes::RL_NODESTATE</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abab868b55f7b1bc5e14c9185e711d5e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getObjectType </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_objectindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_subindex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns daemontype number of a specific object </p>
<p>returns daemontype number of an object. The type is retrieved from the node's objectdir. When no objectdir exists (e.g. because of a missing EDS file) or when the requested object does not exist, this function will return 0xFF (the corresponding value to <a class="el" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3ac2f64996a25d15c3ce264c93ee7d3f70">rlCanOpenTypes::RL_NOTYPE</a>) </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00897">897</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> nodeindex;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr, _nodeid, nodeindex)){</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping())</div>
<div class="line">      <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;objecttype(_objectindex, _subindex);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      <span class="keywordflow">return</span> <a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3a229debf1ae9bd7aa4fd5955de94b6433">rlCanOpenTypes::RL_BUFFER</a>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span>{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3ac2f64996a25d15c3ce264c93ee7d3f70">rlCanOpenTypes::RL_NOTYPE</a>;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a07a517a30bff32985a1e54a4787e1006"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getPdoID </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_objektindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>return PdoId of mapped object. </p>
<p>this function iterates through the recieve/tramsmit pdo lists and returns the ID number of the pdo that fits the given objektindex. The PdoId identifies the send/receive PDO on the given node </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01015">1015</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">                                        {</div>
<div class="line">  <span class="keywordtype">int</span> pdomax=0;</div>
<div class="line">  <span class="keywordtype">int</span> nodeindex=0;</div>
<div class="line">  <span class="keywordtype">int</span> madress=0;</div>
<div class="line">  <span class="comment">// get index of node in nodelist depending on boardid and nodeid</span></div>
<div class="line">  <span class="comment">// index is stored in nodeindex variable</span></div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr, _nodeid, nodeindex); </div>
<div class="line">  </div>
<div class="line">  <span class="comment">// get number of elements in particular PDO list</span></div>
<div class="line">  <span class="keywordflow">if</span> (_direction == <a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>)</div>
<div class="line">    pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;getReceivePdoCount();</div>
<div class="line">  <span class="keywordflow">if</span> (_direction == <a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>)</div>
<div class="line">    pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;getTransmitPdoCount();</div>
<div class="line">   </div>
<div class="line">   <span class="comment">/* iterate through every element of particular list until mapping </span></div>
<div class="line"><span class="comment">      object adress matches given objectindex */</span></div>
<div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=1;j&lt;=pdomax;j++)  </div>
<div class="line">   {                                                                                                    </div>
<div class="line">      </div>
<div class="line">     madress = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_direction][j-1]-&gt;mappingOvAdress;    </div>
<div class="line">     <span class="keywordflow">if</span> (madress == _objektindex)</div>
<div class="line">       <span class="keywordflow">return</span> j;  </div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aab75d58a1776264647ee87df5972f921"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::ini </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>initialize nodes and create nodelist </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00071">71</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> = 0;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.setAutoDelete(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">  time_t rawtime;</div>
<div class="line">  <span class="keyword">struct </span>tm * timeinfo;</div>
<div class="line">  <a class="code" href="rlevent_8cpp.html#acf6c371f558a71d8a8bbc899e4429e0c">time</a> ( &amp;rawtime );</div>
<div class="line">  timeinfo = localtime ( &amp;rawtime );</div>
<div class="line"></div>
<div class="line">  sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;\nnew session startet: %s\n&quot;</span>, asctime(timeinfo));</div>
<div class="line">  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#af2ed347a61f28ad445ba615d6e82e2d8" title="Read informations about installed devices.">iniboards</a>()){</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;at least one board initialize!\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">  {</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;no board available or no board could be initialized correctly!\n&quot;</span>);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Programm -&gt; Close\n&quot;</span>);</div>
<div class="line">    exit(0); </div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// search for active nodes and create them</span></div>
<div class="line">  </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#ac05ad772d2766154831c90bc17877de8" title="Search for nodes in all boards and append it into the nodelist.">createNodes</a>();</div>
<div class="line">  </div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af2ed347a61f28ad445ba615d6e82e2d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::iniboards </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read informations about installed devices. </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00154">154</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  </div>
<div class="line">  <span class="keywordtype">int</span> currentboardcount=0;</div>
<div class="line">  </div>
<div class="line">  BOARD_INFO tBoardInfo;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef RLWIN32</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevOpenDriver(0)) == DRV_NO_ERROR) </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevOpenDriver()) == DRV_NO_ERROR) </div>
<div class="line"><span class="preprocessor">#endif    </span></div>
<div class="line"><span class="preprocessor"></span>  {</div>
<div class="line">    <span class="comment">// Driver successfully opend, read board information</span></div>
<div class="line"><span class="preprocessor">#ifdef RLWIN32</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetBoardInfo( 0, <span class="keyword">sizeof</span>(tBoardInfo), &amp;tBoardInfo)) != DRV_NO_ERROR) </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetBoardInfo( &amp;tBoardInfo)) != DRV_NO_ERROR) </div>
<div class="line"><span class="preprocessor">#endif    </span></div>
<div class="line"><span class="preprocessor"></span>          {</div>
<div class="line">          <span class="comment">// Function error</span></div>
<div class="line">            <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>( <span class="stringliteral">&quot;DevGetBoardInfo RetWert = %5d \n&quot;</span>, <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> );</div>
<div class="line">          } <span class="keywordflow">else</span> </div>
<div class="line">          {</div>
<div class="line">            <span class="comment">// Information successfully read, save for further use</span></div>
<div class="line">            <span class="comment">// Check out which boards are available</span></div>
<div class="line">            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> usIdx = 0; usIdx &lt; MAX_DEV_BOARDS; usIdx++)</div>
<div class="line">            {</div>
<div class="line">              <span class="keywordflow">if</span> ( tBoardInfo.tBoard[usIdx].usAvailable == TRUE) {</div>
<div class="line">              <span class="comment">// Board is configured, try to init the board</span></div>
<div class="line">                <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevInitBoard(</div>
<div class="line">#ifdef <a class="code" href="rldefine_8h.html#aa69fd2b1358365a7eabefb22433241a0">RLWIN32</a></div>
<div class="line">                tBoardInfo.tBoard[usIdx].usBoardNumber, NULL);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                tBoardInfo.tBoard[usIdx].usBoard);</div>
<div class="line"><span class="preprocessor">#endif    </span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> ( <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> != DRV_NO_ERROR) {</div>
<div class="line">                  <span class="comment">// Function error</span></div>
<div class="line">                  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>( <span class="stringliteral">&quot;DevInitBoard RetWert = %5d \n&quot;</span>, <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> );</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">// DEVICE is available and ready............</span></div>
<div class="line">                currentboardcount++;</div>
<div class="line">                       }</div>
<div class="line">              }</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">   }</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a> = currentboardcount;       </div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (currentboardcount!=0)</div>
<div class="line">    <span class="keywordflow">return</span> 1;   </div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">   <span class="keywordflow">return</span> 0;    </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe931676649e9b5be1d244a3fc8f1b61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::is_twisted_type </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_canopentype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01226">1226</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">switch</span> (_canopentype){</div>
<div class="line">  </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a1569876cd33de357eef45c9f3a6387d3">rlCanOpenTypes::INTEGER24_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a7648935585838256f2669d349d2a9bd2">rlCanOpenTypes::INTEGER40_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a27336b8f748dd0b43b8256aab3f705ea">rlCanOpenTypes::INTEGER48_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398aae497b0c7c514f702901387355c5ffe6">rlCanOpenTypes::INTEGER56_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398ae768c04dc6f86ca7922ef3d90ff4c538">rlCanOpenTypes::UNSIGNED24_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>;  </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a1b847508cc46d8a8900b2bf6e45f8297">rlCanOpenTypes::UNSIGNED40_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>;  </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a8a31b85f0f7716f806437a9e58e73be2">rlCanOpenTypes::UNSIGNED48_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>; </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398acabf48be88a8827f322f2c20e49273cf">rlCanOpenTypes::UNSIGNED56_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>;   </div>
<div class="line">    <span class="keywordflow">default</span>                          :<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a73a3479ae9754495e17aa6591dbf135e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_receive </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_mappingnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_pdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>using the pdo_receive function you can receive a mapped object within PDO </p>
<p>using the pdo_receive function you can receive a PDO (Process Data Object), which is send from the specific node to the device. The enquired object will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. The mapping is only available if mapping is configurated during the node creation of the rlcanopen constructer. Therefore a eds file (electronic data sheet) is needed. Use the cannode::hasMapping() function to check if mapping is available. To read out the correct value from this class use one of the get_TYPE() {e.g. get_int() } functions you can assert the type in the class using <a class="el" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">rlCanOpenTypes::get_DaemonType()</a>; </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00544">544</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">int</span> nodeindex;</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buffer[8];</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) </div>
<div class="line"> {</div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified node does not exist! PDO receive failed!&quot;</span>);</div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, </div>
<div class="line">     _boardnr, _nodeid, _pdonr, _mappingnr);</div>
<div class="line">     </div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);</div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line"> }</div>
<div class="line"> <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){</div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! PDO receive failed!&quot;</span>);</div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, </div>
<div class="line">     _boardnr, _nodeid, _pdonr, _mappingnr);</div>
<div class="line">   </div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);</div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line"> }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr -1]-&gt;mappingList.size() </div>
<div class="line">          &lt; (<span class="keywordtype">unsigned</span> int) _mappingnr){</div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified Mappingnr does not exist! PDO receive failed!&quot;</span>);</div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, </div>
<div class="line">     _boardnr, _nodeid, _pdonr, _mappingnr);</div>
<div class="line">     </div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac06bda295f5176eca7aba684d3a23e42">ERRCODE_INVALID_MAPID</a>);</div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line"> }      </div>
<div class="line"> </div>
<div class="line"> <span class="comment">// PDO No.1 has the index 0 !!!</span></div>
<div class="line"> <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;bPDOSize;      </div>
<div class="line"> <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;usPDOAddress; </div>
<div class="line"> </div>
<div class="line"> <span class="comment">//cout&lt;&lt;&quot;size =&quot;&lt;&lt;pdosize&lt;&lt;&quot; offset = &quot;&lt;&lt;pdooffset&lt;&lt;&quot;\n&quot;;</span></div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr,   <span class="comment">// Board NO</span></div>
<div class="line">                      0,                  <span class="comment">//offset send data</span></div>
<div class="line">                      0,                  <span class="comment">//Length of the send IO data</span></div>
<div class="line">                      NULL,               <span class="comment">//Pointer to the user send data buffer</span></div>
<div class="line">                      pdooffset,          <span class="comment">//Byte offset in the receive IO data area</span></div>
<div class="line">                      pdosize,            <span class="comment">//Length of the receive IO data</span></div>
<div class="line">                      &amp;buffer[0],         <span class="comment">//Pointer to the user read data buffer</span></div>
<div class="line">                      100L)               <span class="comment">//timeout in milliseconds</span></div>
<div class="line">      ) == DRV_NO_ERROR)</div>
<div class="line"> {</div>
<div class="line">   </div>
<div class="line">   <span class="keywordtype">int</span> length_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;</div>
<div class="line">         pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;mappingList[_mappingnr-1]-&gt;length/8;</div>
<div class="line">           </div>
<div class="line">   <span class="keywordtype">int</span> position_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;</div>
<div class="line">         pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;mappingList[_mappingnr-1]-&gt;position/8; </div>
<div class="line">         </div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a071fb679e9956c9c5a46c633e29b784c" title="sets all bytes in databuffer to zero">clearBuffer</a>();</div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = position_in_byte; i&lt; length_in_byte+position_in_byte;i++)</div>
<div class="line">   {</div>
<div class="line">        _pdo_data.<a class="code" href="classrlCanOpenTypes.html#ae679e810361bd26aed31a5458daa4ef5" title="transfer raw data into the databuffer">set_buffer</a>(i-position_in_byte,buffer[i]);</div>
<div class="line">   }</div>
<div class="line">        </div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a45061bf88af2c0f0a09e163b37f6affc" title="alternative setter receives integer typenumber">set_DaemonType</a>( <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;</div>
<div class="line">          mappingList[_mappingnr-1]-&gt;etype);</div>
<div class="line">     </div>
<div class="line">       </div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>);</div>
<div class="line">   </div>
<div class="line">   </div>
<div class="line">    <span class="comment">// if CanOpen-Type is a twistet integer (etc. 52Bit ) the value will be converted</span></div>
<div class="line">   <span class="keywordtype">int</span> canopentype = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;</div>
<div class="line">          mappingList[_mappingnr-1]-&gt;canopentype;</div>
<div class="line">           </div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a>(canopentype))</div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a57a8d0945c14a3e868c9da3c34a26ec0">translate_CanOpenType</a>(canopentype);   </div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">return</span> 1;  </div>
<div class="line"> }</div>
<div class="line"> <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: PDO receive failed!&quot;</span>);</div>
<div class="line"> <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, </div>
<div class="line">   _boardnr, _nodeid, _pdonr, _mappingnr);</div>
<div class="line"> </div>
<div class="line"> _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a58f71815e94679fbf8e83166eb25a73c">ERRCODE_PDORCV_FAIL</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;     </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aad8dd8baeb1b1caf32b38528b5039060"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_receive </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_pdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>using the pdo_receive function you can receive a PDO (Process Data Object) </p>
<p>using the pdo_receive function you can receive a PDO (Process Data Object), which is send from the specific node to the canOpen master card. The data will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. This function doesn't use mapping. So the whole 8Byte PDO data, will be received. To read out use the <a class="el" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">rlCanOpenTypes::get_buffer</a>({0-7}) function </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00637">637</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">   </div>
<div class="line">   <span class="keywordtype">int</span> nodeindex;</div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) </div>
<div class="line">   {</div>
<div class="line">     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! PDO \</span></div>
<div class="line"><span class="stringliteral">                           receive failed! BoardId: %d NodeId: %d PDO \</span></div>
<div class="line"><span class="stringliteral">                           ID: %d\n&quot;</span>, _boardnr, _nodeid, _pdonr);</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">     </div>
<div class="line">     <span class="comment">//cout&lt;&lt;&quot;ERROR: specified node does not exist!\n&quot;;</span></div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">   }</div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){</div>
<div class="line">     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! \</span></div>
<div class="line"><span class="stringliteral">                           PDO receive failed! BoardId: %d NodeId: \</span></div>
<div class="line"><span class="stringliteral">                           %d PDO ID: %d\n&quot;</span>, _boardnr, _nodeid, _pdonr);</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line"></div>
<div class="line">     <span class="comment">//cout&lt;&lt;&quot;PDO ID does not exists!\n&quot;;</span></div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">   }</div>
<div class="line">   </div>
<div class="line">   <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;bPDOSize;</div>
<div class="line">   </div>
<div class="line">   <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;</div>
<div class="line">                                pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;usPDOAddress;</div>
<div class="line">   </div>
<div class="line">   <span class="comment">//cout&lt;&lt;&quot;\nsize =&quot;&lt;&lt;pdosize&lt;&lt;&quot; offset = &quot;&lt;&lt;pdooffset;</span></div>
<div class="line">     </div>
<div class="line">   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr, <span class="comment">// Board NO</span></div>
<div class="line">                  0,                      <span class="comment">//offset send data</span></div>
<div class="line">                  0,                      <span class="comment">//Length of the send IO data</span></div>
<div class="line">                  NULL,                   <span class="comment">//Pointer to the user send data buffer</span></div>
<div class="line">                  pdooffset,              <span class="comment">//Byte offset in the receive IO data area</span></div>
<div class="line">                  pdosize,                <span class="comment">//Length of the receive IO data</span></div>
<div class="line">                  &amp;_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a0d92ed9f5cdf6d248a9332649e7f2433" title="external buffer for pdotransfer">pdobuffer</a>[0],<span class="comment">//Pointer to the user read data buffer</span></div>
<div class="line">                  100L)                   <span class="comment">//timeout in milliseconds</span></div>
<div class="line">        ) == DRV_NO_ERROR)</div>
<div class="line">   {</div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#ab05d3a8d10d68e545aba3846ed6aaf5a" title="exchange bytes 0-7 from pdobuffer to databuffer">pdobuf2buf</a>();</div>
<div class="line">     <span class="comment">//rlDebugPrintf(&quot;PDO recieve successfull!\n&quot;);</span></div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 1;</div>
<div class="line">   </div>
<div class="line">   }</div>
<div class="line">   sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO receive failed! \</span></div>
<div class="line"><span class="stringliteral">                         BoardId: %d NodeId: %d PDO \</span></div>
<div class="line"><span class="stringliteral">                         ID: %d\n&quot;</span>, _boardnr, _nodeid, _pdonr);</div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line"></div>
<div class="line">   <span class="comment">//rlDebugPrintf(&quot;ERROR: PDO RECEIVE FAILED\n&quot;);</span></div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a58f71815e94679fbf8e83166eb25a73c">ERRCODE_PDORCV_FAIL</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;                          </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa0af0f6576ec284128e9c3efb4770ca2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_transmit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_mappingnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_pdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>transmit a mapped object within a PDO to a specific node </p>
<p>Using the pdo_transmit function you can transmit a PDO (Process Data Object) to a specific node. The desired data must be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. The mapping is only available if mapping is configurated during the node creation of the rlcanopen constructer. Therefore an eds file (electronic data sheet) is needed. Use the cannode::hasMapping() function to check if mapping is available </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00703">703</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">   <span class="keywordtype">int</span> nodeindex;</div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) </div>
<div class="line">   {</div>
<div class="line">     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! PDO transmit \</span></div>
<div class="line"><span class="stringliteral">                           failed! BoardId: %d NodeId: %d PDO ID: %d Mappingnr:\</span></div>
<div class="line"><span class="stringliteral">                            %d\n&quot;</span>, _boardnr, _nodeid, _pdonr, _mappingnr);</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){</div>
<div class="line">     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! PDO transmit\</span></div>
<div class="line"><span class="stringliteral">                           failed! BoardId: %d NodeId: %d PDO ID: %d Mappingnr:\</span></div>
<div class="line"><span class="stringliteral">                            %d\n&quot;</span>, _boardnr, _nodeid, _pdonr, _mappingnr);</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">        </div>
<div class="line">     <span class="comment">//cout&lt;&lt;&quot;PDO ID does not exists!\n&quot;;</span></div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr -1]-&gt;mappingList.size()</div>
<div class="line">              &lt; (<span class="keywordtype">unsigned</span> int) _mappingnr){</div>
<div class="line">     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified mappingnr does not exist! PDO \</span></div>
<div class="line"><span class="stringliteral">                           transmit failed! BoardId: %d NodeId: %d PDO \</span></div>
<div class="line"><span class="stringliteral">                           ID: %d Mappingnr: %d\n&quot;</span>, </div>
<div class="line">                           _boardnr, _nodeid, _pdonr, _mappingnr);</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line"></div>
<div class="line">     <span class="comment">//cout&lt;&lt;&quot;mapping ID does not exists!\n&quot;;</span></div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac06bda295f5176eca7aba684d3a23e42">ERRCODE_INVALID_MAPID</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">   }    </div>
<div class="line">   </div>
<div class="line">   <span class="comment">// PDO No.1 has the index 0 !!!</span></div>
<div class="line">   <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;bPDOSize; </div>
<div class="line">   <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;usPDOAddress;</div>
<div class="line"></div>
<div class="line">   <span class="keywordtype">int</span> length_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;</div>
<div class="line">                          mappingList[_mappingnr-1]-&gt;length/8;</div>
<div class="line">                          </div>
<div class="line">   <span class="keywordtype">int</span> position_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;</div>
<div class="line">                          mappingList[_mappingnr-1]-&gt;position/8; </div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">if</span> (_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">get_DaemonType</a>() != (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;</div>
<div class="line">               pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;mappingList[_mappingnr-1]-&gt;etype))</div>
<div class="line">   {  </div>
<div class="line">     </div>
<div class="line">     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: invalid type! Expected type: %d  Your Type:\</span></div>
<div class="line"><span class="stringliteral">                            %d! PDO transmit failed! BoardId: %d NodeId: %d \</span></div>
<div class="line"><span class="stringliteral">                            PDO ID: %d Mappingnr: %d\n&quot;</span>, </div>
<div class="line">          <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;</div>
<div class="line">            mappingList[_mappingnr-1]-&gt;etype, </div>
<div class="line">          _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">get_DaemonType</a>(), _boardnr, _nodeid, _pdonr, _mappingnr);</div>
<div class="line">       </div>
<div class="line">       </div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">get_DaemonType</a>();</div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#acaa13c777fe2910c2902c92fdbf7e392">ERRCODE_INVALID_RLTYPE</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">   }</div>
<div class="line">   </div>
<div class="line">    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a479e8118a82dd132df3fa6d87bafa033" title="exchange bytes 0-7 from databuffer to pdobuffer">buf2pdobuf</a>();</div>
<div class="line">   </div>
<div class="line">   <span class="comment">// no conversion necessary. correct length in mapping list</span></div>
<div class="line"></div>
<div class="line">   pdooffset = pdooffset + position_in_byte;</div>
<div class="line">   pdosize = length_in_byte;</div>
<div class="line">   </div>
<div class="line">   </div>
<div class="line">   </div>
<div class="line">   <span class="comment">//cout&lt;&lt;&quot;size =&quot;&lt;&lt;pdosize&lt;&lt;&quot; offset = &quot;&lt;&lt;pdooffset&lt;&lt;&quot;\n&quot;;</span></div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr,       <span class="comment">// Board NO</span></div>
<div class="line">                        pdooffset,              <span class="comment">//offset send data</span></div>
<div class="line">                        pdosize,                <span class="comment">//Length of the send IO data</span></div>
<div class="line">                        &amp;_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a0d92ed9f5cdf6d248a9332649e7f2433" title="external buffer for pdotransfer">pdobuffer</a>[0],<span class="comment">//Pointer to the user send data buffer</span></div>
<div class="line">                        0,                      <span class="comment">//Byte offset in the receive IO data area</span></div>
<div class="line">                        0,                      <span class="comment">//Length of the receive IO data</span></div>
<div class="line">                        NULL,                   <span class="comment">//Pointer to the user read data buffer</span></div>
<div class="line">                        100L)                   <span class="comment">//timeout in milliseconds</span></div>
<div class="line">        ) == DRV_NO_ERROR)</div>
<div class="line">   {</div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(0);</div>
<div class="line">     <span class="comment">//rlDebugPrintf(&quot;PDO transmit successful! \n&quot;);</span></div>
<div class="line">     <span class="keywordflow">return</span> 1;  </div>
<div class="line">   }</div>
<div class="line">   sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO transmit failed! BoardId: %d NodeId: %d \</span></div>
<div class="line"><span class="stringliteral">                         PDO ID: %d Mappingnr: %d\n&quot;</span>, </div>
<div class="line">                         _boardnr, _nodeid, _pdonr, _mappingnr);</div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">   </div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac6a1a95fdab7f5b7d2dfb3056df2eee8">ERRCODE_PDOSND_FAIL</a>);</div>
<div class="line">   <span class="keywordflow">return</span> 0;    </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a813d45bf60088fc0d4fcd70264a7dbe1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_transmit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_pdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>transmit a 8 Byte PDO to a specific node </p>
<p>Using the pdo_transmit function you can transmit a PDO (Process Data Object) to a specific node. The desired data must be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. This function does not support mapping. So the whole 8byte PDO data, will be send to write to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> use the <a class="el" href="classrlCanOpenTypes.html#ae679e810361bd26aed31a5458daa4ef5" title="transfer raw data into the databuffer">rlCanOpenTypes::set_buffer</a>({0-7}) function </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00806">806</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">   <span class="keywordtype">int</span> nodeindex;</div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a479e8118a82dd132df3fa6d87bafa033" title="exchange bytes 0-7 from databuffer to pdobuffer">buf2pdobuf</a>();</div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) </div>
<div class="line">   {</div>
<div class="line">     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! PDO transmit\</span></div>
<div class="line"><span class="stringliteral">                           failed! BoardId: %d NodeId: %d PDO ID: %d \n&quot;</span>,</div>
<div class="line">                            _boardnr, _nodeid, _pdonr);</div>
<div class="line">                            </div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){</div>
<div class="line">     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! PDO \</span></div>
<div class="line"><span class="stringliteral">                           transmit failed! BoardId: %d NodeId: %d PDO \</span></div>
<div class="line"><span class="stringliteral">                           ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdonr);</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">   }</div>
<div class="line">   </div>
<div class="line">   <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;bPDOSize;</div>
<div class="line">   <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;usPDOAddress; </div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr,       <span class="comment">// Board NO</span></div>
<div class="line">                        pdooffset,              <span class="comment">//offset send data</span></div>
<div class="line">                        pdosize,                <span class="comment">//Length of the send IO data</span></div>
<div class="line">                        &amp;_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a0d92ed9f5cdf6d248a9332649e7f2433" title="external buffer for pdotransfer">pdobuffer</a>[0],<span class="comment">//Pointer to the user send data buffer</span></div>
<div class="line">                        0,                      <span class="comment">//Byte offset in the receive IO data area</span></div>
<div class="line">                        0,                      <span class="comment">//Length of the receive IO data</span></div>
<div class="line">                        NULL,                   <span class="comment">//Pointer to the user read data buffer</span></div>
<div class="line">                        100L)                   <span class="comment">//timeout in milliseconds</span></div>
<div class="line">        ) == DRV_NO_ERROR)</div>
<div class="line">   {</div>
<div class="line">     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>);</div>
<div class="line">     <span class="keywordflow">return</span> 1;</div>
<div class="line">   }</div>
<div class="line">   sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO transmit failed! BoardId: %d NodeId: %d \</span></div>
<div class="line"><span class="stringliteral">                         PDO ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdonr);</div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">   </div>
<div class="line">   _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac6a1a95fdab7f5b7d2dfb3056df2eee8">ERRCODE_PDOSND_FAIL</a>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;                           </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ee4ce66da6eac2f80309f968e1a49fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rlCanOpen::read_inifile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>_filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>read properties of inifile </p>
<p>read properties of inifile. EDS path, logfile location and user-specific options are set on startup </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01189">1189</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">                                                 {</div>
<div class="line">  <a class="code" href="classrlIniFile.html">rlIniFile</a> <a class="code" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921" title="initialize nodes and create nodelist">ini</a>;   </div>
<div class="line">  QString buffer;</div>
<div class="line">  <span class="keywordflow">if</span> (ini.<a class="code" href="classrlIniFile.html#a2d308c9697478c1c0965c2ed7e6581cc">read</a>(_filename)!=-1){</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;used inifile: %s\n&quot;</span>, _filename);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// read EDS directory location</span></div>
<div class="line">    buffer=QString(ini.<a class="code" href="classrlIniFile.html#abd6617813df57f3cdcc2f7829a742f32">text</a>(<span class="stringliteral">&quot;DIRECTORIES&quot;</span>,<span class="stringliteral">&quot;EdsDir&quot;</span>));</div>
<div class="line">    buffer.remove((<span class="keywordtype">char</span>) ACSII_CODE_CARRIAGE_RETURN);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;EdsDir: %s\n&quot;</span>, buffer.ascii());</div>
<div class="line">    <span class="comment">// store EDS directory location in environmet variable</span></div>
<div class="line"><span class="preprocessor">#ifdef RLWIN32</span></div>
<div class="line"><span class="preprocessor"></span>    SetEnvironmentVariable(<span class="stringliteral">&quot;EdsDir&quot;</span>, buffer.ascii());</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    setenv(<span class="stringliteral">&quot;EdsDir&quot;</span>, buffer.ascii(), 1);</div>
<div class="line"><span class="preprocessor">#endif    </span></div>
<div class="line"><span class="preprocessor"></span>    </div>
<div class="line">    <span class="comment">// read Logfilename</span></div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d" title="name of logfile stdout is redirected to">logFileName</a>=QString(ini.<a class="code" href="classrlIniFile.html#abd6617813df57f3cdcc2f7829a742f32">text</a>(<span class="stringliteral">&quot;DIRECTORIES&quot;</span>,<span class="stringliteral">&quot;LogFileName&quot;</span>));</div>
<div class="line">    logFileName.remove((<span class="keywordtype">char</span>) ACSII_CODE_CARRIAGE_RETURN);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Log Filename: %s\n&quot;</span>, logFileName.ascii());</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// read loggin-option </span></div>
<div class="line">    buffer=QString(ini.<a class="code" href="classrlIniFile.html#abd6617813df57f3cdcc2f7829a742f32">text</a>(<span class="stringliteral">&quot;OPTIONS&quot;</span>,<span class="stringliteral">&quot;enableLoggin&quot;</span>));</div>
<div class="line">    <span class="keywordflow">if</span> (buffer.contains(<span class="stringliteral">&quot;yes&quot;</span>, <span class="keyword">false</span>)==1)</div>
<div class="line">      <a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>=<span class="keyword">true</span>;  </div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      <a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>=<span class="keyword">false</span>;  </div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">  {</div>
<div class="line">    logFileName=  <span class="stringliteral">&quot;./outfile.txt&quot;</span>;</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: INIFILE NOT FOUND\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac91a85e76f8b9506303f5992fe72d018"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::refreshMappingList </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdoID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_pdoDirection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>if the user changes the mapping of a node using SDO functions, the internal mapping list should be changed </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00917">917</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="comment">//rlDebugPrintf(&quot;refresh mappinglist1\n&quot;);</span></div>
<div class="line">  <span class="keywordtype">int</span> nodeindex;</div>
<div class="line">  <span class="keywordtype">int</span> madress=0;</div>
<div class="line">  </div>
<div class="line">   </div>
<div class="line">    madress = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;</div>
<div class="line">                pdoList[_pdoDirection][_pdoID -1]-&gt;mappingOvAdress;</div>
<div class="line">      </div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== <span class="keyword">false</span>) </div>
<div class="line">  {</div>
<div class="line">    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! refresh \</span></div>
<div class="line"><span class="stringliteral">                          mapping list failed! BoardId: %d NodeId: %d \</span></div>
<div class="line"><span class="stringliteral">                          PDO ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdoID);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_pdoDirection].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdoID)</div>
<div class="line">  {</div>
<div class="line">    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO does not exist! refresh \</span></div>
<div class="line"><span class="stringliteral">                          mapping list failed! BoardId: %d NodeId: %d \</span></div>
<div class="line"><span class="stringliteral">                          PDO ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdoID);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">   </div>
<div class="line">  <span class="comment">//append Mapping data                                 </span></div>
<div class="line">  <a class="code" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> sdobuffer;                            </div>
<div class="line">  <span class="keywordtype">int</span> mappingcount;</div>
<div class="line">  <a class="code" href="structrlCanMapping.html" title="mapping object which is part of the mappinglist of a PDO">rlCanMapping</a> * mappingobject; </div>
<div class="line">                                            </div>
<div class="line">  <span class="comment">//get mapping count                       </span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713" title="read a certain object from the object dictionary of a node">sdo_read</a>(_boardnr,_nodeid,madress,0,sdobuffer) == 0){</div>
<div class="line">    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: read sdo data! refresh mapping list failed! \</span></div>
<div class="line"><span class="stringliteral">                          BoardId: %d NodeId: %d PDO ID: %d \n&quot;</span>, </div>
<div class="line">                          _boardnr, _nodeid, _pdoID);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  mappingcount = sdobuffer.<a class="code" href="classrlCanOpenTypes.html#ab94c175fc5b094f3a0e259266e1d7f85" title="returns databuffer-content as uchar type">get_uchar</a>();   </div>
<div class="line">  </div>
<div class="line">  sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;Current mappingcount: %d\n&quot;</span>, mappingcount);</div>
<div class="line">  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);                                           </div>
<div class="line">  </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_pdoDirection][_pdoID-1]-&gt;</div>
<div class="line">                  mappingList.resize(mappingcount);</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> currentposition = 0;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mcount = 1; mcount &lt;= mappingcount;mcount++)  <span class="comment">//each mappingobject</span></div>
<div class="line">  {</div>
<div class="line">    mappingobject = <span class="keyword">new</span> <a class="code" href="structrlCanMapping.html" title="mapping object which is part of the mappinglist of a PDO">rlCanMapping</a>;  <span class="comment">//create new mappingobject in memory</span></div>
<div class="line">    mappingobject-&gt;<a class="code" href="structrlCanMapping.html#adfeb435b465421c10a527f0e03643cfd" title="the mapping ID determines the mapping object within the PDO (1 to n)">mappingId</a> = mcount;</div>
<div class="line">        </div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713" title="read a certain object from the object dictionary of a node">sdo_read</a>(_boardnr,_nodeid,madress,mcount,sdobuffer) == 0){</div>
<div class="line">     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: read sdo data! refresh mapping list failed! \</span></div>
<div class="line"><span class="stringliteral">                           BoardId: %d NodeId: %d PDO ID: %d \n&quot;</span>, </div>
<div class="line">                           _boardnr, _nodeid, _pdoID);</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">     <span class="comment">//cout&lt;&lt;&quot;Error during create Mappinglist!\n&quot;;</span></div>
<div class="line">    }</div>
<div class="line">       </div>
<div class="line">    <span class="comment">//get length of mapping object</span></div>
<div class="line">    <span class="keywordtype">int</span> mlength  = sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(0);</div>
<div class="line">    mappingobject-&gt;<a class="code" href="structrlCanMapping.html#a6e1cb25d9777c0a5b6a9615ba54b4eb9" title="length of mappend object in bits">length</a> = mlength;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//calculate the mapping position</span></div>
<div class="line">    <span class="keywordflow">if</span> (mcount&gt;1)</div>
<div class="line">      mappingobject-&gt;<a class="code" href="structrlCanMapping.html#adc9982e23260fae2c13bca8ed916b278" title="its position in within the 8Byte">position</a> = currentposition;         </div>
<div class="line">    <span class="keywordflow">else</span>       </div>
<div class="line">      mappingobject-&gt;<a class="code" href="structrlCanMapping.html#adc9982e23260fae2c13bca8ed916b278" title="its position in within the 8Byte">position</a> = 0;           </div>
<div class="line">    currentposition+=mlength;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// get the ov adress of the current mapped object</span></div>
<div class="line">    <span class="keywordtype">int</span> mi  = (int) (sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(3)*pow(256,1) </div>
<div class="line">                                          + sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(2));</div>
<div class="line">                                          </div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msi = sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(1);</div>
<div class="line">        </div>
<div class="line">    <a class="code" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> temptype;</div>
<div class="line">    mappingobject-&gt;<a class="code" href="structrlCanMapping.html#a0bf5454714c486432b1881371cb8cede" title="its current type (int32, float, char, ...)">etype</a> = temptype.<a class="code" href="classrlCanOpenTypes.html#a5fa2427f1c611d5ea95b02ec71e483cc" title="Function for typenumber conversion.">canOpenType2DeamonType</a></div>
<div class="line">                           (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;objecttype(mi, msi));</div>
<div class="line">        </div>
<div class="line">    <span class="comment">// insert the mappingobject to mappinglist</span></div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_pdoDirection][_pdoID-1]-&gt;</div>
<div class="line">                         mappingList.insert(mcount-1,mappingobject);</div>
<div class="line">       </div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> 1;                                                   </div>
<div class="line">}                                                               </div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac65b49a7d5677c354cd73c6980687219"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::restartBoard </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_restarttype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>using this function you are able to restart a CanOpenMaster board </p>
<p>Using this function you are able to restart a CanOpenMaster board (device). There are 3 possibly kinds of restarting the master: coldstart, warmstart, bootstart. The corresponding '#defines' are declared in canopenstructs.h Hilscher specific function (so no CanOpoen services) are used to execute this command </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01114">1114</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">   <span class="comment">//COLDSTART           2</span></div>
<div class="line">   <span class="comment">//WARMSTART           3</span></div>
<div class="line">   <span class="comment">//BOOTSTART           4</span></div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevReset(_boardnr, _restarttype, 5000L) != DRV_NO_ERROR ))</div>
<div class="line">  {</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;restart failed!\n&quot;</span>);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;DevReset(%d, Restart, 5000): %d\n&quot;</span>, _boardnr, <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;restart successfully\n&quot;</span>);</div>
<div class="line">   <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a0e5e4328ff82cc5a7de3e8fa9c9713"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::sdo_read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_objectindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_subindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_sdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read a certain object from the object dictionary of a node </p>
<p>using the sdo_read function you can read a certain object from the object dictionary of a node. For this the SDO (Service Data Object) service will be used. The enquired object will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. To read out the correct value from this class use one of the get_TYPE() {e.g. get_int() } functions. You can assert the type in the class using <a class="el" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">rlCanOpenTypes::get_DaemonType()</a>; if sdo_read failures the current error can be read out using <a class="el" href="classrlCanOpenTypes.html#a8e213475ba049fe418aa703354e797eb" title="returns current errnumber">rlCanOpenTypes::get_rlmsgerr()</a> </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00332">332</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> datalength;</div>
<div class="line">    <span class="keywordtype">int</span> canopentype;</div>
<div class="line">    <span class="keywordtype">int</span> nodeindex; </div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) </div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified node does not exist! SDO write failed!&quot;</span>);</div>
<div class="line">      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Objektindex: %d Subindex: %d\n&quot;</span>, </div>
<div class="line">        _boardnr, _nodeid, _objectindex, _subindex);</div>
<div class="line">        </div>
<div class="line">      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);</div>
<div class="line">      <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <a class="code" href="classrlCanOpen.html#ae03cba7206676285f6639b7f744312b4" title="clear message struct by setting all elements to zero">delmsg</a>();</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx          = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx          = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln          = 8;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr          = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a           = 0; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f           = 0;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b           = <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e           = 0;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr  = _nodeid;  </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area   = 0; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr    = _objectindex; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx    = _subindex; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt    = 0; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type   = 0; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function    = <a class="code" href="rlcanopenstructs_8h.html#a57374c705ca0846e8d00c1036c1d2cbd">TASK_TFC_READ</a>; </div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span>(DevPutMessage(0, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,5000L) != DRV_NO_ERROR) <span class="keywordflow">return</span> 0;</div>
<div class="line">   </div>
<div class="line">   <a class="code" href="classrlCanOpen.html#ae03cba7206676285f6639b7f744312b4" title="clear message struct by setting all elements to zero">delmsg</a>();</div>
<div class="line">   <span class="comment">// receive the answer</span></div>
<div class="line">  </div>
<div class="line">   <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage( <a class="code" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae" title="returns the number of currently active board">getActiveBoard</a>(),                       <span class="comment">// Device Number            </span></div>
<div class="line">                         <span class="keyword">sizeof</span>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>), </div>
<div class="line">                         (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,   <span class="comment">// Pointer to user buffer  </span></div>
<div class="line">                         2000L );                 <span class="comment">// Timeout   </span></div>
<div class="line">   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msgnrlocal;</div>
<div class="line">   msgnrlocal = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> - 1;                       </div>
<div class="line">   </div>
<div class="line">   <span class="comment">// receive correct answer   </span></div>
<div class="line">   <span class="keywordflow">if</span>((<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a == <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>)&amp;&amp;(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr == msgnrlocal)){ </div>
<div class="line">      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f);</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f == <a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>) <span class="comment">// node active, no error</span></div>
<div class="line">      {</div>
<div class="line">        canopentype=<a class="code" href="classrlCanOpen.html#abab868b55f7b1bc5e14c9185e711d5e7" title="returns daemontype number of a specific object">getObjectType</a>(_boardnr, _nodeid, _objectindex, _subindex);</div>
<div class="line">        <span class="keywordflow">if</span> (canopentype!=<a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3ac2f64996a25d15c3ce264c93ee7d3f70">rlCanOpenTypes::RL_NOTYPE</a>){</div>
<div class="line">          _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ab20336305ab86cb7f70ba7d082db6741" title="recieves an CANopen typenumber and returns appropiate RL-Type">set_CanOpenType</a>(canopentype);</div>
<div class="line">          datalength = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ab9855e0b33acd508a2a87b8c45655d70" title="returns number of bytes used for current type">getLength</a>();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> </div>
<div class="line">        {</div>
<div class="line">          _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a45061bf88af2c0f0a09e163b37f6affc" title="alternative setter receives integer typenumber">set_DaemonType</a>(<a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3a229debf1ae9bd7aa4fd5955de94b6433">rlCanOpenTypes::RL_BUFFER</a>);</div>
<div class="line">          datalength = <a class="code" href="rlcanopenstructs_8h.html#a4d267be232afc6e35e9cc9a4a1987293">MAX_SDO_BUFFERSIZE</a>;</div>
<div class="line">        }</div>
<div class="line">        _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a071fb679e9956c9c5a46c633e29b784c" title="sets all bytes in databuffer to zero">clearBuffer</a>();   </div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; datalength; i++)</div>
<div class="line">          _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ae679e810361bd26aed31a5458daa4ef5" title="transfer raw data into the databuffer">set_buffer</a>(i, <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[i]);         </div>
<div class="line">        </div>
<div class="line">        <span class="comment">// if CanOpen-Type is a twistet integer (etc. 52Bit ) the value will be converted</span></div>
<div class="line">        <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a>(canopentype)) &amp;&amp; (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()))</div>
<div class="line">          _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a57a8d0945c14a3e868c9da3c34a26ec0">translate_CanOpenType</a>(canopentype);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">      {</div>
<div class="line">        <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;message.f = %d  message.f = %x Hex \n&quot;</span>, <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f, <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;message.a = %d message.nr = %d vergleich mit: %d\n&quot;</span>, </div>
<div class="line">         <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a, <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr, msgnrlocal);</div>
<div class="line">         </div>
<div class="line">      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(-1);</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR during read SDO message!&quot;</span>);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Obj: %x Sub: %x\n&quot;</span>, </div>
<div class="line">      _boardnr, _nodeid, _objectindex, _subindex);</div>
<div class="line">      </div>
<div class="line">      </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe214122e51cdd214d586ef1b50a5b34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::sdo_write </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_objectindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_subindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&#160;</td>
          <td class="paramname"><em>_sdo_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write data into a certain object from the object dictionary of a node </p>
<p>using the sdo_write function you can write to a certain object from the object dictionary of a node. For this the SDO (Service Data Object) Service will be used. The relevant data must be written into the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class before. To write the data into the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class use one of the datatype depending functions like <a class="el" href="classrlCanOpenTypes.html#ab592a58ab2a143018b778a66f93e3d43" title="sets type to RL_INT and stores passed parameter data in databuffer">rlCanOpenTypes::set_int(int _value)</a>; if sdo_write failures the current error can be read out using <a class="el" href="classrlCanOpenTypes.html#a8e213475ba049fe418aa703354e797eb" title="returns current errnumber">rlCanOpenTypes::get_rlmsgerr()</a> </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00431">431</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> length;</div>
<div class="line">    <span class="keywordtype">int</span> pdoid;</div>
<div class="line">    length = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ab9855e0b33acd508a2a87b8c45655d70" title="returns number of bytes used for current type">getLength</a>();</div>
<div class="line">    <span class="keywordtype">int</span> nodeindex;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) </div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified node does not exist! SDO write failed!&quot;</span>);</div>
<div class="line">      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Objektindex: %d Subindex: %d\n&quot;</span>, </div>
<div class="line">        _boardnr, _nodeid, _objectindex, _subindex);</div>
<div class="line">      </div>
<div class="line">      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);</div>
<div class="line">      <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// if CanOpen-Type is a twistet integer (etc. 52Bit ) the datalength must be adjusted</span></div>
<div class="line">    <span class="keywordtype">int</span> canopentype = <a class="code" href="classrlCanOpen.html#abab868b55f7b1bc5e14c9185e711d5e7" title="returns daemontype number of a specific object">getObjectType</a>(_boardnr, _nodeid, _objectindex, _subindex);</div>
<div class="line">   </div>
<div class="line">    <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a>(canopentype)) &amp;&amp; (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()))</div>
<div class="line">      length = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a9d93e04857e7351221b4cd0f1adf4efe">get_CanOpenTypeLength</a>(canopentype);</div>
<div class="line">   </div>
<div class="line">     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0;i&lt;length;i++)</div>
<div class="line">        <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[i] = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(i);</div>
<div class="line"></div>
<div class="line">    </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx          = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx          = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln          = 8+ length;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr          = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a           = 0; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f           = 0;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b           = <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e           = 0;</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr  = _nodeid;  </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area   = 0; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr    = _objectindex; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx    = _subindex; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt    = length; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type   = 0; </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function    = <a class="code" href="rlcanopenstructs_8h.html#ab710ffcc49def608b33679e823c8e0c4">TASK_TFC_WRITE</a>; </div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>(DevPutMessage(0, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,5000L) != DRV_NO_ERROR) <span class="keywordflow">return</span> 0;</div>
<div class="line">         </div>
<div class="line">    </div>
<div class="line">  <span class="comment">// receive the answer</span></div>
<div class="line">  </div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage ( _boardnr,                <span class="comment">// Device Number            </span></div>
<div class="line">                         <span class="keyword">sizeof</span>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>), </div>
<div class="line">                         (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,   <span class="comment">// Pointer to user buffer  </span></div>
<div class="line">                         2000L );                 <span class="comment">// Timeout   </span></div>
<div class="line">   </div>
<div class="line">   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msgnrlocal = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> - 1;</div>
<div class="line">   </div>
<div class="line">   <span class="comment">// receive correct answer   </span></div>
<div class="line">   <span class="keywordflow">if</span>((<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a == <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>)&amp;&amp;(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr == msgnrlocal)){  </div>
<div class="line">      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f);</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f == <a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>) <span class="comment">// node active, no error</span></div>
<div class="line">      {</div>
<div class="line">        <span class="comment">//check if the mapping has changed</span></div>
<div class="line">        <span class="keywordflow">if</span>( (_objectindex &gt;= <a class="code" href="rlcanopenstructs_8h.html#a330bcfdaa91e6b28214c6f729e953887">TRANSMIT_PDO_MAPPING_STARTADRESS</a>) &amp;&amp;</div>
<div class="line">            (_objectindex &lt;= <a class="code" href="rlcanopenstructs_8h.html#ae409747bccc82f0f5c4c41fede2c0c7a">TRANSMIT_PDO_MAPPING_MAXADRESS</a>) &amp;&amp; </div>
<div class="line">            (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()) )</div>
<div class="line">        { </div>
<div class="line">          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Mapping has changed: boardid %d, nodeid %d, objectindex %x\n&quot;</span>, </div>
<div class="line">            _boardnr, _nodeid, _objectindex);</div>
<div class="line">            </div>
<div class="line">          pdoid = <a class="code" href="classrlCanOpen.html#a07a517a30bff32985a1e54a4787e1006" title="return PdoId of mapped object.">getPdoID</a>(_boardnr, _nodeid, _objectindex, <a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>);</div>
<div class="line">          <a class="code" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a>(_boardnr,_nodeid,pdoid,<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (_objectindex &gt;= <a class="code" href="rlcanopenstructs_8h.html#ac3149ff3f10f094a76671d481773ba1a">RECEIVE_PDO_MAPPING_STARTADRESS</a>) &amp;&amp; </div>
<div class="line">                  (_objectindex &lt;= <a class="code" href="rlcanopenstructs_8h.html#aec05da2dc4c26fb5ca45cd2bffd2ae9f">RECEIVE_PDO_MAPPING_MAXADRESS</a>) &amp;&amp;</div>
<div class="line">                  (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()) )</div>
<div class="line">        {</div>
<div class="line">          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Mapping has changed: boardid %d, nodeid %d, objectindex %x\n&quot;</span>, </div>
<div class="line">            _boardnr, _nodeid, _objectindex);</div>
<div class="line">          pdoid = <a class="code" href="classrlCanOpen.html#a07a517a30bff32985a1e54a4787e1006" title="return PdoId of mapped object.">getPdoID</a>(_boardnr, _nodeid, _objectindex, <a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>);</div>
<div class="line">          <a class="code" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a>(_boardnr,_nodeid,pdoid,<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">      {</div>
<div class="line">        sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;message.f = %d  message.f = %x Hex \n&quot;</span>, </div>
<div class="line">          <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f, <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f);</div>
<div class="line">          </div>
<div class="line">        <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">        _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">      _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(-1);</div>
<div class="line">      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;message.a = %d message.nr = %d vergleich mit: %d\n&quot;</span>, </div>
<div class="line">        <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a, <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr, msgnrlocal);</div>
<div class="line">        </div>
<div class="line">      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR during read SDO message!&quot;</span>);</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Obj: %x Sub: %x\n&quot;</span>, </div>
<div class="line">      _boardnr, _nodeid, _objectindex, _subindex);</div>
<div class="line">      </div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3b59ba388442d8ccf33f0f031752f6cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::sendNMTCommand </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>_cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a NMT Command to one or all nodes (of one board) </p>
<p>Using this function you can send a NMT Command to one or all nodes (of one board). NMT (Network Management) is a CanOpen service. Because of the device there are constrictions for the user. You can only execute the follow NMT commands: START_REMOTE_NODE, STOP_REMOTE_NODE, ENTER_PREOPERATIONAL, RESET_NODE, RESET_COMMUNICATION The corresponding '#defines' are declared in canopenstructs.h </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01132">1132</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  MSG_STRUC <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>;</div>
<div class="line">  <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);</div>
<div class="line">  </div>
<div class="line">  message.rx = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>         ;<span class="comment">//receiver = user at HOST</span></div>
<div class="line">  message.tx = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>     ;<span class="comment">// transmitter = USR_INTF-Task</span></div>
<div class="line">  message.ln = 2                ;<span class="comment">//length of message</span></div>
<div class="line">  message.nr = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++      ;<span class="comment">//number of the message</span></div>
<div class="line">  message.a  = 0                ;<span class="comment">//no answer</span></div>
<div class="line">  message.f  = 0                ;<span class="comment">//error, status</span></div>
<div class="line">  message.b  = <a class="code" href="rlcanopenstructs_8h.html#a37f659f732180aa50171e6aee00f2a1d">CMD_NMT_Module_Protocol</a>;<span class="comment">//command = COM_Node_Diag</span></div>
<div class="line">  message.e =  0                ;<span class="comment">//extension</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">// NMT Command specifier</span></div>
<div class="line">        <span class="comment">//1     Start Remote Node</span></div>
<div class="line">        <span class="comment">//2     Stop Remote Node</span></div>
<div class="line">        <span class="comment">//128   Enter Pre-Operational</span></div>
<div class="line">        <span class="comment">//129   Reset Node</span></div>
<div class="line">        <span class="comment">//130   Reset Communication</span></div>
<div class="line">  message.data[0] = _cmd                ;<span class="comment">//NMT Command specifier</span></div>
<div class="line">  message.data[1] = _nodeid     ;<span class="comment">//NodeID</span></div>
<div class="line">  </div>
<div class="line">   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevPutMessage(_boardnr, (MSG_STRUC *)&amp;message, 5000L)) </div>
<div class="line">         == DRV_NO_ERROR )</div>
<div class="line"> {</div>
<div class="line">   <span class="keywordflow">while</span>( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage(_boardnr, <span class="keyword">sizeof</span>(message), </div>
<div class="line">                               (MSG_STRUC *)&amp;message, 0)) </div>
<div class="line">           == DRV_DEV_GET_NO_MESSAGE )</div>
<div class="line">   {</div>
<div class="line">     <span class="keywordflow">continue</span>;</div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">if</span> ( <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> == DRV_NO_ERROR )</div>
<div class="line">   {</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;NMT message successfully received\n&quot;</span>);</div>
<div class="line">     <span class="comment">// continue;</span></div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">else</span></div>
<div class="line">   {</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Error  Message (f = %d))\n&quot;</span>,message.f);</div>
<div class="line">     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevGetMessage(%d, sizeof(message), &amp;message, 500): %d\n&quot;</span>,</div>
<div class="line">             _boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);</div>
<div class="line">     </div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">  {</div>
<div class="line">    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevPutMessage(NMT)(%d, &amp;message, 5000): %d\n&quot;</span>,_boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  } <span class="comment">/* if ( (sRet = DevPutMessage(...)) == DRV_NO_ERROR ) else */</span></div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> 1;     </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a75581c22eb7264ed2926e535835f1f61"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">short rlCanOpen::setBoardActive </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>sets a desired CanOpenMaster active, so that it can be used </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00285">285</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">                        </div>
<div class="line">  <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevSetHostState( _boardnr, HOST_READY, 0L) == DRV_NO_ERROR) )   </div>
<div class="line">    <a class="code" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72" title="the currently active board">activeboard</a> = _boardnr;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af8071fb948b6862ec7444e4f9b33b679"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::showNodeConfiguration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_nodeid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>prints out the configuration of a specific node </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00303">303</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size(); i++)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getNodeID() == _nodeid) &amp;&amp; </div>
<div class="line">        (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getBoardID() == _boardnr))</div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;showConfiguration();</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">      </div>
<div class="line">    }           </div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>; </div>
<div class="line">} </div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afb672e8a6cd805cd5ed902fb740a6f3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::showNodeConfiguration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>prints out the configuration off all available nodes from all boards </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00320">320</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size() == 0) <span class="keywordflow">return</span> 0;</div>
<div class="line">  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size(); i++)</div>
<div class="line">  {</div>
<div class="line">    <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;showConfiguration();   </div>
<div class="line">  }</div>
<div class="line">   <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="af6158583052812792b8036d631d95a72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::activeboard</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the currently active board </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00219">219</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3eff7e93db293eb999c1accf78d56e24"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::boardcount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the current count of CanOpenMaster cards </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00253">253</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac61d9cf8e555c36c2b558cda10e9193f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::enableLogging</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>this indicator is true when stdout is redirected to file. it is set in the ini-file </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00281">281</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae49809a8c8792a84afdbaf5339ccfc56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FILE* rlCanOpen::err_fp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to error logfile. </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00241">241</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a64a5fceff2c1c9d97a319eab86b07431"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char rlCanOpen::err_out_buf[255]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>this string buffer is usually written with sprintf before sent to stdout </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00235">235</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0547463787b69513660fefb1f5b5848d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString rlCanOpen::logFileName</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>name of logfile stdout is redirected to </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00244">244</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a86ad06349b70e8d0fceaeb06efa362f1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">RCS_MESSAGETELEGRAM_10 rlCanOpen::message</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>hilscher specific message structur which will be sent to the master card </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00247">247</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8bc3d3346fdb9e64c6bc041fcac19b76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char rlCanOpen::messagenr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>message counter </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00256">256</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6fe4e7245881d141b63f42ea46f9fd72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QPtrVector&lt;<a class="el" href="classrlCanNode.html">rlCanNode</a>&gt; rlCanOpen::nodelist</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>this list contains all nodes from all boards </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00250">250</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1c40a2fc97d124fafe75c2f58c121f25"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">short rlCanOpen::sRet</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>return value for hilscher specific message functions </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00238">238</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a></li>
<li><a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1
</small></address>
</body>
</html>
