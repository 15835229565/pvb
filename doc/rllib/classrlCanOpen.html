<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>rllib: rlCanOpen Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>rlCanOpen Class Reference</h1><!-- doxytag: class="rlCanOpen" -->
<p>main class which provides canopen API functions and manages all nodes.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>&gt;</code></p>

<p><a href="classrlCanOpen-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a543e78ab2f7dfc71c8967babc4537400">rlCanOpen</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#abb1f2ae469b8669e92de89225fe7cc29">rlCanOpen</a> (char *_inifilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a5d6f4e64167fb38d3fb670381c483852">~rlCanOpen</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ad17ae29368457cd075e57d82140de997">getBoardCount</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns the number of available boards  <a href="#ad17ae29368457cd075e57d82140de997"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae">getActiveBoard</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns the number of currently active board  <a href="#a3e7b87154134ee74f2a7611a3b931dae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#af8071fb948b6862ec7444e4f9b33b679">showNodeConfiguration</a> (int _boardnr, int _nodeid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">prints out the configuration of a specific node  <a href="#af8071fb948b6862ec7444e4f9b33b679"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#afb672e8a6cd805cd5ed902fb740a6f3e">showNodeConfiguration</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">prints out the configuration off all available nodes from all boards  <a href="#afb672e8a6cd805cd5ed902fb740a6f3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713">sdo_read</a> (int _boardnr, int _nodeid, int _objectindex, int _subindex, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_sdo_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">read a certain object from the object dictionary of a node  <a href="#a0a0e5e4328ff82cc5a7de3e8fa9c9713"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#afe214122e51cdd214d586ef1b50a5b34">sdo_write</a> (int _boardnr, int _nodeid, int _objectindex, int _subindex, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_sdo_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">write data into a certain object from the object dictionary of a node  <a href="#afe214122e51cdd214d586ef1b50a5b34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a73a3479ae9754495e17aa6591dbf135e">pdo_receive</a> (int _boardnr, int _nodeid, int _pdonr, int _mappingnr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">using the pdo_receive function you can receive a mapped object within PDO  <a href="#a73a3479ae9754495e17aa6591dbf135e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aad8dd8baeb1b1caf32b38528b5039060">pdo_receive</a> (int _boardnr, int _nodeid, int _pdonr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">using the pdo_receive function you can receive a PDO (Process Data Object)  <a href="#aad8dd8baeb1b1caf32b38528b5039060"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aa0af0f6576ec284128e9c3efb4770ca2">pdo_transmit</a> (int _boardnr, int _nodeid, int _pdonr, int _mappingnr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">transmit a mapped object within a PDO to a specific node  <a href="#aa0af0f6576ec284128e9c3efb4770ca2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a813d45bf60088fc0d4fcd70264a7dbe1">pdo_transmit</a> (int _boardnr, int _nodeid, int _pdonr, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_pdo_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">transmit a 8 Byte PDO to a specific node  <a href="#a813d45bf60088fc0d4fcd70264a7dbe1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252">getNodeIndex</a> (int _boardnr, int _nodeid, int &amp;_index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this function returns the listindex of a desired node  <a href="#a79e0198f870d1c405d4b692628133252"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#abab868b55f7b1bc5e14c9185e711d5e7">getObjectType</a> (int _boardnr, int _nodeid, int _objectindex, int _subindex)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns daemontype number of a specific object  <a href="#abab868b55f7b1bc5e14c9185e711d5e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aef2160067fb768dc63c038fa0abc0f4d">getNodeState</a> (int _boardnr, int _nodeid, <a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;_data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">use this function to get information about a specific node  <a href="#aef2160067fb768dc63c038fa0abc0f4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac65b49a7d5677c354cd73c6980687219">restartBoard</a> (int _boardnr, int _restarttype)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">using this function you are able to restart a CanOpenMaster board  <a href="#ac65b49a7d5677c354cd73c6980687219"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a3b59ba388442d8ccf33f0f031752f6cd">sendNMTCommand</a> (int _boardnr, int _nodeid, unsigned char _cmd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">send a NMT Command to one or all nodes (of one board)  <a href="#a3b59ba388442d8ccf33f0f031752f6cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a> (int _canopentype)</td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a464c2a31796b3c816f6282e1df12f7f7">getNodeConfiguration</a> (int _nodeID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a07a517a30bff32985a1e54a4787e1006">getPdoID</a> (int _boardnr, int _nodeid, int _objektindex, int _direction)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return PdoId of mapped object.  <a href="#a07a517a30bff32985a1e54a4787e1006"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a2ee4ce66da6eac2f80309f968e1a49fe">read_inifile</a> (const char *_filename)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">read properties of inifile  <a href="#a2ee4ce66da6eac2f80309f968e1a49fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921">ini</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialize nodes and create nodelist  <a href="#aab75d58a1776264647ee87df5972f921"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ae03cba7206676285f6639b7f744312b4">delmsg</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">clear message struct by setting all elements to zero  <a href="#ae03cba7206676285f6639b7f744312b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#af2ed347a61f28ad445ba615d6e82e2d8">iniboards</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read informations about installed devices.  <a href="#af2ed347a61f28ad445ba615d6e82e2d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61">setBoardActive</a> (int _boardnr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">sets a desired CanOpenMaster active, so that it can be used  <a href="#a75581c22eb7264ed2926e535835f1f61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a> (int _boardnr, int _nodeid, int _pdoID, int _pdoDirection)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac05ad772d2766154831c90bc17877de8">createNodes</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Search for nodes in all boards and append it into the nodelist.  <a href="#ac05ad772d2766154831c90bc17877de8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a992c869dba69a39723309bbc960db2a8">createMappingObjects</a> (int _boardid, int _nodeid, int _pdoDirection)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this function writes the mapping objects for each pdo of a node  <a href="#a992c869dba69a39723309bbc960db2a8"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72">activeboard</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the currently active board  <a href="#af6158583052812792b8036d631d95a72"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431">err_out_buf</a> [255]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this string buffer is usually written with sprintf before sent to stdout  <a href="#a64a5fceff2c1c9d97a319eab86b07431"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25">sRet</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return value for hilscher specific message functions  <a href="#a1c40a2fc97d124fafe75c2f58c121f25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">FILE *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ae49809a8c8792a84afdbaf5339ccfc56">err_fp</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to error logfile.  <a href="#ae49809a8c8792a84afdbaf5339ccfc56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d">logFileName</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">name of logfile stdout is redirected to  <a href="#a0547463787b69513660fefb1f5b5848d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">RCS_MESSAGETELEGRAM_10&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1">message</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">hilscher specific message structur which will be sent to the master card  <a href="#a86ad06349b70e8d0fceaeb06efa362f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QPtrVector&lt; <a class="el" href="classrlCanNode.html">rlCanNode</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72">nodelist</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this list contains all nodes from all boards  <a href="#a6fe4e7245881d141b63f42ea46f9fd72"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24">boardcount</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the current count of CanOpenMaster cards  <a href="#a3eff7e93db293eb999c1accf78d56e24"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76">messagenr</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">message counter  <a href="#a8bc3d3346fdb9e64c6bc041fcac19b76"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>main class which provides canopen API functions and manages all nodes. </p>
<p>This class contains a canopen specific API which accesses the canopen bus through the bus-independ Hilscher device API. It reads the configuration which has to be written previously to the device by SyCon. Based on this configuration data it searches node corresponding EDS files to create object directories. These help to enshure type security and cast warnings when users try to write incorrect data types to can nodes. </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00055">55</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a543e78ab2f7dfc71c8967babc4537400"></a><!-- doxytag: member="rlCanOpen::rlCanOpen" ref="a543e78ab2f7dfc71c8967babc4537400" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlCanOpen::rlCanOpen </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00040">40</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00041"></a>00041 {
<a name="l00042"></a>00042   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Constructer nodes class\n&quot;</span>);
<a name="l00043"></a>00043   <a class="code" href="classrlCanOpen.html#a2ee4ce66da6eac2f80309f968e1a49fe" title="read properties of inifile">read_inifile</a>(<span class="stringliteral">&quot;./canopen.ini&quot;</span>);
<a name="l00044"></a>00044   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>){
<a name="l00045"></a>00045     FILE* fp;
<a name="l00046"></a>00046     fp = freopen (<a class="code" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d" title="name of logfile stdout is redirected to">logFileName</a>.ascii(),<span class="stringliteral">&quot;w&quot;</span>,stdout); <span class="comment">// redirekt stdout to textfile</span>
<a name="l00047"></a>00047     
<a name="l00048"></a>00048     <span class="comment">/* enable linebuffering in order to write every line to the file immediately */</span>
<a name="l00049"></a>00049     setvbuf ( fp , NULL , _IOFBF , 1024 ); 
<a name="l00050"></a>00050   }
<a name="l00051"></a>00051   <a class="code" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921" title="initialize nodes and create nodelist">ini</a>();
<a name="l00052"></a>00052 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abb1f2ae469b8669e92de89225fe7cc29"></a><!-- doxytag: member="rlCanOpen::rlCanOpen" ref="abb1f2ae469b8669e92de89225fe7cc29" args="(char *_inifilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlCanOpen::rlCanOpen </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>_inifilename</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00029">29</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00030"></a>00030 {
<a name="l00031"></a>00031   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Constructer nodes class\n&quot;</span>);
<a name="l00032"></a>00032   <a class="code" href="classrlCanOpen.html#a2ee4ce66da6eac2f80309f968e1a49fe" title="read properties of inifile">read_inifile</a>(_inifilename);
<a name="l00033"></a>00033   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>){
<a name="l00034"></a>00034     freopen (<a class="code" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d" title="name of logfile stdout is redirected to">logFileName</a>.ascii(),<span class="stringliteral">&quot;w&quot;</span>,stdout); <span class="comment">// redirekt stdout to textfile</span>
<a name="l00035"></a>00035   }
<a name="l00036"></a>00036   <a class="code" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921" title="initialize nodes and create nodelist">ini</a>();
<a name="l00037"></a>00037 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5d6f4e64167fb38d3fb670381c483852"></a><!-- doxytag: member="rlCanOpen::~rlCanOpen" ref="a5d6f4e64167fb38d3fb670381c483852" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlCanOpen::~rlCanOpen </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00054">54</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00055"></a>00055 {
<a name="l00056"></a>00056   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;destruktor rlCanOpen\n&quot;</span>);
<a name="l00057"></a>00057   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a>;i++)
<a name="l00058"></a>00058     DevExitBoard(i);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="preprocessor">#ifdef RLWIN32</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>  DevCloseDriver(0);
<a name="l00062"></a>00062 <span class="preprocessor">#else</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>  DevCloseDriver();
<a name="l00064"></a>00064 <span class="preprocessor">#endif    </span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>)    
<a name="l00066"></a>00066     fclose (stdout);
<a name="l00067"></a>00067   
<a name="l00068"></a>00068 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a992c869dba69a39723309bbc960db2a8"></a><!-- doxytag: member="rlCanOpen::createMappingObjects" ref="a992c869dba69a39723309bbc960db2a8" args="(int _boardid, int _nodeid, int _pdoDirection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::createMappingObjects </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_pdoDirection</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this function writes the mapping objects for each pdo of a node </p>
<p>creates the mappings for each pdo </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00137">137</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00138"></a>00138 {
<a name="l00139"></a>00139   <span class="keywordtype">int</span> pdomax = 0;
<a name="l00140"></a>00140   <span class="keywordflow">if</span> (_pdoDirection == <a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>)
<a name="l00141"></a>00141     pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;getReceivePdoCount();
<a name="l00142"></a>00142   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(_pdoDirection == <a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>)
<a name="l00143"></a>00143     pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;getTransmitPdoCount();
<a name="l00144"></a>00144     
<a name="l00145"></a>00145   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1;j&lt;=pdomax;j++)    <span class="comment">//each receive/transmit pdo</span>
<a name="l00146"></a>00146   <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a>(_boardid,_nodeid,j,_pdoDirection)==0) <span class="keywordflow">return</span> 0;
<a name="l00147"></a>00147   <span class="keywordflow">return</span> 1;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 }   
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac05ad772d2766154831c90bc17877de8"></a><!-- doxytag: member="rlCanOpen::createNodes" ref="ac05ad772d2766154831c90bc17877de8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::createNodes </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Search for nodes in all boards and append it into the nodelist. </p>
<p>this function checks the bus for available nodes and creates a corresponding nodelist </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00103">103</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00104"></a>00104 {
<a name="l00105"></a>00105  <span class="keywordtype">int</span> nodeid;
<a name="l00106"></a>00106   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> boardid = 0;boardid&lt;<a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a>;boardid++)
<a name="l00107"></a>00107   {
<a name="l00108"></a>00108     <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(boardid);
<a name="l00109"></a>00109     <span class="keywordflow">for</span>(nodeid = 0; nodeid &lt;= <a class="code" href="rlcanopenstructs_8h.html#abd2aacdca9cb2a1a30f3392256b96ea3">MAX_NODES</a>; nodeid++)  <span class="comment">// from node 0..127</span>
<a name="l00110"></a>00110       <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a464c2a31796b3c816f6282e1df12f7f7">getNodeConfiguration</a>(nodeid)) <span class="comment">// writes received node-configuration </span>
<a name="l00111"></a>00111                                         <span class="comment">// into class-global message-struct</span>
<a name="l00112"></a>00112       {
<a name="l00113"></a>00113         <span class="comment">// new node found. insert it into the nodelist</span>
<a name="l00114"></a>00114         <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.resize( <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size() + 1 );   
<a name="l00115"></a>00115         
<a name="l00116"></a>00116         <span class="comment">// append the new node in the list</span>
<a name="l00117"></a>00117         <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.insert( <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1, 
<a name="l00118"></a>00118                          <span class="keyword">new</span> <a class="code" href="classrlCanNode.html" title="class to manage one node of a CanOpenMaster board in a CanOpen network">rlCanNode</a>(boardid,nodeid,<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>));
<a name="l00119"></a>00119         
<a name="l00120"></a>00120        <span class="comment">//append Mapping data                                  </span>
<a name="l00121"></a>00121         <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;hasMapping()){
<a name="l00122"></a>00122           <span class="keywordflow">if</span>(!<a class="code" href="classrlCanOpen.html#a992c869dba69a39723309bbc960db2a8" title="this function writes the mapping objects for each pdo of a node">createMappingObjects</a>(boardid,nodeid,<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>))<span class="keywordflow">return</span> 0;
<a name="l00123"></a>00123           <span class="keywordflow">if</span>(!<a class="code" href="classrlCanOpen.html#a992c869dba69a39723309bbc960db2a8" title="this function writes the mapping objects for each pdo of a node">createMappingObjects</a>(boardid,nodeid,<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>))<span class="keywordflow">return</span> 0;
<a name="l00124"></a>00124         }
<a name="l00125"></a>00125         <span class="keywordflow">else</span>
<a name="l00126"></a>00126         {
<a name="l00127"></a>00127           <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;WARNING: no Mapping available on node %d.&quot;</span>, nodeid);
<a name="l00128"></a>00128           <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Probably EDS file couldn&#39;t be found in EDS directory.\n&quot;</span>);
<a name="l00129"></a>00129         }
<a name="l00130"></a>00130       }             
<a name="l00131"></a>00131   }
<a name="l00132"></a>00132   <span class="keywordflow">return</span> 1;
<a name="l00133"></a>00133 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae03cba7206676285f6639b7f744312b4"></a><!-- doxytag: member="rlCanOpen::delmsg" ref="ae03cba7206676285f6639b7f744312b4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rlCanOpen::delmsg </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>clear message struct by setting all elements to zero </p>
<p>this function resets all elements of global message struct to zero </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00859">859</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00859"></a>00859                       {
<a name="l00860"></a>00860   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx            =0;
<a name="l00861"></a>00861   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx            =0;
<a name="l00862"></a>00862   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln            =0;
<a name="l00863"></a>00863   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr            =0;
<a name="l00864"></a>00864   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a             =0;
<a name="l00865"></a>00865   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f             =0;
<a name="l00866"></a>00866   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b             =0;
<a name="l00867"></a>00867   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e             =0;
<a name="l00868"></a>00868   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr    =0;
<a name="l00869"></a>00869   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area     =0;
<a name="l00870"></a>00870   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr      =0;
<a name="l00871"></a>00871   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx      =0;
<a name="l00872"></a>00872   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt      =0;
<a name="l00873"></a>00873   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type     =0;
<a name="l00874"></a>00874   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function      =0;
<a name="l00875"></a>00875   
<a name="l00876"></a>00876   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="rlcanopenstructs_8h.html#a4d267be232afc6e35e9cc9a4a1987293">MAX_SDO_BUFFERSIZE</a>; i++)
<a name="l00877"></a>00877     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[i] = 0;
<a name="l00878"></a>00878 
<a name="l00879"></a>00879 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3e7b87154134ee74f2a7611a3b931dae"></a><!-- doxytag: member="rlCanOpen::getActiveBoard" ref="a3e7b87154134ee74f2a7611a3b931dae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getActiveBoard </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns the number of currently active board </p>
<p>returns the currently active board </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00296">296</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00297"></a>00297 {
<a name="l00298"></a>00298   <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72" title="the currently active board">activeboard</a>;
<a name="l00299"></a>00299 }                                                                                                                                                                                
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad17ae29368457cd075e57d82140de997"></a><!-- doxytag: member="rlCanOpen::getBoardCount" ref="ad17ae29368457cd075e57d82140de997" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getBoardCount </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns the number of available boards </p>
<p>returns the current count of available CanOpenMaster cards </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00211">211</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00212"></a>00212 {
<a name="l00213"></a>00213   <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a>;
<a name="l00214"></a>00214 }  
</pre></div></p>

</div>
</div>
<a class="anchor" id="a464c2a31796b3c816f6282e1df12f7f7"></a><!-- doxytag: member="rlCanOpen::getNodeConfiguration" ref="a464c2a31796b3c816f6282e1df12f7f7" args="(int _nodeID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::getNodeConfiguration </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeID</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function reads out the configuration of a specific node using special Hilscher commands (CMDCODE_GET_CONFIGURATION). If the master board isn't configurated by SyCon it is not possibly to use this function with success. It returns false if the node is not available </p>

<p><p>Device Number</p>
<p>Pointer to user buffer</p>
<p>Timeout </p>
</p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00217">217</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00218"></a>00218 {
<a name="l00219"></a>00219   <span class="comment">//build message       </span>
<a name="l00220"></a>00220   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx            = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>; 
<a name="l00221"></a>00221   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx            = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>;
<a name="l00222"></a>00222   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln            = 8;
<a name="l00223"></a>00223   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr            =<a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++; 
<a name="l00224"></a>00224   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a             =0; 
<a name="l00225"></a>00225   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f             =0;
<a name="l00226"></a>00226   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b             =<a class="code" href="rlcanopenstructs_8h.html#a92aacf2e33d2d8d3e9893c4538bfae2b">CMDCODE_GET_CONFIGURATION</a>;
<a name="l00227"></a>00227   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e             =0x00;  <span class="comment">//fragmentation</span>
<a name="l00228"></a>00228   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr    =_nodeID;  
<a name="l00229"></a>00229   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area     =0; 
<a name="l00230"></a>00230   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr      =0; 
<a name="l00231"></a>00231   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx      =0; 
<a name="l00232"></a>00232   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt      =0; 
<a name="l00233"></a>00233   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type     =0; 
<a name="l00234"></a>00234   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function      =0;
<a name="l00235"></a>00235   
<a name="l00236"></a>00236   <span class="comment">//put configuration request</span>
<a name="l00237"></a>00237   DevPutMessage(0, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,5000L) ;  
<a name="l00238"></a>00238   
<a name="l00239"></a>00239   <span class="comment">//receive answer message</span>
<a name="l00240"></a>00240   <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage (  0,                       
<a name="l00241"></a>00241                           <span class="keyword">sizeof</span>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>),      
<a name="l00242"></a>00242                           (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,   
<a name="l00243"></a>00243                           2000L );                 
<a name="l00244"></a>00244 
<a name="l00245"></a>00245   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msgnrlocal = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> -1;
<a name="l00246"></a>00246   
<a name="l00247"></a>00247   <span class="comment">// receive correct answer </span>
<a name="l00248"></a>00248   <span class="keywordflow">if</span>((<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a == <a class="code" href="rlcanopenstructs_8h.html#a786531d89ce666d3c6f40e6b3a39c504">RESPONSE_CODE_GET_CONFIGURATION</a>) &amp;&amp; (<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr == msgnrlocal))
<a name="l00249"></a>00249     <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f == <a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>) <span class="comment">// node active, no error</span>
<a name="l00250"></a>00250       <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e == 0x00) <span class="comment">//configuration fits in the message</span>
<a name="l00251"></a>00251       {
<a name="l00252"></a>00252         sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;Board %d node %d is active. No problems found\n&quot;</span>, 
<a name="l00253"></a>00253           <a class="code" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae" title="returns the number of currently active board">getActiveBoard</a>(), _nodeID);
<a name="l00254"></a>00254         
<a name="l00255"></a>00255         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00256"></a>00256         <span class="keywordflow">return</span> 1;
<a name="l00257"></a>00257       }
<a name="l00258"></a>00258       <span class="keywordflow">else</span>
<a name="l00259"></a>00259       {
<a name="l00260"></a>00260          sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;Board %d node %d is active. \n&quot;</span>, 
<a name="l00261"></a>00261            <a class="code" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae" title="returns the number of currently active board">getActiveBoard</a>(), _nodeID);
<a name="l00262"></a>00262            
<a name="l00263"></a>00263          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00264"></a>00264          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Configuration data does not fit in one message,\n&quot;</span>);
<a name="l00265"></a>00265          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;so the current node does not include the complete data\n&quot;</span>);
<a name="l00266"></a>00266          <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot; - multiplex configration data is not yet implemented!!! -\n&quot;</span>);
<a name="l00267"></a>00267          <span class="keywordflow">return</span> 1;
<a name="l00268"></a>00268       } 
<a name="l00269"></a>00269     <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;
<a name="l00270"></a>00270   <span class="keywordflow">else</span> 
<a name="l00271"></a>00271   {
<a name="l00272"></a>00272     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;----&gt;message.a=%d, message.nr=%d unsere msg nr: %d\n&quot;</span>, 
<a name="l00273"></a>00273       <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a, <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr, msgnrlocal);
<a name="l00274"></a>00274       
<a name="l00275"></a>00275     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00276"></a>00276     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <span class="stringliteral">&quot;Communication ERROR!!!&quot;</span>);
<a name="l00277"></a>00277     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00278"></a>00278     <span class="keywordflow">return</span> 0;
<a name="l00279"></a>00279   }
<a name="l00280"></a>00280 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a79e0198f870d1c405d4b692628133252"></a><!-- doxytag: member="rlCanOpen::getNodeIndex" ref="a79e0198f870d1c405d4b692628133252" args="(int _boardnr, int _nodeid, int &amp;_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getNodeIndex </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>_index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this function returns the listindex of a desired node </p>
<p>Because the nodes of all boards are stored in one list, the listindex is not equal to the nodeID(1-127). Use this function to get the listindex of a desired node </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00882">882</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00883"></a>00883 {
<a name="l00884"></a>00884   <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size(); i++)
<a name="l00885"></a>00885   {
<a name="l00886"></a>00886     <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getNodeID() == _nodeid) &amp;&amp; 
<a name="l00887"></a>00887         (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getBoardID() == _boardnr))
<a name="l00888"></a>00888     {
<a name="l00889"></a>00889       _index = i;
<a name="l00890"></a>00890       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00891"></a>00891     }           
<a name="l00892"></a>00892   }
<a name="l00893"></a>00893   <span class="keywordflow">return</span> <span class="keyword">false</span>; 
<a name="l00894"></a>00894 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aef2160067fb768dc63c038fa0abc0f4d"></a><!-- doxytag: member="rlCanOpen::getNodeState" ref="aef2160067fb768dc63c038fa0abc0f4d" args="(int _boardnr, int _nodeid, rlCanOpenTypes &amp;_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getNodeState </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>use this function to get information about a specific node </p>
<p>Use this function to get information about a specific node. The nodestate, nodeerror and a nodestateFlag will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a>. Read the rlCanOpenTypes.h header to get further information about these variables. Hilscher specific function (so no CanOpoen services) are used to receive the information </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01045">1045</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01046"></a>01046 { 
<a name="l01047"></a>01047  
<a name="l01048"></a>01048  <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);
<a name="l01049"></a>01049  
<a name="l01050"></a>01050  COM_ND_DIAGNOSTICS * diag;
<a name="l01051"></a>01051  diag = (COM_ND_DIAGNOSTICS*) &amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[0];
<a name="l01052"></a>01052 
<a name="l01053"></a>01053   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>         ;<span class="comment">//receiver = user at HOST</span>
<a name="l01054"></a>01054   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>     ;<span class="comment">// transmitter = USR_INTF-Task</span>
<a name="l01055"></a>01055   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln = 8                ;<span class="comment">//length of message</span>
<a name="l01056"></a>01056   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++      ;<span class="comment">//number of the message</span>
<a name="l01057"></a>01057   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a  = 0                ;<span class="comment">//no answer</span>
<a name="l01058"></a>01058   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f  = 0                ;<span class="comment">//error, status</span>
<a name="l01059"></a>01059   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b  = <a class="code" href="rlcanopenstructs_8h.html#acddf85b855483e1edbff1ab0296f9924">CMDCODE_Node_Diag</a>;<span class="comment">//command = COM_Node_Diag</span>
<a name="l01060"></a>01060   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e =0                  ;<span class="comment">//extension</span>
<a name="l01061"></a>01061   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr = _nodeid  ;<span class="comment">//k Rem_Adr</span>
<a name="l01062"></a>01062   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area = 0         ;<span class="comment">// data area, unused</span>
<a name="l01063"></a>01063   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr  = 0         ;<span class="comment">//data address, unused</span>
<a name="l01064"></a>01064   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx  = 0         ;<span class="comment">//data index, unused</span>
<a name="l01065"></a>01065   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt  = 0         ;<span class="comment">//data count, unused</span>
<a name="l01066"></a>01066   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type = 5         ;<span class="comment">// data type byte string</span>
<a name="l01067"></a>01067   <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function =  1         ;<span class="comment">//function read</span>
<a name="l01068"></a>01068   
<a name="l01069"></a>01069   
<a name="l01070"></a>01070  if ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevPutMessage(_boardnr, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>, 5000L)) 
<a name="l01071"></a>01071        == DRV_NO_ERROR )
<a name="l01072"></a>01072  {
<a name="l01073"></a>01073    <span class="keywordflow">while</span>( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage(_boardnr, <span class="keyword">sizeof</span>(message), 
<a name="l01074"></a>01074                                 (MSG_STRUC *)&amp;message, 0)) 
<a name="l01075"></a>01075           == DRV_DEV_GET_NO_MESSAGE )       
<a name="l01076"></a>01076    {
<a name="l01077"></a>01077      <span class="keywordflow">continue</span>;
<a name="l01078"></a>01078    }
<a name="l01079"></a>01079    <span class="keywordflow">if</span> ( <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> == DRV_NO_ERROR )
<a name="l01080"></a>01080    {
<a name="l01081"></a>01081      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;message successfully received\n&quot;</span>);
<a name="l01082"></a>01082      <span class="comment">// continue;</span>
<a name="l01083"></a>01083    }
<a name="l01084"></a>01084    <span class="keywordflow">else</span>
<a name="l01085"></a>01085    {
<a name="l01086"></a>01086      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Error  Message (f = %d))\n&quot;</span>,message.f);
<a name="l01087"></a>01087      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevGetMessage(%d, sizeof(message), &amp;message, 500): %d\n&quot;</span>,
<a name="l01088"></a>01088              _boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
<a name="l01089"></a>01089              
<a name="l01090"></a>01090      <span class="keywordflow">return</span> 0;
<a name="l01091"></a>01091     } 
<a name="l01092"></a>01092   }
<a name="l01093"></a>01093   <span class="keywordflow">else</span>
<a name="l01094"></a>01094   {
<a name="l01095"></a>01095     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevPutMessage(%d, &amp;message, 5000): %d\n&quot;</span>,_boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
<a name="l01096"></a>01096     <span class="keywordflow">return</span> 0;
<a name="l01097"></a>01097   }   
<a name="l01098"></a>01098   _data.<a class="code" href="classrlCanOpenTypes.html#ae46a7cab0600325bf95dc1d3544397f4" title="sets type to RL_NODESTATE. Stores flag-data received from the device.">set_nodestateFlags</a>( diag-&gt;bNodeStatus_1.bNodeNoResponse, 
<a name="l01099"></a>01099                             diag-&gt;bNodeStatus_1.bEmcyBuffOverflow,
<a name="l01100"></a>01100                             diag-&gt;bNodeStatus_1.bPrmFault, 
<a name="l01101"></a>01101                             diag-&gt;bNodeStatus_1.bGuardActive,
<a name="l01102"></a>01102                             diag-&gt;bNodeStatus_1.bDeactivated );
<a name="l01103"></a>01103                        
<a name="l01104"></a>01104   _data.<a class="code" href="classrlCanOpenTypes.html#ac01c44e149d41b4998ee0b3f73590364" title="sets current state of node.">set_nodestate</a>(diag-&gt;bNodeState);
<a name="l01105"></a>01105   _data.<a class="code" href="classrlCanOpenTypes.html#a5c2f2d709ff2419c05fdb03794bea87f">set_nodeerror</a>(diag-&gt;bActualError);
<a name="l01106"></a>01106                        
<a name="l01107"></a>01107   _data.<a class="code" href="classrlCanOpenTypes.html#a45061bf88af2c0f0a09e163b37f6affc" title="alternative setter receives integer typenumber">set_DaemonType</a>(<a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3acdb6e58d9ad486fd43a8beaa993d2b35">rlCanOpenTypes::RL_NODESTATE</a>);
<a name="l01108"></a>01108   
<a name="l01109"></a>01109   <span class="keywordflow">return</span> 1;
<a name="l01110"></a>01110 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abab868b55f7b1bc5e14c9185e711d5e7"></a><!-- doxytag: member="rlCanOpen::getObjectType" ref="abab868b55f7b1bc5e14c9185e711d5e7" args="(int _boardnr, int _nodeid, int _objectindex, int _subindex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getObjectType </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_objectindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_subindex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns daemontype number of a specific object </p>
<p>returns daemontype number of an object. The type is retrieved from the node's objectdir. When no objectdir exists (e.g. because of a missing EDS file) or when the requested object does not exist, this function will return 0xFF (the corresponding value to <a class="el" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3ac2f64996a25d15c3ce264c93ee7d3f70">rlCanOpenTypes::RL_NOTYPE</a>) </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00897">897</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00901"></a>00901 {
<a name="l00902"></a>00902   <span class="keywordtype">int</span> nodeindex;
<a name="l00903"></a>00903   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr, _nodeid, nodeindex)){
<a name="l00904"></a>00904     <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping())
<a name="l00905"></a>00905       <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;objecttype(_objectindex, _subindex);
<a name="l00906"></a>00906     <span class="keywordflow">else</span>
<a name="l00907"></a>00907       <span class="keywordflow">return</span> <a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3a229debf1ae9bd7aa4fd5955de94b6433">rlCanOpenTypes::RL_BUFFER</a>;
<a name="l00908"></a>00908   }
<a name="l00909"></a>00909   <span class="keywordflow">else</span>{
<a name="l00910"></a>00910     <span class="keywordflow">return</span> <a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3ac2f64996a25d15c3ce264c93ee7d3f70">rlCanOpenTypes::RL_NOTYPE</a>;
<a name="l00911"></a>00911   }
<a name="l00912"></a>00912 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a07a517a30bff32985a1e54a4787e1006"></a><!-- doxytag: member="rlCanOpen::getPdoID" ref="a07a517a30bff32985a1e54a4787e1006" args="(int _boardnr, int _nodeid, int _objektindex, int _direction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::getPdoID </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_objektindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_direction</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return PdoId of mapped object. </p>
<p>this function iterates through the recieve/tramsmit pdo lists and returns the ID number of the pdo that fits the given objektindex. The PdoId identifies the send/receive PDO on the given node </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01015">1015</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01018"></a>01018                                         {
<a name="l01019"></a>01019   <span class="keywordtype">int</span> pdomax=0;
<a name="l01020"></a>01020   <span class="keywordtype">int</span> nodeindex=0;
<a name="l01021"></a>01021   <span class="keywordtype">int</span> madress=0;
<a name="l01022"></a>01022   <span class="comment">// get index of node in nodelist depending on boardid and nodeid</span>
<a name="l01023"></a>01023   <span class="comment">// index is stored in nodeindex variable</span>
<a name="l01024"></a>01024   <a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr, _nodeid, nodeindex); 
<a name="l01025"></a>01025   
<a name="l01026"></a>01026   <span class="comment">// get number of elements in particular PDO list</span>
<a name="l01027"></a>01027   <span class="keywordflow">if</span> (_direction == <a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>)
<a name="l01028"></a>01028     pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;getReceivePdoCount();
<a name="l01029"></a>01029   <span class="keywordflow">if</span> (_direction == <a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>)
<a name="l01030"></a>01030     pdomax = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;getTransmitPdoCount();
<a name="l01031"></a>01031    
<a name="l01032"></a>01032    <span class="comment">/* iterate through every element of particular list until mapping </span>
<a name="l01033"></a>01033 <span class="comment">      object adress matches given objectindex */</span>
<a name="l01034"></a>01034    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=1;j&lt;=pdomax;j++)  
<a name="l01035"></a>01035    {                                                                                                    
<a name="l01036"></a>01036       
<a name="l01037"></a>01037      madress = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_direction][j-1]-&gt;mappingOvAdress;    
<a name="l01038"></a>01038      <span class="keywordflow">if</span> (madress == _objektindex)
<a name="l01039"></a>01039        <span class="keywordflow">return</span> j;  
<a name="l01040"></a>01040    }
<a name="l01041"></a>01041    <span class="keywordflow">return</span> 0;
<a name="l01042"></a>01042 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aab75d58a1776264647ee87df5972f921"></a><!-- doxytag: member="rlCanOpen::ini" ref="aab75d58a1776264647ee87df5972f921" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::ini </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialize nodes and create nodelist </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00071">71</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00072"></a>00072 {
<a name="l00073"></a>00073   <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> = 0;
<a name="l00074"></a>00074   <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.setAutoDelete(<span class="keyword">true</span>);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   time_t rawtime;
<a name="l00077"></a>00077   <span class="keyword">struct </span>tm * timeinfo;
<a name="l00078"></a>00078   <a class="code" href="rlevent_8cpp.html#acf6c371f558a71d8a8bbc899e4429e0c">time</a> ( &amp;rawtime );
<a name="l00079"></a>00079   timeinfo = localtime ( &amp;rawtime );
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;\nnew session startet: %s\n&quot;</span>, asctime(timeinfo));
<a name="l00082"></a>00082   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00083"></a>00083  
<a name="l00084"></a>00084   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#af2ed347a61f28ad445ba615d6e82e2d8" title="Read informations about installed devices.">iniboards</a>()){
<a name="l00085"></a>00085     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;at least one board initialize!\n&quot;</span>);
<a name="l00086"></a>00086   }
<a name="l00087"></a>00087   <span class="keywordflow">else</span>
<a name="l00088"></a>00088   {
<a name="l00089"></a>00089     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;no board available or no board could be initialized correctly!\n&quot;</span>);
<a name="l00090"></a>00090     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Programm -&gt; Close\n&quot;</span>);
<a name="l00091"></a>00091     exit(0); 
<a name="l00092"></a>00092   }
<a name="l00093"></a>00093   
<a name="l00094"></a>00094   <span class="comment">// search for active nodes and create them</span>
<a name="l00095"></a>00095   
<a name="l00096"></a>00096   <a class="code" href="classrlCanOpen.html#ac05ad772d2766154831c90bc17877de8" title="Search for nodes in all boards and append it into the nodelist.">createNodes</a>();
<a name="l00097"></a>00097   
<a name="l00098"></a>00098  
<a name="l00099"></a>00099   <span class="keywordflow">return</span> 1;
<a name="l00100"></a>00100 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af2ed347a61f28ad445ba615d6e82e2d8"></a><!-- doxytag: member="rlCanOpen::iniboards" ref="af2ed347a61f28ad445ba615d6e82e2d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::iniboards </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read informations about installed devices. </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00154">154</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00155"></a>00155 {
<a name="l00156"></a>00156   
<a name="l00157"></a>00157   <span class="keywordtype">int</span> currentboardcount=0;
<a name="l00158"></a>00158   
<a name="l00159"></a>00159   BOARD_INFO tBoardInfo;
<a name="l00160"></a>00160 
<a name="l00161"></a>00161 <span class="preprocessor">#ifdef RLWIN32</span>
<a name="l00162"></a>00162 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevOpenDriver(0)) == DRV_NO_ERROR) 
<a name="l00163"></a>00163 <span class="preprocessor">#else</span>
<a name="l00164"></a>00164 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevOpenDriver()) == DRV_NO_ERROR) 
<a name="l00165"></a>00165 <span class="preprocessor">#endif    </span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>  {
<a name="l00167"></a>00167     <span class="comment">// Driver successfully opend, read board information</span>
<a name="l00168"></a>00168 <span class="preprocessor">#ifdef RLWIN32</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetBoardInfo( 0, <span class="keyword">sizeof</span>(tBoardInfo), &amp;tBoardInfo)) != DRV_NO_ERROR) 
<a name="l00170"></a>00170 <span class="preprocessor">#else</span>
<a name="l00171"></a>00171 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetBoardInfo( &amp;tBoardInfo)) != DRV_NO_ERROR) 
<a name="l00172"></a>00172 <span class="preprocessor">#endif    </span>
<a name="l00173"></a>00173 <span class="preprocessor"></span>          {
<a name="l00174"></a>00174           <span class="comment">// Function error</span>
<a name="l00175"></a>00175             <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>( <span class="stringliteral">&quot;DevGetBoardInfo RetWert = %5d \n&quot;</span>, <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> );
<a name="l00176"></a>00176           } <span class="keywordflow">else</span> 
<a name="l00177"></a>00177           {
<a name="l00178"></a>00178             <span class="comment">// Information successfully read, save for further use</span>
<a name="l00179"></a>00179             <span class="comment">// Check out which boards are available</span>
<a name="l00180"></a>00180             <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> usIdx = 0; usIdx &lt; MAX_DEV_BOARDS; usIdx++)
<a name="l00181"></a>00181             {
<a name="l00182"></a>00182               <span class="keywordflow">if</span> ( tBoardInfo.tBoard[usIdx].usAvailable == TRUE) {
<a name="l00183"></a>00183               <span class="comment">// Board is configured, try to init the board</span>
<a name="l00184"></a>00184                 <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevInitBoard(
<a name="l00185"></a>00185 #ifdef <a class="code" href="rldefine_8h.html#aa69fd2b1358365a7eabefb22433241a0">RLWIN32</a>
<a name="l00186"></a>00186                 tBoardInfo.tBoard[usIdx].usBoardNumber, NULL);
<a name="l00187"></a>00187 <span class="preprocessor">#else</span>
<a name="l00188"></a>00188 <span class="preprocessor"></span>                tBoardInfo.tBoard[usIdx].usBoard);
<a name="l00189"></a>00189 <span class="preprocessor">#endif    </span>
<a name="l00190"></a>00190 <span class="preprocessor"></span>                <span class="keywordflow">if</span> ( <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> != DRV_NO_ERROR) {
<a name="l00191"></a>00191                   <span class="comment">// Function error</span>
<a name="l00192"></a>00192                   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>( <span class="stringliteral">&quot;DevInitBoard RetWert = %5d \n&quot;</span>, <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> );
<a name="l00193"></a>00193                 } <span class="keywordflow">else</span> {
<a name="l00194"></a>00194                 <span class="comment">// DEVICE is available and ready............</span>
<a name="l00195"></a>00195                 currentboardcount++;
<a name="l00196"></a>00196                        }
<a name="l00197"></a>00197               }
<a name="l00198"></a>00198             }
<a name="l00199"></a>00199           }
<a name="l00200"></a>00200    }
<a name="l00201"></a>00201   <a class="code" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24" title="the current count of CanOpenMaster cards">boardcount</a> = currentboardcount;       
<a name="l00202"></a>00202  
<a name="l00203"></a>00203   <span class="keywordflow">if</span> (currentboardcount!=0)
<a name="l00204"></a>00204     <span class="keywordflow">return</span> 1;   
<a name="l00205"></a>00205   <span class="keywordflow">else</span>
<a name="l00206"></a>00206    <span class="keywordflow">return</span> 0;    
<a name="l00207"></a>00207 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afe931676649e9b5be1d244a3fc8f1b61"></a><!-- doxytag: member="rlCanOpen::is_twisted_type" ref="afe931676649e9b5be1d244a3fc8f1b61" args="(int _canopentype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::is_twisted_type </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_canopentype</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01226">1226</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01227"></a>01227 {
<a name="l01228"></a>01228   <span class="keywordflow">switch</span> (_canopentype){
<a name="l01229"></a>01229   
<a name="l01230"></a>01230     <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a1569876cd33de357eef45c9f3a6387d3">rlCanOpenTypes::INTEGER24_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  
<a name="l01231"></a>01231     <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a7648935585838256f2669d349d2a9bd2">rlCanOpenTypes::INTEGER40_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  
<a name="l01232"></a>01232     <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a27336b8f748dd0b43b8256aab3f705ea">rlCanOpenTypes::INTEGER48_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  
<a name="l01233"></a>01233     <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398aae497b0c7c514f702901387355c5ffe6">rlCanOpenTypes::INTEGER56_t</a> :<span class="keywordflow">return</span> <span class="keyword">true</span>;  
<a name="l01234"></a>01234     <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398ae768c04dc6f86ca7922ef3d90ff4c538">rlCanOpenTypes::UNSIGNED24_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>;  
<a name="l01235"></a>01235     <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a1b847508cc46d8a8900b2bf6e45f8297">rlCanOpenTypes::UNSIGNED40_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>;  
<a name="l01236"></a>01236     <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398a8a31b85f0f7716f806437a9e58e73be2">rlCanOpenTypes::UNSIGNED48_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>; 
<a name="l01237"></a>01237     <span class="keywordflow">case</span> <a class="code" href="classrlCanOpenTypes.html#a43e8ddee21c75d1e00896fc72df7f398acabf48be88a8827f322f2c20e49273cf">rlCanOpenTypes::UNSIGNED56_t</a>:<span class="keywordflow">return</span> <span class="keyword">true</span>;   
<a name="l01238"></a>01238     <span class="keywordflow">default</span>                          :<span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01239"></a>01239   };
<a name="l01240"></a>01240 
<a name="l01241"></a>01241 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aad8dd8baeb1b1caf32b38528b5039060"></a><!-- doxytag: member="rlCanOpen::pdo_receive" ref="aad8dd8baeb1b1caf32b38528b5039060" args="(int _boardnr, int _nodeid, int _pdonr, rlCanOpenTypes &amp;_pdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_receive </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>_pdo_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>using the pdo_receive function you can receive a PDO (Process Data Object) </p>
<p>using the pdo_receive function you can receive a PDO (Process Data Object), which is send from the specific node to the canOpen master card. The data will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. This function doesn't use mapping. So the whole 8Byte PDO data, will be received. To read out use the <a class="el" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">rlCanOpenTypes::get_buffer</a>({0-7}) function </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00637">637</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00641"></a>00641 {
<a name="l00642"></a>00642    
<a name="l00643"></a>00643    <span class="keywordtype">int</span> nodeindex;
<a name="l00644"></a>00644    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
<a name="l00645"></a>00645    {
<a name="l00646"></a>00646      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! PDO \</span>
<a name="l00647"></a>00647 <span class="stringliteral">                           receive failed! BoardId: %d NodeId: %d PDO \</span>
<a name="l00648"></a>00648 <span class="stringliteral">                           ID: %d\n&quot;</span>, _boardnr, _nodeid, _pdonr);
<a name="l00649"></a>00649      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00650"></a>00650      
<a name="l00651"></a>00651      <span class="comment">//cout&lt;&lt;&quot;ERROR: specified node does not exist!\n&quot;;</span>
<a name="l00652"></a>00652      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
<a name="l00653"></a>00653      <span class="keywordflow">return</span> 0;
<a name="l00654"></a>00654    }
<a name="l00655"></a>00655    
<a name="l00656"></a>00656    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){
<a name="l00657"></a>00657      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! \</span>
<a name="l00658"></a>00658 <span class="stringliteral">                           PDO receive failed! BoardId: %d NodeId: \</span>
<a name="l00659"></a>00659 <span class="stringliteral">                           %d PDO ID: %d\n&quot;</span>, _boardnr, _nodeid, _pdonr);
<a name="l00660"></a>00660      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00661"></a>00661 
<a name="l00662"></a>00662      <span class="comment">//cout&lt;&lt;&quot;PDO ID does not exists!\n&quot;;</span>
<a name="l00663"></a>00663      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);
<a name="l00664"></a>00664      <span class="keywordflow">return</span> 0;
<a name="l00665"></a>00665    }
<a name="l00666"></a>00666    
<a name="l00667"></a>00667    <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;bPDOSize;
<a name="l00668"></a>00668    
<a name="l00669"></a>00669    <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;
<a name="l00670"></a>00670                                 pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;usPDOAddress;
<a name="l00671"></a>00671    
<a name="l00672"></a>00672    <span class="comment">//cout&lt;&lt;&quot;\nsize =&quot;&lt;&lt;pdosize&lt;&lt;&quot; offset = &quot;&lt;&lt;pdooffset;</span>
<a name="l00673"></a>00673      
<a name="l00674"></a>00674    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr, <span class="comment">// Board NO</span>
<a name="l00675"></a>00675                   0,                      <span class="comment">//offset send data</span>
<a name="l00676"></a>00676                   0,                      <span class="comment">//Length of the send IO data</span>
<a name="l00677"></a>00677                   NULL,                   <span class="comment">//Pointer to the user send data buffer</span>
<a name="l00678"></a>00678                   pdooffset,              <span class="comment">//Byte offset in the receive IO data area</span>
<a name="l00679"></a>00679                   pdosize,                <span class="comment">//Length of the receive IO data</span>
<a name="l00680"></a>00680                   &amp;_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a0d92ed9f5cdf6d248a9332649e7f2433" title="external buffer for pdotransfer">pdobuffer</a>[0],<span class="comment">//Pointer to the user read data buffer</span>
<a name="l00681"></a>00681                   100L)                   <span class="comment">//timeout in milliseconds</span>
<a name="l00682"></a>00682         ) == DRV_NO_ERROR)
<a name="l00683"></a>00683    {
<a name="l00684"></a>00684      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#ab05d3a8d10d68e545aba3846ed6aaf5a" title="exchange bytes 0-7 from pdobuffer to databuffer">pdobuf2buf</a>();
<a name="l00685"></a>00685      <span class="comment">//rlDebugPrintf(&quot;PDO recieve successfull!\n&quot;);</span>
<a name="l00686"></a>00686      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>);
<a name="l00687"></a>00687      <span class="keywordflow">return</span> 1;
<a name="l00688"></a>00688    
<a name="l00689"></a>00689    }
<a name="l00690"></a>00690    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO receive failed! \</span>
<a name="l00691"></a>00691 <span class="stringliteral">                         BoardId: %d NodeId: %d PDO \</span>
<a name="l00692"></a>00692 <span class="stringliteral">                         ID: %d\n&quot;</span>, _boardnr, _nodeid, _pdonr);
<a name="l00693"></a>00693    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00694"></a>00694 
<a name="l00695"></a>00695    <span class="comment">//rlDebugPrintf(&quot;ERROR: PDO RECEIVE FAILED\n&quot;);</span>
<a name="l00696"></a>00696    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a58f71815e94679fbf8e83166eb25a73c">ERRCODE_PDORCV_FAIL</a>);
<a name="l00697"></a>00697      <span class="keywordflow">return</span> 0;                          
<a name="l00698"></a>00698 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a73a3479ae9754495e17aa6591dbf135e"></a><!-- doxytag: member="rlCanOpen::pdo_receive" ref="a73a3479ae9754495e17aa6591dbf135e" args="(int _boardnr, int _nodeid, int _pdonr, int _mappingnr, rlCanOpenTypes &amp;_pdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_receive </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_mappingnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>_pdo_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>using the pdo_receive function you can receive a mapped object within PDO </p>
<p>using the pdo_receive function you can receive a PDO (Process Data Object), which is send from the specific node to the device. The enquired object will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. The mapping is only available if mapping is configurated during the node creation of the rlcanopen constructer. Therefore a eds file (electronic data sheet) is needed. Use the cannode::hasMapping() function to check if mapping is available. To read out the correct value from this class use one of the get_TYPE() {e.g. get_int() } functions you can assert the type in the class using <a class="el" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">rlCanOpenTypes::get_DaemonType()</a>; </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00544">544</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00549"></a>00549 {
<a name="l00550"></a>00550  
<a name="l00551"></a>00551  <span class="keywordtype">int</span> nodeindex;
<a name="l00552"></a>00552  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buffer[8];
<a name="l00553"></a>00553  
<a name="l00554"></a>00554  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
<a name="l00555"></a>00555  {
<a name="l00556"></a>00556    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified node does not exist! PDO receive failed!&quot;</span>);
<a name="l00557"></a>00557    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, 
<a name="l00558"></a>00558      _boardnr, _nodeid, _pdonr, _mappingnr);
<a name="l00559"></a>00559      
<a name="l00560"></a>00560    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
<a name="l00561"></a>00561    <span class="keywordflow">return</span> 0;
<a name="l00562"></a>00562  }
<a name="l00563"></a>00563  <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){
<a name="l00564"></a>00564    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! PDO receive failed!&quot;</span>);
<a name="l00565"></a>00565    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, 
<a name="l00566"></a>00566      _boardnr, _nodeid, _pdonr, _mappingnr);
<a name="l00567"></a>00567    
<a name="l00568"></a>00568    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);
<a name="l00569"></a>00569    <span class="keywordflow">return</span> 0;
<a name="l00570"></a>00570  }
<a name="l00571"></a>00571  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr -1]-&gt;mappingList.size() 
<a name="l00572"></a>00572           &lt; (<span class="keywordtype">unsigned</span> int) _mappingnr){
<a name="l00573"></a>00573    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified Mappingnr does not exist! PDO receive failed!&quot;</span>);
<a name="l00574"></a>00574    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, 
<a name="l00575"></a>00575      _boardnr, _nodeid, _pdonr, _mappingnr);
<a name="l00576"></a>00576      
<a name="l00577"></a>00577    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac06bda295f5176eca7aba684d3a23e42">ERRCODE_INVALID_MAPID</a>);
<a name="l00578"></a>00578    <span class="keywordflow">return</span> 0;
<a name="l00579"></a>00579  }      
<a name="l00580"></a>00580  
<a name="l00581"></a>00581  <span class="comment">// PDO No.1 has the index 0 !!!</span>
<a name="l00582"></a>00582  <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;bPDOSize;      
<a name="l00583"></a>00583  <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;usPDOAddress; 
<a name="l00584"></a>00584  
<a name="l00585"></a>00585  <span class="comment">//cout&lt;&lt;&quot;size =&quot;&lt;&lt;pdosize&lt;&lt;&quot; offset = &quot;&lt;&lt;pdooffset&lt;&lt;&quot;\n&quot;;</span>
<a name="l00586"></a>00586  
<a name="l00587"></a>00587  <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr,   <span class="comment">// Board NO</span>
<a name="l00588"></a>00588                       0,                  <span class="comment">//offset send data</span>
<a name="l00589"></a>00589                       0,                  <span class="comment">//Length of the send IO data</span>
<a name="l00590"></a>00590                       NULL,               <span class="comment">//Pointer to the user send data buffer</span>
<a name="l00591"></a>00591                       pdooffset,          <span class="comment">//Byte offset in the receive IO data area</span>
<a name="l00592"></a>00592                       pdosize,            <span class="comment">//Length of the receive IO data</span>
<a name="l00593"></a>00593                       &amp;buffer[0],         <span class="comment">//Pointer to the user read data buffer</span>
<a name="l00594"></a>00594                       100L)               <span class="comment">//timeout in milliseconds</span>
<a name="l00595"></a>00595       ) == DRV_NO_ERROR)
<a name="l00596"></a>00596  {
<a name="l00597"></a>00597    
<a name="l00598"></a>00598    <span class="keywordtype">int</span> length_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;
<a name="l00599"></a>00599          pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;mappingList[_mappingnr-1]-&gt;length/8;
<a name="l00600"></a>00600            
<a name="l00601"></a>00601    <span class="keywordtype">int</span> position_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;
<a name="l00602"></a>00602          pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;mappingList[_mappingnr-1]-&gt;position/8; 
<a name="l00603"></a>00603          
<a name="l00604"></a>00604    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a071fb679e9956c9c5a46c633e29b784c" title="sets all bytes in databuffer to zero">clearBuffer</a>();
<a name="l00605"></a>00605    
<a name="l00606"></a>00606    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = position_in_byte; i&lt; length_in_byte+position_in_byte;i++)
<a name="l00607"></a>00607    {
<a name="l00608"></a>00608         _pdo_data.<a class="code" href="classrlCanOpenTypes.html#ae679e810361bd26aed31a5458daa4ef5" title="transfer raw data into the databuffer">set_buffer</a>(i-position_in_byte,buffer[i]);
<a name="l00609"></a>00609    }
<a name="l00610"></a>00610         
<a name="l00611"></a>00611    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a45061bf88af2c0f0a09e163b37f6affc" title="alternative setter receives integer typenumber">set_DaemonType</a>( <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;
<a name="l00612"></a>00612           mappingList[_mappingnr-1]-&gt;etype);
<a name="l00613"></a>00613      
<a name="l00614"></a>00614        
<a name="l00615"></a>00615    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>);
<a name="l00616"></a>00616    
<a name="l00617"></a>00617    
<a name="l00618"></a>00618     <span class="comment">// if CanOpen-Type is a twistet integer (etc. 52Bit ) the value will be converted</span>
<a name="l00619"></a>00619    <span class="keywordtype">int</span> canopentype = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>][_pdonr-1]-&gt;
<a name="l00620"></a>00620           mappingList[_mappingnr-1]-&gt;canopentype;
<a name="l00621"></a>00621            
<a name="l00622"></a>00622    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a>(canopentype))
<a name="l00623"></a>00623      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a57a8d0945c14a3e868c9da3c34a26ec0">translate_CanOpenType</a>(canopentype);   
<a name="l00624"></a>00624    
<a name="l00625"></a>00625    <span class="keywordflow">return</span> 1;  
<a name="l00626"></a>00626  }
<a name="l00627"></a>00627  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: PDO receive failed!&quot;</span>);
<a name="l00628"></a>00628  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d PDO ID: %d Mappingnr: %d\n&quot;</span>, 
<a name="l00629"></a>00629    _boardnr, _nodeid, _pdonr, _mappingnr);
<a name="l00630"></a>00630  
<a name="l00631"></a>00631  _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a58f71815e94679fbf8e83166eb25a73c">ERRCODE_PDORCV_FAIL</a>);
<a name="l00632"></a>00632  
<a name="l00633"></a>00633   <span class="keywordflow">return</span> 0;     
<a name="l00634"></a>00634 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a813d45bf60088fc0d4fcd70264a7dbe1"></a><!-- doxytag: member="rlCanOpen::pdo_transmit" ref="a813d45bf60088fc0d4fcd70264a7dbe1" args="(int _boardnr, int _nodeid, int _pdonr, rlCanOpenTypes &amp;_pdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_transmit </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>_pdo_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>transmit a 8 Byte PDO to a specific node </p>
<p>Using the pdo_transmit function you can transmit a PDO (Process Data Object) to a specific node. The desired data must be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. This function does not support mapping. So the whole 8byte PDO data, will be send to write to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> use the <a class="el" href="classrlCanOpenTypes.html#ae679e810361bd26aed31a5458daa4ef5" title="transfer raw data into the databuffer">rlCanOpenTypes::set_buffer</a>({0-7}) function </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00806">806</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00810"></a>00810 {
<a name="l00811"></a>00811    <span class="keywordtype">int</span> nodeindex;
<a name="l00812"></a>00812    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a479e8118a82dd132df3fa6d87bafa033" title="exchange bytes 0-7 from databuffer to pdobuffer">buf2pdobuf</a>();
<a name="l00813"></a>00813    
<a name="l00814"></a>00814    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
<a name="l00815"></a>00815    {
<a name="l00816"></a>00816      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! PDO transmit\</span>
<a name="l00817"></a>00817 <span class="stringliteral">                           failed! BoardId: %d NodeId: %d PDO ID: %d \n&quot;</span>,
<a name="l00818"></a>00818                             _boardnr, _nodeid, _pdonr);
<a name="l00819"></a>00819                             
<a name="l00820"></a>00820      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00821"></a>00821      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
<a name="l00822"></a>00822      <span class="keywordflow">return</span> 0;
<a name="l00823"></a>00823    }
<a name="l00824"></a>00824    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){
<a name="l00825"></a>00825      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! PDO \</span>
<a name="l00826"></a>00826 <span class="stringliteral">                           transmit failed! BoardId: %d NodeId: %d PDO \</span>
<a name="l00827"></a>00827 <span class="stringliteral">                           ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdonr);
<a name="l00828"></a>00828      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00829"></a>00829      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);
<a name="l00830"></a>00830      <span class="keywordflow">return</span> 0;
<a name="l00831"></a>00831    }
<a name="l00832"></a>00832    
<a name="l00833"></a>00833    <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;bPDOSize;
<a name="l00834"></a>00834    <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;usPDOAddress; 
<a name="l00835"></a>00835    
<a name="l00836"></a>00836    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr,       <span class="comment">// Board NO</span>
<a name="l00837"></a>00837                         pdooffset,              <span class="comment">//offset send data</span>
<a name="l00838"></a>00838                         pdosize,                <span class="comment">//Length of the send IO data</span>
<a name="l00839"></a>00839                         &amp;_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a0d92ed9f5cdf6d248a9332649e7f2433" title="external buffer for pdotransfer">pdobuffer</a>[0],<span class="comment">//Pointer to the user send data buffer</span>
<a name="l00840"></a>00840                         0,                      <span class="comment">//Byte offset in the receive IO data area</span>
<a name="l00841"></a>00841                         0,                      <span class="comment">//Length of the receive IO data</span>
<a name="l00842"></a>00842                         NULL,                   <span class="comment">//Pointer to the user read data buffer</span>
<a name="l00843"></a>00843                         100L)                   <span class="comment">//timeout in milliseconds</span>
<a name="l00844"></a>00844         ) == DRV_NO_ERROR)
<a name="l00845"></a>00845    {
<a name="l00846"></a>00846      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>);
<a name="l00847"></a>00847      <span class="keywordflow">return</span> 1;
<a name="l00848"></a>00848    }
<a name="l00849"></a>00849    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO transmit failed! BoardId: %d NodeId: %d \</span>
<a name="l00850"></a>00850 <span class="stringliteral">                         PDO ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdonr);
<a name="l00851"></a>00851    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00852"></a>00852    
<a name="l00853"></a>00853    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac6a1a95fdab7f5b7d2dfb3056df2eee8">ERRCODE_PDOSND_FAIL</a>);
<a name="l00854"></a>00854     <span class="keywordflow">return</span> 0;                           
<a name="l00855"></a>00855 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa0af0f6576ec284128e9c3efb4770ca2"></a><!-- doxytag: member="rlCanOpen::pdo_transmit" ref="aa0af0f6576ec284128e9c3efb4770ca2" args="(int _boardnr, int _nodeid, int _pdonr, int _mappingnr, rlCanOpenTypes &amp;_pdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::pdo_transmit </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_pdonr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_mappingnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>_pdo_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>transmit a mapped object within a PDO to a specific node </p>
<p>Using the pdo_transmit function you can transmit a PDO (Process Data Object) to a specific node. The desired data must be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. The mapping is only available if mapping is configurated during the node creation of the rlcanopen constructer. Therefore an eds file (electronic data sheet) is needed. Use the cannode::hasMapping() function to check if mapping is available </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00703">703</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00708"></a>00708 {
<a name="l00709"></a>00709    <span class="keywordtype">int</span> nodeindex;
<a name="l00710"></a>00710    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
<a name="l00711"></a>00711    {
<a name="l00712"></a>00712      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! PDO transmit \</span>
<a name="l00713"></a>00713 <span class="stringliteral">                           failed! BoardId: %d NodeId: %d PDO ID: %d Mappingnr:\</span>
<a name="l00714"></a>00714 <span class="stringliteral">                            %d\n&quot;</span>, _boardnr, _nodeid, _pdonr, _mappingnr);
<a name="l00715"></a>00715      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00716"></a>00716      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
<a name="l00717"></a>00717      <span class="keywordflow">return</span> 0;
<a name="l00718"></a>00718    }
<a name="l00719"></a>00719    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdonr){
<a name="l00720"></a>00720      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified PDO ID does not exist! PDO transmit\</span>
<a name="l00721"></a>00721 <span class="stringliteral">                           failed! BoardId: %d NodeId: %d PDO ID: %d Mappingnr:\</span>
<a name="l00722"></a>00722 <span class="stringliteral">                            %d\n&quot;</span>, _boardnr, _nodeid, _pdonr, _mappingnr);
<a name="l00723"></a>00723      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00724"></a>00724         
<a name="l00725"></a>00725      <span class="comment">//cout&lt;&lt;&quot;PDO ID does not exists!\n&quot;;</span>
<a name="l00726"></a>00726      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#a563f35466ff5dc30fb5f4e4e3a53c988">ERRCODE_INVALID_PDOID</a>);
<a name="l00727"></a>00727      <span class="keywordflow">return</span> 0;
<a name="l00728"></a>00728    }
<a name="l00729"></a>00729    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr -1]-&gt;mappingList.size()
<a name="l00730"></a>00730               &lt; (<span class="keywordtype">unsigned</span> int) _mappingnr){
<a name="l00731"></a>00731      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified mappingnr does not exist! PDO \</span>
<a name="l00732"></a>00732 <span class="stringliteral">                           transmit failed! BoardId: %d NodeId: %d PDO \</span>
<a name="l00733"></a>00733 <span class="stringliteral">                           ID: %d Mappingnr: %d\n&quot;</span>, 
<a name="l00734"></a>00734                            _boardnr, _nodeid, _pdonr, _mappingnr);
<a name="l00735"></a>00735      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00736"></a>00736 
<a name="l00737"></a>00737      <span class="comment">//cout&lt;&lt;&quot;mapping ID does not exists!\n&quot;;</span>
<a name="l00738"></a>00738      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac06bda295f5176eca7aba684d3a23e42">ERRCODE_INVALID_MAPID</a>);
<a name="l00739"></a>00739      <span class="keywordflow">return</span> 0;
<a name="l00740"></a>00740    }    
<a name="l00741"></a>00741    
<a name="l00742"></a>00742    <span class="comment">// PDO No.1 has the index 0 !!!</span>
<a name="l00743"></a>00743    <span class="keywordtype">int</span> pdosize = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;bPDOSize; 
<a name="l00744"></a>00744    <span class="keywordtype">int</span> pdooffset = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;usPDOAddress;
<a name="l00745"></a>00745 
<a name="l00746"></a>00746    <span class="keywordtype">int</span> length_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;
<a name="l00747"></a>00747                           mappingList[_mappingnr-1]-&gt;length/8;
<a name="l00748"></a>00748                           
<a name="l00749"></a>00749    <span class="keywordtype">int</span> position_in_byte = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;
<a name="l00750"></a>00750                           mappingList[_mappingnr-1]-&gt;position/8; 
<a name="l00751"></a>00751    
<a name="l00752"></a>00752    <span class="keywordflow">if</span> (_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">get_DaemonType</a>() != (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;
<a name="l00753"></a>00753                pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;mappingList[_mappingnr-1]-&gt;etype))
<a name="l00754"></a>00754    {  
<a name="l00755"></a>00755      
<a name="l00756"></a>00756      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: invalid type! Expected type: %d  Your Type:\</span>
<a name="l00757"></a>00757 <span class="stringliteral">                            %d! PDO transmit failed! BoardId: %d NodeId: %d \</span>
<a name="l00758"></a>00758 <span class="stringliteral">                            PDO ID: %d Mappingnr: %d\n&quot;</span>, 
<a name="l00759"></a>00759           <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>][_pdonr-1]-&gt;
<a name="l00760"></a>00760             mappingList[_mappingnr-1]-&gt;etype, 
<a name="l00761"></a>00761           _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">get_DaemonType</a>(), _boardnr, _nodeid, _pdonr, _mappingnr);
<a name="l00762"></a>00762        
<a name="l00763"></a>00763        
<a name="l00764"></a>00764      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00765"></a>00765      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">get_DaemonType</a>();
<a name="l00766"></a>00766      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#acaa13c777fe2910c2902c92fdbf7e392">ERRCODE_INVALID_RLTYPE</a>);
<a name="l00767"></a>00767      <span class="keywordflow">return</span> 0;
<a name="l00768"></a>00768    }
<a name="l00769"></a>00769    
<a name="l00770"></a>00770     _pdo_data.<a class="code" href="classrlCanOpenTypes.html#a479e8118a82dd132df3fa6d87bafa033" title="exchange bytes 0-7 from databuffer to pdobuffer">buf2pdobuf</a>();
<a name="l00771"></a>00771    
<a name="l00772"></a>00772    <span class="comment">// no conversion necessary. correct length in mapping list</span>
<a name="l00773"></a>00773 
<a name="l00774"></a>00774    pdooffset = pdooffset + position_in_byte;
<a name="l00775"></a>00775    pdosize = length_in_byte;
<a name="l00776"></a>00776    
<a name="l00777"></a>00777    
<a name="l00778"></a>00778    
<a name="l00779"></a>00779    <span class="comment">//cout&lt;&lt;&quot;size =&quot;&lt;&lt;pdosize&lt;&lt;&quot; offset = &quot;&lt;&lt;pdooffset&lt;&lt;&quot;\n&quot;;</span>
<a name="l00780"></a>00780    
<a name="l00781"></a>00781    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> =  DevExchangeIO( _boardnr,       <span class="comment">// Board NO</span>
<a name="l00782"></a>00782                         pdooffset,              <span class="comment">//offset send data</span>
<a name="l00783"></a>00783                         pdosize,                <span class="comment">//Length of the send IO data</span>
<a name="l00784"></a>00784                         &amp;_pdo_data.<a class="code" href="classrlCanOpenTypes.html#a0d92ed9f5cdf6d248a9332649e7f2433" title="external buffer for pdotransfer">pdobuffer</a>[0],<span class="comment">//Pointer to the user send data buffer</span>
<a name="l00785"></a>00785                         0,                      <span class="comment">//Byte offset in the receive IO data area</span>
<a name="l00786"></a>00786                         0,                      <span class="comment">//Length of the receive IO data</span>
<a name="l00787"></a>00787                         NULL,                   <span class="comment">//Pointer to the user read data buffer</span>
<a name="l00788"></a>00788                         100L)                   <span class="comment">//timeout in milliseconds</span>
<a name="l00789"></a>00789         ) == DRV_NO_ERROR)
<a name="l00790"></a>00790    {
<a name="l00791"></a>00791      _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(0);
<a name="l00792"></a>00792      <span class="comment">//rlDebugPrintf(&quot;PDO transmit successful! \n&quot;);</span>
<a name="l00793"></a>00793      <span class="keywordflow">return</span> 1;  
<a name="l00794"></a>00794    }
<a name="l00795"></a>00795    sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO transmit failed! BoardId: %d NodeId: %d \</span>
<a name="l00796"></a>00796 <span class="stringliteral">                         PDO ID: %d Mappingnr: %d\n&quot;</span>, 
<a name="l00797"></a>00797                          _boardnr, _nodeid, _pdonr, _mappingnr);
<a name="l00798"></a>00798    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00799"></a>00799    
<a name="l00800"></a>00800    _pdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#ac6a1a95fdab7f5b7d2dfb3056df2eee8">ERRCODE_PDOSND_FAIL</a>);
<a name="l00801"></a>00801    <span class="keywordflow">return</span> 0;    
<a name="l00802"></a>00802 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2ee4ce66da6eac2f80309f968e1a49fe"></a><!-- doxytag: member="rlCanOpen::read_inifile" ref="a2ee4ce66da6eac2f80309f968e1a49fe" args="(const char *_filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rlCanOpen::read_inifile </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>_filename</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>read properties of inifile </p>
<p>read properties of inifile. EDS path, logfile location and user-specific options are set on startup </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01189">1189</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01189"></a>01189                                                  {
<a name="l01190"></a>01190   <a class="code" href="classrlIniFile.html">rlIniFile</a> <a class="code" href="classrlCanOpen.html#aab75d58a1776264647ee87df5972f921" title="initialize nodes and create nodelist">ini</a>;   
<a name="l01191"></a>01191   QString buffer;
<a name="l01192"></a>01192   <span class="keywordflow">if</span> (ini.<a class="code" href="classrlIniFile.html#a2d308c9697478c1c0965c2ed7e6581cc">read</a>(_filename)!=-1){
<a name="l01193"></a>01193     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;used inifile: %s\n&quot;</span>, _filename);
<a name="l01194"></a>01194     
<a name="l01195"></a>01195     <span class="comment">// read EDS directory location</span>
<a name="l01196"></a>01196     buffer=QString(ini.<a class="code" href="classrlIniFile.html#abd6617813df57f3cdcc2f7829a742f32">text</a>(<span class="stringliteral">&quot;DIRECTORIES&quot;</span>,<span class="stringliteral">&quot;EdsDir&quot;</span>));
<a name="l01197"></a>01197     buffer.remove((<span class="keywordtype">char</span>) ACSII_CODE_CARRIAGE_RETURN);
<a name="l01198"></a>01198     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;EdsDir: %s\n&quot;</span>, buffer.ascii());
<a name="l01199"></a>01199     <span class="comment">// store EDS directory location in environmet variable</span>
<a name="l01200"></a>01200 <span class="preprocessor">#ifdef RLWIN32</span>
<a name="l01201"></a>01201 <span class="preprocessor"></span>    SetEnvironmentVariable(<span class="stringliteral">&quot;EdsDir&quot;</span>, buffer.ascii());
<a name="l01202"></a>01202 <span class="preprocessor">#else</span>
<a name="l01203"></a>01203 <span class="preprocessor"></span>    setenv(<span class="stringliteral">&quot;EdsDir&quot;</span>, buffer.ascii(), 1);
<a name="l01204"></a>01204 <span class="preprocessor">#endif    </span>
<a name="l01205"></a>01205 <span class="preprocessor"></span>    
<a name="l01206"></a>01206     <span class="comment">// read Logfilename</span>
<a name="l01207"></a>01207     <a class="code" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d" title="name of logfile stdout is redirected to">logFileName</a>=QString(ini.<a class="code" href="classrlIniFile.html#abd6617813df57f3cdcc2f7829a742f32">text</a>(<span class="stringliteral">&quot;DIRECTORIES&quot;</span>,<span class="stringliteral">&quot;LogFileName&quot;</span>));
<a name="l01208"></a>01208     logFileName.remove((<span class="keywordtype">char</span>) ACSII_CODE_CARRIAGE_RETURN);
<a name="l01209"></a>01209     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Log Filename: %s\n&quot;</span>, logFileName.ascii());
<a name="l01210"></a>01210     
<a name="l01211"></a>01211     <span class="comment">// read loggin-option </span>
<a name="l01212"></a>01212     buffer=QString(ini.<a class="code" href="classrlIniFile.html#abd6617813df57f3cdcc2f7829a742f32">text</a>(<span class="stringliteral">&quot;OPTIONS&quot;</span>,<span class="stringliteral">&quot;enableLoggin&quot;</span>));
<a name="l01213"></a>01213     <span class="keywordflow">if</span> (buffer.contains(<span class="stringliteral">&quot;yes&quot;</span>, <span class="keyword">false</span>)==1)
<a name="l01214"></a>01214       <a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>=<span class="keyword">true</span>;  
<a name="l01215"></a>01215     <span class="keywordflow">else</span>
<a name="l01216"></a>01216       <a class="code" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">enableLogging</a>=<span class="keyword">false</span>;  
<a name="l01217"></a>01217   }
<a name="l01218"></a>01218   <span class="keywordflow">else</span>
<a name="l01219"></a>01219   {
<a name="l01220"></a>01220     logFileName=  <span class="stringliteral">&quot;./outfile.txt&quot;</span>;
<a name="l01221"></a>01221     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: INIFILE NOT FOUND\n&quot;</span>);
<a name="l01222"></a>01222   }
<a name="l01223"></a>01223 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac91a85e76f8b9506303f5992fe72d018"></a><!-- doxytag: member="rlCanOpen::refreshMappingList" ref="ac91a85e76f8b9506303f5992fe72d018" args="(int _boardnr, int _nodeid, int _pdoID, int _pdoDirection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::refreshMappingList </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_pdoID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_pdoDirection</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>if the user changes the mapping of a node using SDO functions, the internal mapping list should be changed </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00917">917</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00921"></a>00921 {
<a name="l00922"></a>00922   <span class="comment">//rlDebugPrintf(&quot;refresh mappinglist1\n&quot;);</span>
<a name="l00923"></a>00923   <span class="keywordtype">int</span> nodeindex;
<a name="l00924"></a>00924   <span class="keywordtype">int</span> madress=0;
<a name="l00925"></a>00925   
<a name="l00926"></a>00926    
<a name="l00927"></a>00927     madress = <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;
<a name="l00928"></a>00928                 pdoList[_pdoDirection][_pdoID -1]-&gt;mappingOvAdress;
<a name="l00929"></a>00929       
<a name="l00930"></a>00930   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== <span class="keyword">false</span>) 
<a name="l00931"></a>00931   {
<a name="l00932"></a>00932     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: specified node does not exist! refresh \</span>
<a name="l00933"></a>00933 <span class="stringliteral">                          mapping list failed! BoardId: %d NodeId: %d \</span>
<a name="l00934"></a>00934 <span class="stringliteral">                          PDO ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdoID);
<a name="l00935"></a>00935     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00936"></a>00936     <span class="keywordflow">return</span> 0;
<a name="l00937"></a>00937   }
<a name="l00938"></a>00938   
<a name="l00939"></a>00939  
<a name="l00940"></a>00940   <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_pdoDirection].size() &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) _pdoID)
<a name="l00941"></a>00941   {
<a name="l00942"></a>00942     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: PDO does not exist! refresh \</span>
<a name="l00943"></a>00943 <span class="stringliteral">                          mapping list failed! BoardId: %d NodeId: %d \</span>
<a name="l00944"></a>00944 <span class="stringliteral">                          PDO ID: %d \n&quot;</span>, _boardnr, _nodeid, _pdoID);
<a name="l00945"></a>00945     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00946"></a>00946     <span class="keywordflow">return</span> 0;
<a name="l00947"></a>00947   }
<a name="l00948"></a>00948    
<a name="l00949"></a>00949   <span class="comment">//append Mapping data                                 </span>
<a name="l00950"></a>00950   <a class="code" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> sdobuffer;                            
<a name="l00951"></a>00951   <span class="keywordtype">int</span> mappingcount;
<a name="l00952"></a>00952   <a class="code" href="structrlCanMapping.html" title="mapping object which is part of the mappinglist of a PDO">rlCanMapping</a> * mappingobject; 
<a name="l00953"></a>00953                                             
<a name="l00954"></a>00954   <span class="comment">//get mapping count                       </span>
<a name="l00955"></a>00955   <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713" title="read a certain object from the object dictionary of a node">sdo_read</a>(_boardnr,_nodeid,madress,0,sdobuffer) == 0){
<a name="l00956"></a>00956     sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: read sdo data! refresh mapping list failed! \</span>
<a name="l00957"></a>00957 <span class="stringliteral">                          BoardId: %d NodeId: %d PDO ID: %d \n&quot;</span>, 
<a name="l00958"></a>00958                           _boardnr, _nodeid, _pdoID);
<a name="l00959"></a>00959     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00960"></a>00960   }
<a name="l00961"></a>00961   
<a name="l00962"></a>00962   mappingcount = sdobuffer.<a class="code" href="classrlCanOpenTypes.html#ab94c175fc5b094f3a0e259266e1d7f85" title="returns databuffer-content as uchar type">get_uchar</a>();   
<a name="l00963"></a>00963   
<a name="l00964"></a>00964   sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;Current mappingcount: %d\n&quot;</span>, mappingcount);
<a name="l00965"></a>00965   <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);                                           
<a name="l00966"></a>00966   
<a name="l00967"></a>00967   <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_pdoDirection][_pdoID-1]-&gt;
<a name="l00968"></a>00968                   mappingList.resize(mappingcount);
<a name="l00969"></a>00969 
<a name="l00970"></a>00970   <span class="keywordtype">int</span> currentposition = 0;
<a name="l00971"></a>00971   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mcount = 1; mcount &lt;= mappingcount;mcount++)  <span class="comment">//each mappingobject</span>
<a name="l00972"></a>00972   {
<a name="l00973"></a>00973     mappingobject = <span class="keyword">new</span> <a class="code" href="structrlCanMapping.html" title="mapping object which is part of the mappinglist of a PDO">rlCanMapping</a>;  <span class="comment">//create new mappingobject in memory</span>
<a name="l00974"></a>00974     mappingobject-&gt;<a class="code" href="structrlCanMapping.html#adfeb435b465421c10a527f0e03643cfd" title="the mapping ID determines the mapping object within the PDO (1 to n)">mappingId</a> = mcount;
<a name="l00975"></a>00975         
<a name="l00976"></a>00976    
<a name="l00977"></a>00977    <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713" title="read a certain object from the object dictionary of a node">sdo_read</a>(_boardnr,_nodeid,madress,mcount,sdobuffer) == 0){
<a name="l00978"></a>00978      sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;ERROR: read sdo data! refresh mapping list failed! \</span>
<a name="l00979"></a>00979 <span class="stringliteral">                           BoardId: %d NodeId: %d PDO ID: %d \n&quot;</span>, 
<a name="l00980"></a>00980                            _boardnr, _nodeid, _pdoID);
<a name="l00981"></a>00981      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00982"></a>00982      <span class="comment">//cout&lt;&lt;&quot;Error during create Mappinglist!\n&quot;;</span>
<a name="l00983"></a>00983     }
<a name="l00984"></a>00984        
<a name="l00985"></a>00985     <span class="comment">//get length of mapping object</span>
<a name="l00986"></a>00986     <span class="keywordtype">int</span> mlength  = sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(0);
<a name="l00987"></a>00987     mappingobject-&gt;<a class="code" href="structrlCanMapping.html#a6e1cb25d9777c0a5b6a9615ba54b4eb9" title="length of mappend object in bits">length</a> = mlength;
<a name="l00988"></a>00988     
<a name="l00989"></a>00989     <span class="comment">//calculate the mapping position</span>
<a name="l00990"></a>00990     <span class="keywordflow">if</span> (mcount&gt;1)
<a name="l00991"></a>00991       mappingobject-&gt;<a class="code" href="structrlCanMapping.html#adc9982e23260fae2c13bca8ed916b278" title="its position in within the 8Byte">position</a> = currentposition;         
<a name="l00992"></a>00992     <span class="keywordflow">else</span>       
<a name="l00993"></a>00993       mappingobject-&gt;<a class="code" href="structrlCanMapping.html#adc9982e23260fae2c13bca8ed916b278" title="its position in within the 8Byte">position</a> = 0;           
<a name="l00994"></a>00994     currentposition+=mlength;
<a name="l00995"></a>00995     
<a name="l00996"></a>00996     <span class="comment">// get the ov adress of the current mapped object</span>
<a name="l00997"></a>00997     <span class="keywordtype">int</span> mi  = (int) (sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(3)*pow(256,1) 
<a name="l00998"></a>00998                                           + sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(2));
<a name="l00999"></a>00999                                           
<a name="l01000"></a>01000     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msi = sdobuffer.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(1);
<a name="l01001"></a>01001         
<a name="l01002"></a>01002     <a class="code" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> temptype;
<a name="l01003"></a>01003     mappingobject-&gt;<a class="code" href="structrlCanMapping.html#a0bf5454714c486432b1881371cb8cede" title="its current type (int32, float, char, ...)">etype</a> = temptype.<a class="code" href="classrlCanOpenTypes.html#a5fa2427f1c611d5ea95b02ec71e483cc" title="Function for typenumber conversion.">canOpenType2DeamonType</a>
<a name="l01004"></a>01004                            (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size()-1]-&gt;objecttype(mi, msi));
<a name="l01005"></a>01005         
<a name="l01006"></a>01006     <span class="comment">// insert the mappingobject to mappinglist</span>
<a name="l01007"></a>01007     <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;pdoList[_pdoDirection][_pdoID-1]-&gt;
<a name="l01008"></a>01008                          mappingList.insert(mcount-1,mappingobject);
<a name="l01009"></a>01009        
<a name="l01010"></a>01010   }
<a name="l01011"></a>01011   <span class="keywordflow">return</span> 1;                                                   
<a name="l01012"></a>01012 }                                                               
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac65b49a7d5677c354cd73c6980687219"></a><!-- doxytag: member="rlCanOpen::restartBoard" ref="ac65b49a7d5677c354cd73c6980687219" args="(int _boardnr, int _restarttype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::restartBoard </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_restarttype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>using this function you are able to restart a CanOpenMaster board </p>
<p>Using this function you are able to restart a CanOpenMaster board (device). There are 3 possibly kinds of restarting the master: coldstart, warmstart, bootstart. The corresponding 'defines' are declared in canopenstructs.h Hilscher specific function (so no CanOpoen services) are used to execute this command </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01114">1114</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01115"></a>01115 {
<a name="l01116"></a>01116    <span class="comment">//COLDSTART           2</span>
<a name="l01117"></a>01117    <span class="comment">//WARMSTART           3</span>
<a name="l01118"></a>01118    <span class="comment">//BOOTSTART           4</span>
<a name="l01119"></a>01119    
<a name="l01120"></a>01120    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevReset(_boardnr, _restarttype, 5000L) != DRV_NO_ERROR ))
<a name="l01121"></a>01121   {
<a name="l01122"></a>01122     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;restart failed!\n&quot;</span>);
<a name="l01123"></a>01123     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;DevReset(%d, Restart, 5000): %d\n&quot;</span>, _boardnr, <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
<a name="l01124"></a>01124     <span class="keywordflow">return</span> 0;
<a name="l01125"></a>01125   }
<a name="l01126"></a>01126   
<a name="l01127"></a>01127    <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;restart successfully\n&quot;</span>);
<a name="l01128"></a>01128    <span class="keywordflow">return</span> 1;
<a name="l01129"></a>01129 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0a0e5e4328ff82cc5a7de3e8fa9c9713"></a><!-- doxytag: member="rlCanOpen::sdo_read" ref="a0a0e5e4328ff82cc5a7de3e8fa9c9713" args="(int _boardnr, int _nodeid, int _objectindex, int _subindex, rlCanOpenTypes &amp;_sdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::sdo_read </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_objectindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_subindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>_sdo_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>read a certain object from the object dictionary of a node </p>
<p>using the sdo_read function you can read a certain object from the object dictionary of a node. For this the SDO (Service Data Object) service will be used. The enquired object will be written to the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class. To read out the correct value from this class use one of the get_TYPE() {e.g. get_int() } functions. You can assert the type in the class using <a class="el" href="classrlCanOpenTypes.html#a540ded9334cca448cdc6d85eea322bc8" title="returns current of data stored in databuffer">rlCanOpenTypes::get_DaemonType()</a>; if sdo_read failures the current error can be read out using <a class="el" href="classrlCanOpenTypes.html#a8e213475ba049fe418aa703354e797eb" title="returns current errnumber">rlCanOpenTypes::get_rlmsgerr()</a> </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00332">332</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00337"></a>00337 {
<a name="l00338"></a>00338     <span class="keywordtype">int</span> datalength;
<a name="l00339"></a>00339     <span class="keywordtype">int</span> canopentype;
<a name="l00340"></a>00340     <span class="keywordtype">int</span> nodeindex; 
<a name="l00341"></a>00341     
<a name="l00342"></a>00342     <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
<a name="l00343"></a>00343     {
<a name="l00344"></a>00344       <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified node does not exist! SDO write failed!&quot;</span>);
<a name="l00345"></a>00345       <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Objektindex: %d Subindex: %d\n&quot;</span>, 
<a name="l00346"></a>00346         _boardnr, _nodeid, _objectindex, _subindex);
<a name="l00347"></a>00347         
<a name="l00348"></a>00348       _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
<a name="l00349"></a>00349       <span class="keywordflow">return</span> 0;
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     <a class="code" href="classrlCanOpen.html#ae03cba7206676285f6639b7f744312b4" title="clear message struct by setting all elements to zero">delmsg</a>();
<a name="l00354"></a>00354     <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);
<a name="l00355"></a>00355     
<a name="l00356"></a>00356     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx          = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>; 
<a name="l00357"></a>00357     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx          = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>;
<a name="l00358"></a>00358     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln          = 8;
<a name="l00359"></a>00359     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr          = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++; 
<a name="l00360"></a>00360     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a           = 0; 
<a name="l00361"></a>00361     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f           = 0;
<a name="l00362"></a>00362     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b           = <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>;
<a name="l00363"></a>00363     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e           = 0;
<a name="l00364"></a>00364     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr  = _nodeid;  
<a name="l00365"></a>00365     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area   = 0; 
<a name="l00366"></a>00366     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr    = _objectindex; 
<a name="l00367"></a>00367     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx    = _subindex; 
<a name="l00368"></a>00368     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt    = 0; 
<a name="l00369"></a>00369     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type   = 0; 
<a name="l00370"></a>00370     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function    = <a class="code" href="rlcanopenstructs_8h.html#a57374c705ca0846e8d00c1036c1d2cbd">TASK_TFC_READ</a>; 
<a name="l00371"></a>00371  
<a name="l00372"></a>00372    <span class="keywordflow">if</span>(DevPutMessage(0, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,5000L) != DRV_NO_ERROR) <span class="keywordflow">return</span> 0;
<a name="l00373"></a>00373    
<a name="l00374"></a>00374    <a class="code" href="classrlCanOpen.html#ae03cba7206676285f6639b7f744312b4" title="clear message struct by setting all elements to zero">delmsg</a>();
<a name="l00375"></a>00375    <span class="comment">// receive the answer</span>
<a name="l00376"></a>00376   
<a name="l00377"></a>00377    <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage( <a class="code" href="classrlCanOpen.html#a3e7b87154134ee74f2a7611a3b931dae" title="returns the number of currently active board">getActiveBoard</a>(),                       <span class="comment">// Device Number            </span>
<a name="l00378"></a>00378                          <span class="keyword">sizeof</span>(message), 
<a name="l00379"></a>00379                          (MSG_STRUC *)&amp;message,   <span class="comment">// Pointer to user buffer  </span>
<a name="l00380"></a>00380                          2000L );                 <span class="comment">// Timeout   </span>
<a name="l00381"></a>00381    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msgnrlocal;
<a name="l00382"></a>00382    msgnrlocal = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> - 1;                       
<a name="l00383"></a>00383    
<a name="l00384"></a>00384    <span class="comment">// receive correct answer   </span>
<a name="l00385"></a>00385    <span class="keywordflow">if</span>((message.a == <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>)&amp;&amp;(message.nr == msgnrlocal)){ 
<a name="l00386"></a>00386       _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(message.f);
<a name="l00387"></a>00387       <span class="keywordflow">if</span> (message.f == <a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>) <span class="comment">// node active, no error</span>
<a name="l00388"></a>00388       {
<a name="l00389"></a>00389         canopentype=<a class="code" href="classrlCanOpen.html#abab868b55f7b1bc5e14c9185e711d5e7" title="returns daemontype number of a specific object">getObjectType</a>(_boardnr, _nodeid, _objectindex, _subindex);
<a name="l00390"></a>00390         <span class="keywordflow">if</span> (canopentype!=<a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3ac2f64996a25d15c3ce264c93ee7d3f70">rlCanOpenTypes::RL_NOTYPE</a>){
<a name="l00391"></a>00391           _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ab20336305ab86cb7f70ba7d082db6741" title="recieves an CANopen typenumber and returns appropiate RL-Type">set_CanOpenType</a>(canopentype);
<a name="l00392"></a>00392           datalength = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ab9855e0b33acd508a2a87b8c45655d70" title="returns number of bytes used for current type">getLength</a>();
<a name="l00393"></a>00393         }
<a name="l00394"></a>00394         <span class="keywordflow">else</span> 
<a name="l00395"></a>00395         {
<a name="l00396"></a>00396           _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a45061bf88af2c0f0a09e163b37f6affc" title="alternative setter receives integer typenumber">set_DaemonType</a>(<a class="code" href="classrlCanOpenTypes.html#a255bb4a7c0b73677eef420cc2e183ac3a229debf1ae9bd7aa4fd5955de94b6433">rlCanOpenTypes::RL_BUFFER</a>);
<a name="l00397"></a>00397           datalength = <a class="code" href="rlcanopenstructs_8h.html#a4d267be232afc6e35e9cc9a4a1987293">MAX_SDO_BUFFERSIZE</a>;
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399         _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a071fb679e9956c9c5a46c633e29b784c" title="sets all bytes in databuffer to zero">clearBuffer</a>();   
<a name="l00400"></a>00400         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; datalength; i++)
<a name="l00401"></a>00401           _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ae679e810361bd26aed31a5458daa4ef5" title="transfer raw data into the databuffer">set_buffer</a>(i, message.d[i]);         
<a name="l00402"></a>00402         
<a name="l00403"></a>00403         <span class="comment">// if CanOpen-Type is a twistet integer (etc. 52Bit ) the value will be converted</span>
<a name="l00404"></a>00404         <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a>(canopentype)) &amp;&amp; (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()))
<a name="l00405"></a>00405           _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a57a8d0945c14a3e868c9da3c34a26ec0">translate_CanOpenType</a>(canopentype);
<a name="l00406"></a>00406         
<a name="l00407"></a>00407         <span class="keywordflow">return</span> 1;
<a name="l00408"></a>00408       }
<a name="l00409"></a>00409       <span class="keywordflow">else</span>
<a name="l00410"></a>00410       {
<a name="l00411"></a>00411         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;message.f = %d  message.f = %x Hex \n&quot;</span>, message.f, message.f);
<a name="l00412"></a>00412       }
<a name="l00413"></a>00413     }
<a name="l00414"></a>00414     <span class="keywordflow">else</span>
<a name="l00415"></a>00415     {
<a name="l00416"></a>00416       <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;message.a = %d message.nr = %d vergleich mit: %d\n&quot;</span>, 
<a name="l00417"></a>00417          message.a, message.nr, msgnrlocal);
<a name="l00418"></a>00418          
<a name="l00419"></a>00419       _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(-1);
<a name="l00420"></a>00420     }
<a name="l00421"></a>00421     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR during read SDO message!&quot;</span>);
<a name="l00422"></a>00422     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Obj: %x Sub: %x\n&quot;</span>, 
<a name="l00423"></a>00423       _boardnr, _nodeid, _objectindex, _subindex);
<a name="l00424"></a>00424       
<a name="l00425"></a>00425       
<a name="l00426"></a>00426     <span class="keywordflow">return</span> 0;
<a name="l00427"></a>00427 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afe214122e51cdd214d586ef1b50a5b34"></a><!-- doxytag: member="rlCanOpen::sdo_write" ref="afe214122e51cdd214d586ef1b50a5b34" args="(int _boardnr, int _nodeid, int _objectindex, int _subindex, rlCanOpenTypes &amp;_sdo_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::sdo_write </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_objectindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_subindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>_sdo_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>write data into a certain object from the object dictionary of a node </p>
<p>using the sdo_write function you can write to a certain object from the object dictionary of a node. For this the SDO (Service Data Object) Service will be used. The relevant data must be written into the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class before. To write the data into the <a class="el" href="classrlCanOpenTypes.html" title="class to handle CANopen types">rlCanOpenTypes</a> class use one of the datatype depending functions like <a class="el" href="classrlCanOpenTypes.html#ab592a58ab2a143018b778a66f93e3d43" title="sets type to RL_INT and stores passed parameter data in databuffer">rlCanOpenTypes::set_int(int _value)</a>; if sdo_write failures the current error can be read out using <a class="el" href="classrlCanOpenTypes.html#a8e213475ba049fe418aa703354e797eb" title="returns current errnumber">rlCanOpenTypes::get_rlmsgerr()</a> </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00431">431</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00436"></a>00436 {
<a name="l00437"></a>00437     <span class="keywordtype">int</span> length;
<a name="l00438"></a>00438     <span class="keywordtype">int</span> pdoid;
<a name="l00439"></a>00439     length = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#ab9855e0b33acd508a2a87b8c45655d70" title="returns number of bytes used for current type">getLength</a>();
<a name="l00440"></a>00440     <span class="keywordtype">int</span> nodeindex;
<a name="l00441"></a>00441     <span class="keywordflow">if</span> (<a class="code" href="classrlCanOpen.html#a79e0198f870d1c405d4b692628133252" title="this function returns the listindex of a desired node">getNodeIndex</a>(_boardnr,_nodeid,nodeindex)== 0) 
<a name="l00442"></a>00442     {
<a name="l00443"></a>00443       <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR: specified node does not exist! SDO write failed!&quot;</span>);
<a name="l00444"></a>00444       <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Objektindex: %d Subindex: %d\n&quot;</span>, 
<a name="l00445"></a>00445         _boardnr, _nodeid, _objectindex, _subindex);
<a name="l00446"></a>00446       
<a name="l00447"></a>00447       _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(<a class="code" href="rlcanopenstructs_8h.html#af9211799dab6db02d651c629f87d728d">ERRCODE_INVALID_NODEID</a>);
<a name="l00448"></a>00448       <span class="keywordflow">return</span> 0;
<a name="l00449"></a>00449     }
<a name="l00450"></a>00450     
<a name="l00451"></a>00451     <span class="comment">// if CanOpen-Type is a twistet integer (etc. 52Bit ) the datalength must be adjusted</span>
<a name="l00452"></a>00452     <span class="keywordtype">int</span> canopentype = <a class="code" href="classrlCanOpen.html#abab868b55f7b1bc5e14c9185e711d5e7" title="returns daemontype number of a specific object">getObjectType</a>(_boardnr, _nodeid, _objectindex, _subindex);
<a name="l00453"></a>00453    
<a name="l00454"></a>00454     <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#afe931676649e9b5be1d244a3fc8f1b61">is_twisted_type</a>(canopentype)) &amp;&amp; (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()))
<a name="l00455"></a>00455       length = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a9d93e04857e7351221b4cd0f1adf4efe">get_CanOpenTypeLength</a>(canopentype);
<a name="l00456"></a>00456    
<a name="l00457"></a>00457      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0;i&lt;length;i++)
<a name="l00458"></a>00458         <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.d[i] = _sdo_data.<a class="code" href="classrlCanOpenTypes.html#a166fde2f2e67890006fb9fd92e10243e" title="returns 1 byte from databuffer">get_buffer</a>(i);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     
<a name="l00461"></a>00461     <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);
<a name="l00462"></a>00462     
<a name="l00463"></a>00463     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.rx          = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>; 
<a name="l00464"></a>00464     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.tx          = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>;
<a name="l00465"></a>00465     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.ln          = 8+ length;
<a name="l00466"></a>00466     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.nr          = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++; 
<a name="l00467"></a>00467     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.a           = 0; 
<a name="l00468"></a>00468     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.f           = 0;
<a name="l00469"></a>00469     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.b           = <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>;
<a name="l00470"></a>00470     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.e           = 0;
<a name="l00471"></a>00471     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.device_adr  = _nodeid;  
<a name="l00472"></a>00472     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_area   = 0; 
<a name="l00473"></a>00473     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_adr    = _objectindex; 
<a name="l00474"></a>00474     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_idx    = _subindex; 
<a name="l00475"></a>00475     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_cnt    = length; 
<a name="l00476"></a>00476     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.data_type   = 0; 
<a name="l00477"></a>00477     <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>.function    = <a class="code" href="rlcanopenstructs_8h.html#ab710ffcc49def608b33679e823c8e0c4">TASK_TFC_WRITE</a>; 
<a name="l00478"></a>00478     
<a name="l00479"></a>00479     <span class="keywordflow">if</span>(DevPutMessage(0, (MSG_STRUC *)&amp;<a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>,5000L) != DRV_NO_ERROR) <span class="keywordflow">return</span> 0;
<a name="l00480"></a>00480          
<a name="l00481"></a>00481     
<a name="l00482"></a>00482   <span class="comment">// receive the answer</span>
<a name="l00483"></a>00483   
<a name="l00484"></a>00484   <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage ( _boardnr,                <span class="comment">// Device Number            </span>
<a name="l00485"></a>00485                          <span class="keyword">sizeof</span>(message), 
<a name="l00486"></a>00486                          (MSG_STRUC *)&amp;message,   <span class="comment">// Pointer to user buffer  </span>
<a name="l00487"></a>00487                          2000L );                 <span class="comment">// Timeout   </span>
<a name="l00488"></a>00488    
<a name="l00489"></a>00489    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msgnrlocal = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a> - 1;
<a name="l00490"></a>00490    
<a name="l00491"></a>00491    <span class="comment">// receive correct answer   </span>
<a name="l00492"></a>00492    <span class="keywordflow">if</span>((message.a == <a class="code" href="rlcanopenstructs_8h.html#ade8cb83eb96950ef811740c055c029f2">CMDCODE_SDO_UPDOWNLOAD</a>)&amp;&amp;(message.nr == msgnrlocal)){  
<a name="l00493"></a>00493       _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(message.f);
<a name="l00494"></a>00494       <span class="keywordflow">if</span> (message.f == <a class="code" href="rlcanopenstructs_8h.html#ac1be51ae85d8e10cd0f0f270b1dcd2a8" title="ERRCODES.">ERRCODE_NOERROR</a>) <span class="comment">// node active, no error</span>
<a name="l00495"></a>00495       {
<a name="l00496"></a>00496         <span class="comment">//check if the mapping has changed</span>
<a name="l00497"></a>00497         <span class="keywordflow">if</span>( (_objectindex &gt;= <a class="code" href="rlcanopenstructs_8h.html#a330bcfdaa91e6b28214c6f729e953887">TRANSMIT_PDO_MAPPING_STARTADRESS</a>) &amp;&amp;
<a name="l00498"></a>00498             (_objectindex &lt;= <a class="code" href="rlcanopenstructs_8h.html#ae409747bccc82f0f5c4c41fede2c0c7a">TRANSMIT_PDO_MAPPING_MAXADRESS</a>) &amp;&amp; 
<a name="l00499"></a>00499             (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()) )
<a name="l00500"></a>00500         { 
<a name="l00501"></a>00501           <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Mapping has changed: boardid %d, nodeid %d, objectindex %x\n&quot;</span>, 
<a name="l00502"></a>00502             _boardnr, _nodeid, _objectindex);
<a name="l00503"></a>00503             
<a name="l00504"></a>00504           pdoid = <a class="code" href="classrlCanOpen.html#a07a517a30bff32985a1e54a4787e1006" title="return PdoId of mapped object.">getPdoID</a>(_boardnr, _nodeid, _objectindex, <a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>);
<a name="l00505"></a>00505           <a class="code" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a>(_boardnr,_nodeid,pdoid,<a class="code" href="rlcanopenstructs_8h.html#a6f0fb127978f1d0ab8be97df6f447451">DIRECTION_TRANSMIT</a>);
<a name="l00506"></a>00506         }
<a name="l00507"></a>00507         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (_objectindex &gt;= <a class="code" href="rlcanopenstructs_8h.html#ac3149ff3f10f094a76671d481773ba1a">RECEIVE_PDO_MAPPING_STARTADRESS</a>) &amp;&amp; 
<a name="l00508"></a>00508                   (_objectindex &lt;= <a class="code" href="rlcanopenstructs_8h.html#aec05da2dc4c26fb5ca45cd2bffd2ae9f">RECEIVE_PDO_MAPPING_MAXADRESS</a>) &amp;&amp;
<a name="l00509"></a>00509                   (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[nodeindex]-&gt;hasMapping()) )
<a name="l00510"></a>00510         {
<a name="l00511"></a>00511           <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Mapping has changed: boardid %d, nodeid %d, objectindex %x\n&quot;</span>, 
<a name="l00512"></a>00512             _boardnr, _nodeid, _objectindex);
<a name="l00513"></a>00513           pdoid = <a class="code" href="classrlCanOpen.html#a07a517a30bff32985a1e54a4787e1006" title="return PdoId of mapped object.">getPdoID</a>(_boardnr, _nodeid, _objectindex, <a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>);
<a name="l00514"></a>00514           <a class="code" href="classrlCanOpen.html#ac91a85e76f8b9506303f5992fe72d018">refreshMappingList</a>(_boardnr,_nodeid,pdoid,<a class="code" href="rlcanopenstructs_8h.html#aa4615d9922b97604fd44de4c9a5aa898" title="definition of CanOpen structs for CanOpen Deamon">DIRECTION_RECEIVE</a>);
<a name="l00515"></a>00515         }
<a name="l00516"></a>00516         <span class="keywordflow">return</span> 1;
<a name="l00517"></a>00517       }
<a name="l00518"></a>00518       <span class="keywordflow">else</span>
<a name="l00519"></a>00519       {
<a name="l00520"></a>00520         sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;message.f = %d  message.f = %x Hex \n&quot;</span>, 
<a name="l00521"></a>00521           message.f, message.f);
<a name="l00522"></a>00522           
<a name="l00523"></a>00523         <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00524"></a>00524         _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(message.f);
<a name="l00525"></a>00525       }
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527     <span class="keywordflow">else</span>
<a name="l00528"></a>00528     {
<a name="l00529"></a>00529       _sdo_data.<a class="code" href="classrlCanOpenTypes.html#aef688ea2584647a14eea44cbfba30511" title="sets the errornumber. refer private varibale rlmsgerr for details">set_rlmsgerr</a>(-1);
<a name="l00530"></a>00530       sprintf(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>, <span class="stringliteral">&quot;message.a = %d message.nr = %d vergleich mit: %d\n&quot;</span>, 
<a name="l00531"></a>00531         message.a, message.nr, msgnrlocal);
<a name="l00532"></a>00532         
<a name="l00533"></a>00533       <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;ERROR during read SDO message!&quot;</span>);
<a name="l00536"></a>00536     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;BoardId: %d NodeId: %d Obj: %x Sub: %x\n&quot;</span>, 
<a name="l00537"></a>00537       _boardnr, _nodeid, _objectindex, _subindex);
<a name="l00538"></a>00538       
<a name="l00539"></a>00539     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<a class="code" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431" title="this string buffer is usually written with sprintf before sent to stdout">err_out_buf</a>);
<a name="l00540"></a>00540     <span class="keywordflow">return</span> 0;
<a name="l00541"></a>00541 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3b59ba388442d8ccf33f0f031752f6cd"></a><!-- doxytag: member="rlCanOpen::sendNMTCommand" ref="a3b59ba388442d8ccf33f0f031752f6cd" args="(int _boardnr, int _nodeid, unsigned char _cmd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlCanOpen::sendNMTCommand </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>_cmd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send a NMT Command to one or all nodes (of one board) </p>
<p>Using this function you can send a NMT Command to one or all nodes (of one board). NMT (Network Management) is a CanOpen service. Because of the device there are constrictions for the user. You can only execute the follow NMT commands: START_REMOTE_NODE, STOP_REMOTE_NODE, ENTER_PREOPERATIONAL, RESET_NODE, RESET_COMMUNICATION The corresponding 'defines' are declared in canopenstructs.h </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l01132">1132</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01133"></a>01133 {
<a name="l01134"></a>01134   MSG_STRUC <a class="code" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1" title="hilscher specific message structur which will be sent to the master card">message</a>;
<a name="l01135"></a>01135   <a class="code" href="classrlCanOpen.html#a75581c22eb7264ed2926e535835f1f61" title="sets a desired CanOpenMaster active, so that it can be used">setBoardActive</a>(_boardnr);
<a name="l01136"></a>01136   
<a name="l01137"></a>01137   message.rx = <a class="code" href="rlcanopenstructs_8h.html#a4b01b84b4362e4cc7ec87409933e09aa" title="Hilscher device-communication constants.">CAN_TASK</a>         ;<span class="comment">//receiver = user at HOST</span>
<a name="l01138"></a>01138   message.tx = <a class="code" href="rlcanopenstructs_8h.html#aeb8b209027ad2e076b2e12f39beede1a">USER_AT_HOST</a>     ;<span class="comment">// transmitter = USR_INTF-Task</span>
<a name="l01139"></a>01139   message.ln = 2                ;<span class="comment">//length of message</span>
<a name="l01140"></a>01140   message.nr = <a class="code" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76" title="message counter">messagenr</a>++      ;<span class="comment">//number of the message</span>
<a name="l01141"></a>01141   message.a  = 0                ;<span class="comment">//no answer</span>
<a name="l01142"></a>01142   message.f  = 0                ;<span class="comment">//error, status</span>
<a name="l01143"></a>01143   message.b  = <a class="code" href="rlcanopenstructs_8h.html#a37f659f732180aa50171e6aee00f2a1d">CMD_NMT_Module_Protocol</a>;<span class="comment">//command = COM_Node_Diag</span>
<a name="l01144"></a>01144   message.e =  0                ;<span class="comment">//extension</span>
<a name="l01145"></a>01145 
<a name="l01146"></a>01146         <span class="comment">// NMT Command specifier</span>
<a name="l01147"></a>01147         <span class="comment">//1     Start Remote Node</span>
<a name="l01148"></a>01148         <span class="comment">//2     Stop Remote Node</span>
<a name="l01149"></a>01149         <span class="comment">//128   Enter Pre-Operational</span>
<a name="l01150"></a>01150         <span class="comment">//129   Reset Node</span>
<a name="l01151"></a>01151         <span class="comment">//130   Reset Communication</span>
<a name="l01152"></a>01152   message.data[0] = _cmd                ;<span class="comment">//NMT Command specifier</span>
<a name="l01153"></a>01153   message.data[1] = _nodeid     ;<span class="comment">//NodeID</span>
<a name="l01154"></a>01154   
<a name="l01155"></a>01155    <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevPutMessage(_boardnr, (MSG_STRUC *)&amp;message, 5000L)) 
<a name="l01156"></a>01156          == DRV_NO_ERROR )
<a name="l01157"></a>01157  {
<a name="l01158"></a>01158    <span class="keywordflow">while</span>( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevGetMessage(_boardnr, <span class="keyword">sizeof</span>(message), 
<a name="l01159"></a>01159                                (MSG_STRUC *)&amp;message, 0)) 
<a name="l01160"></a>01160            == DRV_DEV_GET_NO_MESSAGE )
<a name="l01161"></a>01161    {
<a name="l01162"></a>01162      <span class="keywordflow">continue</span>;
<a name="l01163"></a>01163    }
<a name="l01164"></a>01164    <span class="keywordflow">if</span> ( <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> == DRV_NO_ERROR )
<a name="l01165"></a>01165    {
<a name="l01166"></a>01166      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;NMT message successfully received\n&quot;</span>);
<a name="l01167"></a>01167      <span class="comment">// continue;</span>
<a name="l01168"></a>01168    }
<a name="l01169"></a>01169    <span class="keywordflow">else</span>
<a name="l01170"></a>01170    {
<a name="l01171"></a>01171      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;Error  Message (f = %d))\n&quot;</span>,message.f);
<a name="l01172"></a>01172      <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevGetMessage(%d, sizeof(message), &amp;message, 500): %d\n&quot;</span>,
<a name="l01173"></a>01173              _boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
<a name="l01174"></a>01174      
<a name="l01175"></a>01175      <span class="keywordflow">return</span> 0;
<a name="l01176"></a>01176     }
<a name="l01177"></a>01177   }
<a name="l01178"></a>01178   <span class="keywordflow">else</span>
<a name="l01179"></a>01179   {
<a name="l01180"></a>01180     <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\nDevPutMessage(NMT)(%d, &amp;message, 5000): %d\n&quot;</span>,_boardnr, (<span class="keywordtype">int</span>)<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>);
<a name="l01181"></a>01181     <span class="keywordflow">return</span> 0;
<a name="l01182"></a>01182   } <span class="comment">/* if ( (sRet = DevPutMessage(...)) == DRV_NO_ERROR ) else */</span>
<a name="l01183"></a>01183   
<a name="l01184"></a>01184   <span class="keywordflow">return</span> 1;     
<a name="l01185"></a>01185 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a75581c22eb7264ed2926e535835f1f61"></a><!-- doxytag: member="rlCanOpen::setBoardActive" ref="a75581c22eb7264ed2926e535835f1f61" args="(int _boardnr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short rlCanOpen::setBoardActive </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>sets a desired CanOpenMaster active, so that it can be used </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00285">285</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00286"></a>00286 {
<a name="l00287"></a>00287                         
<a name="l00288"></a>00288   <span class="keywordflow">if</span> ( (<a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a> = DevSetHostState( _boardnr, HOST_READY, 0L) == DRV_NO_ERROR) )   
<a name="l00289"></a>00289     <a class="code" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72" title="the currently active board">activeboard</a> = _boardnr;
<a name="l00290"></a>00290  
<a name="l00291"></a>00291   <span class="keywordflow">return</span> <a class="code" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25" title="return value for hilscher specific message functions">sRet</a>;
<a name="l00292"></a>00292 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afb672e8a6cd805cd5ed902fb740a6f3e"></a><!-- doxytag: member="rlCanOpen::showNodeConfiguration" ref="afb672e8a6cd805cd5ed902fb740a6f3e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::showNodeConfiguration </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>prints out the configuration off all available nodes from all boards </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00320">320</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00321"></a>00321 {
<a name="l00322"></a>00322   <span class="keywordflow">if</span>(<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size() == 0) <span class="keywordflow">return</span> 0;
<a name="l00323"></a>00323   <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size(); i++)
<a name="l00324"></a>00324   {
<a name="l00325"></a>00325     <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;showConfiguration();   
<a name="l00326"></a>00326   }
<a name="l00327"></a>00327    <span class="keywordflow">return</span> 1;
<a name="l00328"></a>00328 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af8071fb948b6862ec7444e4f9b33b679"></a><!-- doxytag: member="rlCanOpen::showNodeConfiguration" ref="af8071fb948b6862ec7444e4f9b33b679" args="(int _boardnr, int _nodeid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rlCanOpen::showNodeConfiguration </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_boardnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>_nodeid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>prints out the configuration of a specific node </p>

<p>Definition at line <a class="el" href="rlcanopen_8cpp_source.html#l00303">303</a> of file <a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00304"></a>00304 {
<a name="l00305"></a>00305   <span class="keywordflow">for</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>.size(); i++)
<a name="l00306"></a>00306   {
<a name="l00307"></a>00307     <span class="keywordflow">if</span> ((<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getNodeID() == _nodeid) &amp;&amp; 
<a name="l00308"></a>00308         (<a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;getBoardID() == _boardnr))
<a name="l00309"></a>00309     {
<a name="l00310"></a>00310       <a class="code" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72" title="this list contains all nodes from all boards">nodelist</a>[i]-&gt;showConfiguration();
<a name="l00311"></a>00311       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00312"></a>00312       
<a name="l00313"></a>00313     }           
<a name="l00314"></a>00314   }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316   <span class="keywordflow">return</span> <span class="keyword">false</span>; 
<a name="l00317"></a>00317 } 
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="af6158583052812792b8036d631d95a72"></a><!-- doxytag: member="rlCanOpen::activeboard" ref="af6158583052812792b8036d631d95a72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlCanOpen.html#af6158583052812792b8036d631d95a72">rlCanOpen::activeboard</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the currently active board </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00219">219</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3eff7e93db293eb999c1accf78d56e24"></a><!-- doxytag: member="rlCanOpen::boardcount" ref="a3eff7e93db293eb999c1accf78d56e24" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrlCanOpen.html#a3eff7e93db293eb999c1accf78d56e24">rlCanOpen::boardcount</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the current count of CanOpenMaster cards </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00253">253</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac61d9cf8e555c36c2b558cda10e9193f"></a><!-- doxytag: member="rlCanOpen::enableLogging" ref="ac61d9cf8e555c36c2b558cda10e9193f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classrlCanOpen.html#ac61d9cf8e555c36c2b558cda10e9193f">rlCanOpen::enableLogging</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>this indicator is true when stdout is redirected to file. it is set in the ini-file </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00281">281</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae49809a8c8792a84afdbaf5339ccfc56"></a><!-- doxytag: member="rlCanOpen::err_fp" ref="ae49809a8c8792a84afdbaf5339ccfc56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE* <a class="el" href="classrlCanOpen.html#ae49809a8c8792a84afdbaf5339ccfc56">rlCanOpen::err_fp</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to error logfile. </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00241">241</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a64a5fceff2c1c9d97a319eab86b07431"></a><!-- doxytag: member="rlCanOpen::err_out_buf" ref="a64a5fceff2c1c9d97a319eab86b07431" args="[255]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="classrlCanOpen.html#a64a5fceff2c1c9d97a319eab86b07431">rlCanOpen::err_out_buf</a>[255]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this string buffer is usually written with sprintf before sent to stdout </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00235">235</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0547463787b69513660fefb1f5b5848d"></a><!-- doxytag: member="rlCanOpen::logFileName" ref="a0547463787b69513660fefb1f5b5848d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString <a class="el" href="classrlCanOpen.html#a0547463787b69513660fefb1f5b5848d">rlCanOpen::logFileName</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>name of logfile stdout is redirected to </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00244">244</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a86ad06349b70e8d0fceaeb06efa362f1"></a><!-- doxytag: member="rlCanOpen::message" ref="a86ad06349b70e8d0fceaeb06efa362f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RCS_MESSAGETELEGRAM_10 <a class="el" href="classrlCanOpen.html#a86ad06349b70e8d0fceaeb06efa362f1">rlCanOpen::message</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>hilscher specific message structur which will be sent to the master card </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00247">247</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8bc3d3346fdb9e64c6bc041fcac19b76"></a><!-- doxytag: member="rlCanOpen::messagenr" ref="a8bc3d3346fdb9e64c6bc041fcac19b76" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="classrlCanOpen.html#a8bc3d3346fdb9e64c6bc041fcac19b76">rlCanOpen::messagenr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>message counter </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00256">256</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6fe4e7245881d141b63f42ea46f9fd72"></a><!-- doxytag: member="rlCanOpen::nodelist" ref="a6fe4e7245881d141b63f42ea46f9fd72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QPtrVector&lt;<a class="el" href="classrlCanNode.html">rlCanNode</a>&gt; <a class="el" href="classrlCanOpen.html#a6fe4e7245881d141b63f42ea46f9fd72">rlCanOpen::nodelist</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this list contains all nodes from all boards </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00250">250</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1c40a2fc97d124fafe75c2f58c121f25"></a><!-- doxytag: member="rlCanOpen::sRet" ref="a1c40a2fc97d124fafe75c2f58c121f25" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short <a class="el" href="classrlCanOpen.html#a1c40a2fc97d124fafe75c2f58c121f25">rlCanOpen::sRet</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return value for hilscher specific message functions </p>

<p>Definition at line <a class="el" href="rlcanopen_8h_source.html#l00238">238</a> of file <a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="rlcanopen_8h_source.html">rlcanopen.h</a></li>
<li><a class="el" href="rlcanopen_8cpp_source.html">rlcanopen.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sat Jul 24 11:51:31 2010 for rllib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
